"use strict";(self.webpackChunkih_portal=self.webpackChunkih_portal||[]).push([["src_app_modules_manage-chws_manage-chws_module_ts"],{3370:(Qt,x,g)=>{g.r(x),g.d(x,{ManageChwsModule:()=>Mt});var m=g(8692),C=g(3580),f=g(8239),d=g(92),U=g(5128),l=g(8629),t=g(4537),O=g(3406),Z=g(7556),T=g(3395);function Q(n,r){if(1&n&&(t.TgZ(0,"b",35)(1,"strong"),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.message)}}function N(n,r){if(1&n&&(t.TgZ(0,"div",44),t._UZ(1,"i",45),t.TgZ(2,"div",46),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.LoadingMsg)}}function F(n,r){if(1&n&&(t.TgZ(0,"option",47),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function I(n,r){if(1&n&&(t.TgZ(0,"option",47),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function J(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tbody")(1,"tr",48),t.NdJ("click",function(){const o=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.EditChwsZone(o))}),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(3),t.Oqu(e.name),t.xp6(2),t.Oqu(e.zone.name)}}function k(n,r){if(1&n&&(t.TgZ(0,"div",44),t._UZ(1,"i",45),t.TgZ(2,"div",46),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.LoadingMsg)}}function E(n,r){if(1&n&&(t.TgZ(0,"option",47),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}let Y=(()=>{class n{constructor(e,i,a,o){this.db=e,this.auth=i,this.sync=a,this.router=o,this.District$=[],this.Sites$=[],this.Zones$=[],this.district$=[],this.sites$=[],this.replacementChws$=[],this.isLoginForm=!1,this.isLoading1=!1,this.isLoading2=!1,this.LoadingMsg="Loading...",this.isEditMode=!1,this.message="",this.APP_LOGO=U.z.APP_LOGO}activeSave(){throw new Error("Method not implemented.")}ngOnInit(){this.initAllData(),this.filterForm=this.createFilterFormGroup(),this.replacementChwsForm=this.createReplacementChwsFormGroup()}initAllData(){var e=this;return(0,f.Z)(function*(){e.sync.getDistrictsList().subscribe(i=>{200==i.status&&(e.District$=i.data),e.sync.getSitesList().subscribe(a=>{200==a.status&&(e.Sites$=a.data)},a=>console.log(a.error))},i=>console.log(i.error))})()}getReplacementChws(){this.isLoading1=!0;const e={districts:(0,l.pb)(this.filterForm.value.districts),sites:(0,l.pb)(this.filterForm.value.sites),withDhis2Data:!1};this.sync.getZonesList(e).subscribe(i=>{200==i.status&&(this.Zones$=i.data),this.sync.getChwsList(e).subscribe(a=>{if(this.replacementChws$=[],200==a.status)for(let o=0;o<a.data.length;o++){const c=a.data[o];c.name.includes("(R)")&&this.replacementChws$.push(c)}this.isLoading1=!1},a=>{console.log(a),this.isLoading1=!1})},i=>{console.log(i),this.isLoading1=!1})}EditChwsZone(e){this.message="",this.isEditMode=!0,this.replacementChwsForm=this.createReplacementChwsFormGroup(e),this.selectedChw(e)}selectedChw(e){this.chw=e}updateChwsFacilityIdAndContactPlace(){return this.isLoading2=!0,this.message="",this.db.updateUserFacilityContactPlace(this.replacementChwsForm.value).subscribe(e=>{this.message=e.message,this.getReplacementChws(),this.closeModal(),this.isLoading2=!1},e=>{this.message=e,this.isLoading2=!1,console.log(this.message)})}createFilterFormGroup(){return new d.cw({districts:new d.NI("",[d.kI.required]),sites:new d.NI("",[d.kI.required])})}createReplacementChwsFormGroup(e){return new d.cw({contact:new d.NI(null!=e?e.id:"",[d.kI.required]),parent:new d.NI(null!=e?e.zone.id:"",[d.kI.required]),new_parent:new d.NI("",[d.kI.required])},[this.MatchValidator("parent","new_parent")])}MatchValidator(e,i){return a=>{const o=a.get(e),c=a.get(i);return o&&c&&this.isEditMode&&o.value==c.value?{mismatch:!0}:null}}genarateSites(){const e=(0,l.pb)(this.filterForm.value.districts);if(this.sites$=[],(0,l.Nf)(e))for(let i=0;i<this.Sites$.length;i++){const a=this.Sites$[i];(0,l.Nf)(a)&&e.includes(a.district.id)&&this.sites$.push(a)}else this.sites$=[]}showModalToast(e,i){showToast(e,i),this.closeModal("close-delete-modal")}closeModal(e="close-modal"){$("#"+e).trigger("click")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.W),t.Y36(Z.e),t.Y36(T._),t.Y36(C.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-chws_manage"]],decls:87,vars:15,consts:[[1,"page-title","card","card-primary","card-outline"],[1,"card-body"],[1,"fas","fa-user",2,"float","left"],["class","login-box-msg",4,"ngIf"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-3","col-6"],[1,"form-group"],["formControlName","districts",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","sites",1,"form-control"],[1,"col-sm-2","col-6"],["type","submit",1,"btn","btn-warning","form-control",3,"disabled"],[1,"fa","fa-floppy-o","fa-right"],[1,"page-content-wrap"],[1,"col-md-12"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"panel-body"],[1,"table","datatable"],[4,"ngFor","ngForOf"],["id","modal-default",1,"modal","fade"],[1,"modal-dialog"],["novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"modal-content"],[1,"modal-header"],["height","30","alt","","srcset","",1,"modal-title",3,"src"],[1,"login-box-msg",2,"text-align","center"],[1,"btn-warning"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"login-box-msg"],[1,"input-group","mb-3"],["id","new_parent","formControlName","new_parent",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-edit"],[1,"modal-footer","justify-content-between"],["id","close-modal","type","button","data-dismiss","modal",1,"btn","btn-default"],["type","submit",1,"btn","btn-warning",3,"disabled"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],[3,"value"],["data-toggle","modal","data-target","#modal-default",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3," List des ASC rempla\xe7antes"),t.qZA(),t._UZ(4,"br")(5,"br")(6,"br"),t.YNc(7,Q,3,1,"b",3),t.TgZ(8,"div",4),t.YNc(9,N,4,1,"div",5),t.TgZ(10,"form",6),t.NdJ("ngSubmit",function(){return i.getReplacementChws()}),t.TgZ(11,"div",7)(12,"div",8)(13,"div",9)(14,"label"),t._uU(15,"District"),t.qZA(),t.TgZ(16,"select",10),t.NdJ("change",function(){return i.genarateSites()}),t._UZ(17,"option",11),t.YNc(18,F,2,2,"option",12),t.qZA()()(),t.TgZ(19,"div",8)(20,"div",9)(21,"label"),t._uU(22,"Site"),t.qZA(),t.TgZ(23,"select",13),t._UZ(24,"option",11),t.YNc(25,I,2,2,"option",12),t.qZA()()(),t.TgZ(26,"div",14)(27,"div",9)(28,"label"),t._uU(29,"."),t.qZA(),t.TgZ(30,"button",15),t._uU(31," OK "),t._UZ(32,"span",16),t.qZA()()()()()()()(),t.TgZ(33,"div",17)(34,"div",7)(35,"div",18)(36,"div",19),t._UZ(37,"div",20),t.TgZ(38,"div",21)(39,"table",22)(40,"thead")(41,"tr")(42,"th"),t._uU(43,"Nom de l'ASC"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Zone Actuel"),t.qZA()()(),t.YNc(46,J,6,2,"tbody",23),t.qZA()()()()()(),t.TgZ(47,"div",24)(48,"div",25)(49,"div",4),t.YNc(50,k,4,1,"div",5),t.TgZ(51,"form",26),t.NdJ("ngSubmit",function(){return i.updateChwsFacilityIdAndContactPlace()}),t.TgZ(52,"div",27)(53,"div",28),t._UZ(54,"img",29),t.TgZ(55,"strong",30)(56,"span",31),t._uU(57,"Modifier la zone"),t.qZA()(),t.TgZ(58,"button",32)(59,"span",33),t._uU(60,"\xd7"),t.qZA()()(),t.TgZ(61,"div",34)(62,"p",35)(63,"strong"),t._uU(64),t.qZA()(),t.TgZ(65,"p"),t._uU(66,"L'ASC remplacante "),t.TgZ(67,"strong"),t._uU(68),t.qZA(),t._uU(69," intervient pr\xe9sentement dans "),t.TgZ(70,"strong"),t._uU(71),t.qZA()(),t._UZ(72,"br"),t.TgZ(73,"p"),t._uU(74,"Selectionner une nouvelle zone d'intervention"),t.qZA(),t.TgZ(75,"div",36)(76,"select",37),t._UZ(77,"option",11),t.YNc(78,E,2,2,"option",12),t.qZA(),t.TgZ(79,"div",38)(80,"div",39),t._UZ(81,"span",40),t.qZA()()()(),t.TgZ(82,"div",41)(83,"button",42),t._uU(84,"Close"),t.qZA(),t.TgZ(85,"button",43),t._uU(86,"Modifier"),t.qZA()()()()()()()),2&e&&(t.xp6(7),t.Q6J("ngIf",""!=i.message),t.xp6(2),t.Q6J("ngIf",i.isLoading1),t.xp6(1),t.Q6J("formGroup",i.filterForm),t.xp6(8),t.Q6J("ngForOf",i.District$),t.xp6(7),t.Q6J("ngForOf",i.sites$),t.xp6(5),t.Q6J("disabled",!i.filterForm.valid),t.xp6(16),t.Q6J("ngForOf",i.replacementChws$),t.xp6(4),t.Q6J("ngIf",i.isLoading2),t.xp6(1),t.Q6J("formGroup",i.replacementChwsForm),t.xp6(3),t.s9C("src",i.APP_LOGO,t.LSH),t.xp6(10),t.Oqu(i.message),t.xp6(4),t.Oqu(null==i.chw?null:i.chw.name),t.xp6(3),t.Oqu(null==i.chw||null==i.chw.zone?null:i.chw.zone.name),t.xp6(7),t.Q6J("ngForOf",i.Zones$),t.xp6(7),t.Q6J("disabled",!i.replacementChwsForm.valid))},dependencies:[m.sg,m.O5,d._Y,d.YN,d.Kr,d.EJ,d.JJ,d.JL,d.sg,d.u],encapsulation:2}),n})();var L=g(8527),P=g(926);function S(n,r){if(1&n&&(t.TgZ(0,"div",18),t._UZ(1,"i",19),t.TgZ(2,"div",20),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",e.initMsg," ")}}function G(n,r){if(1&n&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.labelFR," ")}}function j(n,r){if(1&n&&(t.TgZ(0,"select",22),t.YNc(1,G,2,2,"option",23),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.Months$)}}function K(n,r){if(1&n&&(t.TgZ(0,"div",10)(1,"div",11)(2,"label"),t._uU(3,"Mois"),t.qZA(),t.YNc(4,j,2,1,"select",21),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.Months$.length>0)}}function R(n,r){if(1&n&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.s9C("value",e),t.xp6(1),t.hij(" ",e," ")}}function H(n,r){if(1&n&&(t.TgZ(0,"select",26),t.YNc(1,R,2,2,"option",23),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.Years$)}}function V(n,r){if(1&n&&(t.TgZ(0,"div",10)(1,"div",11)(2,"label"),t._uU(3,"Ann\xe9e"),t.qZA(),t.YNc(4,H,2,1,"select",25),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.Years$.length>0)}}function z(n,r){if(1&n&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function B(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"select",28),t.NdJ("change",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.genarateSites())}),t.YNc(1,z,2,2,"option",23),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("multiple",e.Districts$.length>0?"multiple":""),t.xp6(1),t.Q6J("ngForOf",e.Districts$)}}function X(n,r){if(1&n&&(t.TgZ(0,"div",10)(1,"div",11)(2,"label"),t._uU(3,"District"),t.qZA(),t.YNc(4,B,2,2,"select",27),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.Districts$.length>0)}}function W(n,r){if(1&n&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function tt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",10)(1,"div",11)(2,"label"),t._uU(3,"Site"),t.qZA(),t.TgZ(4,"select",29),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.genarateChws())}),t.YNc(5,W,2,2,"option",23),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("multiple",e.site$.length>0?"multiple":""),t.xp6(1),t.Q6J("ngForOf",e.site$)}}function et(n,r){if(1&n&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function it(n,r){if(1&n&&(t.TgZ(0,"div",10)(1,"div",11)(2,"label"),t._uU(3,"ASC"),t.qZA(),t.TgZ(4,"select",30),t.YNc(5,et,2,2,"option",23),t.qZA()()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("multiple",e.chw$.length>0?"multiple":""),t.xp6(1),t.Q6J("ngForOf",e.chw$)}}function nt(n,r){if(1&n&&(t.TgZ(0,"h2")(1,"div",2)(2,"div",31),t._uU(3),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",e.data_error_messages," ")}}function at(n,r){1&n&&(t.TgZ(0,"h2")(1,"div",2)(2,"div",31),t._uU(3," Pas de donn\xe9es trouv\xe9e avec les paramettres renseign\xe9s ! "),t.qZA()()())}function st(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"ul")(1,"li")(2,"span",43),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().index,o=t.oxw(2);return t.KtG(o.excel("export_table"+a))}),t._uU(3,"Excel"),t.qZA()(),t.TgZ(4,"li")(5,"span",43),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().index,o=t.oxw(2);return t.KtG(o.csv("export_table"+a))}),t._uU(6,"CSV"),t.qZA()(),t.TgZ(7,"li")(8,"span",43),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().index,o=t.oxw(2);return t.KtG(o.json("export_table"+a))}),t._uU(9,"JSON"),t.qZA()(),t.TgZ(10,"li")(11,"span",43),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().index,o=t.oxw(2);return t.KtG(o.pdf("export_table"+a))}),t._uU(12,"PDF"),t.qZA()(),t.TgZ(13,"li")(14,"span",43),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().index,o=t.oxw(2);return t.KtG(o.print("export_table"+a))}),t._uU(15,"PRINT"),t.qZA()()()}}function ot(n,r){1&n&&t._UZ(0,"i",47)}function rt(n,r){if(1&n&&(t.TgZ(0,"button",45),t.YNc(1,ot,1,0,"i",46),t._uU(2),t.qZA()),2&n){const e=t.oxw().index,i=t.oxw(2);t.Q6J("disabled","true"==i.isUpdateLoading[e]),t.xp6(1),t.Q6J("ngIf","true"==i.isUpdateLoading[e]),t.xp6(1),t.hij(" ","true"==i.isUpdateLoading[e]?"Sauvegarde en cours ...":"Mettre \xe0 jour"," ")}}function ct(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw().$implicit,a=t.oxw(2);t.xp6(1),t.hij(" ",a.convertQty(a.toChwsDrugData(a.sortedArray(i.data),e).val.year_cmm)," ")}}function dt(n,r){if(1&n&&t._UZ(0,"input",53),2&n){const e=t.oxw().ngIf,i=t.oxw().$implicit,a=t.oxw(),o=a.index,c=a.$implicit,s=t.oxw(2);t.hYB("id","year_cmm_",o,"_",e,""),t.s9C("value",s.toChwsDrugData(s.sortedArray(c.data),i).val.year_cmm),t.Q6J("disabled","true"==s.isUpdateLoading[o]),t.uIk("data-drug-index",e)}}function lt(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw().$implicit,a=t.oxw(2);t.xp6(1),t.hij(" ",a.convertQty(a.toChwsDrugData(a.sortedArray(i.data),e).val.theoretical_quantity_to_order)," ")}}function _t(n,r){if(1&n&&t._UZ(0,"input",53),2&n){const e=t.oxw().ngIf,i=t.oxw().$implicit,a=t.oxw(),o=a.index,c=a.$implicit,s=t.oxw(2);t.hYB("id","theoretical_quantity_to_order_",o,"_",e,""),t.s9C("value",s.toChwsDrugData(s.sortedArray(c.data),i).val.theoretical_quantity_to_order),t.Q6J("disabled","true"==s.isUpdateLoading[o]),t.uIk("data-drug-index",e)}}function ut(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw().$implicit,a=t.oxw(2);t.xp6(1),t.hij(" ",a.convertQty(a.toChwsDrugData(a.sortedArray(i.data),e).val.quantity_validated)," ")}}function gt(n,r){if(1&n&&t._UZ(0,"input",53),2&n){const e=t.oxw().ngIf,i=t.oxw().$implicit,a=t.oxw(),o=a.index,c=a.$implicit,s=t.oxw(2);t.hYB("id","quantity_validated_",o,"_",e,""),t.s9C("value",s.toChwsDrugData(s.sortedArray(c.data),i).val.quantity_validated),t.Q6J("disabled","true"==s.isUpdateLoading[o]),t.uIk("data-drug-index",e)}}function pt(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw().$implicit,a=t.oxw(2);t.xp6(1),t.hij(" ",a.convertQty(a.toChwsDrugData(a.sortedArray(i.data),e).val.delivered_quantity)," ")}}function ht(n,r){if(1&n&&t._UZ(0,"input",53),2&n){const e=t.oxw().ngIf,i=t.oxw().$implicit,a=t.oxw(),o=a.index,c=a.$implicit,s=t.oxw(2);t.hYB("id","delivered_quantity_",o,"_",e,""),t.s9C("value",s.toChwsDrugData(s.sortedArray(c.data),i).val.delivered_quantity),t.Q6J("disabled","true"==s.isUpdateLoading[o]),t.uIk("data-drug-index",e)}}function mt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"i",54),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(5);return t.KtG(a.showHideMsg("loan_borrowing_chws_code"))}),t.qZA()}}function ft(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"i",54),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(5);return t.KtG(a.showHideMsg("comments"))}),t.qZA()}}function Ct(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw().$implicit,a=t.oxw(2);t.xp6(1),t.hij(" ",a.toChwsDrugData(a.sortedArray(i.data),e).val.observations," ")}}function wt(n,r){if(1&n&&t._UZ(0,"input",55),2&n){const e=t.oxw().ngIf,i=t.oxw().$implicit,a=t.oxw(),o=a.index,c=a.$implicit,s=t.oxw(2);t.hYB("id","observations_",o,"_",e,""),t.s9C("value",s.toChwsDrugData(s.sortedArray(c.data),i).val.observations),t.Q6J("disabled","true"==s.isUpdateLoading[o]),t.uIk("data-drug-index",e)}}function vt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"i",54),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(5);return t.KtG(a.showHideMsg("observations"))}),t.qZA()}}function xt(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td")(2,"b"),t._uU(3),t.qZA()(),t.TgZ(4,"td",48)(5,"label")(6,"b"),t._uU(7),t.qZA()()(),t.TgZ(8,"td",48)(9,"p"),t._uU(10),t.qZA()(),t.TgZ(11,"td",48)(12,"p"),t._uU(13),t.qZA()(),t.TgZ(14,"td",48)(15,"p"),t._uU(16),t.qZA()(),t.TgZ(17,"td",48)(18,"p"),t._uU(19),t.qZA()(),t.TgZ(20,"td",48)(21,"p"),t._uU(22),t.qZA()(),t.TgZ(23,"td",48)(24,"p"),t._uU(25),t.qZA()(),t.TgZ(26,"td",48)(27,"p"),t._uU(28),t.qZA()(),t.TgZ(29,"td",48)(30,"p"),t.YNc(31,ct,2,1,"span",17),t.YNc(32,dt,1,5,"input",49),t.qZA()(),t.TgZ(33,"td",48)(34,"p"),t.YNc(35,lt,2,1,"span",17),t.YNc(36,_t,1,5,"input",49),t.qZA()(),t.TgZ(37,"td",48)(38,"p"),t._uU(39),t.qZA()(),t.TgZ(40,"td",48)(41,"p"),t.YNc(42,ut,2,1,"span",17),t.YNc(43,gt,1,5,"input",49),t.qZA()(),t.TgZ(44,"td",48)(45,"p"),t.YNc(46,pt,2,1,"span",17),t.YNc(47,ht,1,5,"input",49),t.qZA()(),t.TgZ(48,"td",48)(49,"p"),t._uU(50),t.qZA()(),t.TgZ(51,"td",48)(52,"p"),t._uU(53),t.qZA()(),t.TgZ(54,"td",48)(55,"p"),t._uU(56),t.qZA()(),t.TgZ(57,"td",50)(58,"p"),t._uU(59),t.qZA(),t.YNc(60,mt,1,0,"i",51),t.qZA(),t.TgZ(61,"td",48)(62,"p"),t._uU(63),t.qZA()(),t.TgZ(64,"td",48)(65,"p"),t._uU(66),t.qZA()(),t.TgZ(67,"td",48)(68,"p"),t._uU(69),t.qZA()(),t.TgZ(70,"td",48)(71,"p"),t._uU(72),t.qZA()(),t.TgZ(73,"td",48)(74,"p"),t._uU(75),t.qZA()(),t.TgZ(76,"td",50)(77,"p"),t._uU(78),t.qZA(),t.YNc(79,ft,1,0,"i",51),t.qZA(),t.TgZ(80,"td",50),t.YNc(81,Ct,2,1,"span",17),t.YNc(82,wt,1,5,"input",52),t.YNc(83,vt,1,0,"i",51),t.qZA()()),2&n){const e=r.ngIf,i=t.oxw().$implicit,a=t.oxw(),o=a.$implicit,c=a.index,s=t.oxw(2);t.xp6(3),t.Oqu(e),t.xp6(4),t.Oqu(s.getLabel(s.toChwsDrugData(s.sortedArray(o.data),i).key)),t.xp6(3),t.Oqu(s.convertQty(s.toChwsDrugData(s.sortedArray(o.data),i).val.month_quantity_beginning)),t.xp6(3),t.Oqu(s.convertQty(s.toChwsDrugData(s.sortedArray(o.data),i).val.month_quantity_received)),t.xp6(3),t.hij("",s.convertQty(s.toChwsDrugData(s.sortedArray(o.data),i).val.month_total_quantity)," "),t.xp6(3),t.hij("",s.convertQty(s.toChwsDrugData(s.sortedArray(o.data),i).val.month_consumption)," "),t.xp6(3),t.hij("",s.convertQty(s.toChwsDrugData(s.sortedArray(o.data),i).val.theoretical_quantity)," "),t.xp6(3),t.hij("",s.convertQty(s.toChwsDrugData(s.sortedArray(o.data),i).val.inventory_quantity)," "),t.xp6(3),t.hij("",s.convertQty(s.toChwsDrugData(s.sortedArray(o.data),i).val.inventory_variance)," "),t.xp6(3),t.Q6J("ngIf","edit"!=s.editCmm[c]),t.xp6(1),t.Q6J("ngIf","edit"==s.editCmm[c]),t.xp6(3),t.Q6J("ngIf","edit"!=s.editTheoreticalQtyOrder[c]),t.xp6(1),t.Q6J("ngIf","edit"==s.editTheoreticalQtyOrder[c]),t.xp6(3),t.Oqu(s.convertQty(s.toChwsDrugData(s.sortedArray(o.data),i).val.quantity_to_order)),t.xp6(3),t.Q6J("ngIf","edit"!=s.editQtyValidated[c]),t.xp6(1),t.Q6J("ngIf","edit"==s.editQtyValidated[c]),t.xp6(3),t.Q6J("ngIf","edit"!=s.editQtyDelivered[c]),t.xp6(1),t.Q6J("ngIf","edit"==s.editQtyDelivered[c]),t.xp6(3),t.Oqu(s.toChwsDrugData(s.sortedArray(o.data),i).val.satisfaction_rate),t.xp6(3),t.Oqu(s.toChwsDrugData(s.sortedArray(o.data),i).val.loan_borrowing),t.xp6(3),t.Oqu(s.convertQty(s.toChwsDrugData(s.sortedArray(o.data),i).val.loan_borrowing_quantity)),t.xp6(3),t.Oqu(s.toChwsDrugData(s.sortedArray(o.data),i).val.loan_borrowing_chws_code),t.xp6(1),t.Q6J("ngIf",""!=s.toChwsDrugData(s.sortedArray(o.data),i).val.loan_borrowing_chws_code),t.xp6(3),t.Oqu(s.convertQty(s.toChwsDrugData(s.sortedArray(o.data),i).val.quantity_loss)),t.xp6(3),t.Oqu(s.convertQty(s.toChwsDrugData(s.sortedArray(o.data),i).val.quantity_damaged)),t.xp6(3),t.Oqu(s.convertQty(s.toChwsDrugData(s.sortedArray(o.data),i).val.quantity_broken)),t.xp6(3),t.Oqu(s.convertQty(s.toChwsDrugData(s.sortedArray(o.data),i).val.quantity_expired)),t.xp6(3),t.Oqu(s.convertQty(s.toChwsDrugData(s.sortedArray(o.data),i).val.other_quantity)),t.xp6(3),t.Oqu(s.toChwsDrugData(s.sortedArray(o.data),i).val.comments),t.xp6(1),t.Q6J("ngIf",""!=s.toChwsDrugData(s.sortedArray(o.data),i).val.comments),t.xp6(2),t.Q6J("ngIf","edit"!=s.editObservations[c]),t.xp6(1),t.Q6J("ngIf","edit"==s.editObservations[c]),t.xp6(1),t.Q6J("ngIf",""!=s.toChwsDrugData(s.sortedArray(o.data),i).val.observations)}}function Zt(n,r){if(1&n&&(t.ynx(0),t.YNc(1,xt,84,33,"tr",17),t.BQk()),2&n){const e=r.$implicit,i=t.oxw().$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",a.getKey(a.toChwsDrugData(a.sortedArray(i.data),e).key))}}function Tt(n,r){1&n&&(t.TgZ(0,"p"),t._UZ(1,"br")(2,"br"),t.qZA())}function Dt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t._UZ(1,"div",33),t.TgZ(2,"form",34),t.NdJ("submit",function(a){const c=t.CHM(e).index,s=t.oxw(2);return t.KtG(s.saveOrUpdate(a,c))}),t.TgZ(3,"div",35)(4,"div",6)(5,"div",36)(6,"p",37),t._uU(7),t.TgZ(8,"strong"),t._uU(9),t.qZA(),t._uU(10),t.qZA(),t.YNc(11,st,16,0,"ul",17),t.YNc(12,rt,3,3,"button",38),t.qZA()(),t.TgZ(13,"div",39)(14,"table",40)(15,"thead")(16,"tr",41)(17,"th",42),t._uU(18,"Id"),t.qZA(),t.TgZ(19,"th",42),t._uU(20,"MEG"),t.qZA(),t.TgZ(21,"th",42),t._uU(22," Quantit\xe9 d\xe9but du mois "),t._UZ(23,"br"),t.TgZ(24,"small")(25,"small"),t._uU(26,"ou la quantit\xe9 \xe0 l'inventaire pr\xe9c\xe9dent"),t.qZA(),t._uU(27,"(A)"),t.qZA()(),t.TgZ(28,"th",42),t._uU(29,"Quantit\xe9 re\xe7ue au cours du mois "),t.TgZ(30,"small"),t._uU(31,"(B)"),t.qZA()(),t.TgZ(32,"th",42),t._uU(33,"Quantit\xe9 totale du mois "),t.TgZ(34,"small"),t._uU(35,"(C) C=A+B"),t.qZA()(),t.TgZ(36,"th",42),t._uU(37,"Consommation mensuelle du mois "),t.TgZ(38,"small"),t._uU(39,"(D)"),t.qZA()(),t.TgZ(40,"th",42),t._uU(41,"Quantit\xe9 th\xe9orique disponible \xe0 l'inventaire "),t.TgZ(42,"small"),t._uU(43,"E= C-D"),t.qZA()(),t.TgZ(44,"th",42),t._uU(45,"Quantit\xe9 compt\xe9e \xe0 l'inventaire "),t.TgZ(46,"small"),t._uU(47,"(F)"),t.qZA()(),t.TgZ(48,"th",42),t._uU(49,"Ecart d'inventaire "),t.TgZ(50,"small"),t._uU(51,"J = F-E"),t.qZA()(),t.TgZ(52,"th",42),t._uU(53,"CMM de l'ann\xe9e N-1 "),t.TgZ(54,"small"),t._uU(55,"(G)"),t.qZA(),t.TgZ(56,"i",43),t.NdJ("click",function(){const o=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.editCmmClick(o))}),t.qZA()(),t.TgZ(57,"th",42),t._uU(58,"Quantit\xe9 th\xe9orique \xe0 commander "),t.TgZ(59,"small"),t._uU(60,"(H)"),t.qZA(),t.TgZ(61,"i",43),t.NdJ("click",function(){const o=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.editTheoreticalQtyOrderClick(o))}),t.qZA()(),t.TgZ(62,"th",42),t._uU(63,"Quantit\xe9s \xe0 commander "),t._UZ(64,"br"),t.TgZ(65,"small")(66,"small"),t._uU(67,"(Expression besoins ASC)"),t.qZA(),t._uU(68,"(I)"),t.qZA()(),t.TgZ(69,"th",42),t._uU(70,"Quantit\xe9 valid\xe9e "),t.TgZ(71,"i",43),t.NdJ("click",function(){const o=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.editQtyValidatedClick(o))}),t.qZA()(),t.TgZ(72,"th",42),t._uU(73,"Quantit\xe9 livr\xe9e "),t.TgZ(74,"i",43),t.NdJ("click",function(){const o=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.editQtyDeliveredClick(o))}),t.qZA()(),t.TgZ(75,"th",42),t._uU(76,"Taux de satisfaction"),t.qZA(),t.TgZ(77,"th",44),t._uU(78,"Observation ASC"),t.qZA(),t.TgZ(79,"th",42),t._uU(80,"Observations (Pharmacie) "),t.TgZ(81,"i",43),t.NdJ("click",function(){const o=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.editObservationsClick(o))}),t.qZA()()(),t.TgZ(82,"tr",41)(83,"th"),t._uU(84,"Emprunt/Pr\xeat du mois"),t.qZA(),t.TgZ(85,"th"),t._uU(86,"Quantit\xe9 Emprunt/Pr\xeat du mois"),t.qZA(),t.TgZ(87,"th"),t._uU(88,"Nom & Code ASC"),t.qZA(),t.TgZ(89,"th"),t._uU(90,"Perte du mois"),t.qZA(),t.TgZ(91,"th"),t._uU(92,"Avari\xe9 du mois"),t.qZA(),t.TgZ(93,"th"),t._uU(94,"Cass\xe9 du mois"),t.qZA(),t.TgZ(95,"th"),t._uU(96,"P\xe9rim\xe9 du mois"),t.qZA(),t.TgZ(97,"th"),t._uU(98,"Autre du mois"),t.qZA(),t.TgZ(99,"th"),t._uU(100,"Commentaires ASC"),t.qZA()()(),t.TgZ(101,"tbody"),t.YNc(102,Zt,2,1,"ng-container",32),t.qZA()()()()(),t.YNc(103,Tt,3,0,"p",17),t.qZA()}if(2&n){const e=r.$implicit,i=r.index,a=t.oxw(2);t.xp6(1),t.MGl("id","data-info-",i,""),t.uIk("data-district",e.chw.site.district.id)("data-site",e.chw.site.id)("data-chw",e.chw.id),t.xp6(6),t.AsE("",e.chw.site.district.name," > ",e.chw.site.name," > "),t.xp6(2),t.Oqu(e.chw.name),t.xp6(1),t.hij(" ( ",e.chw.external_id," ) "),t.xp6(1),t.Q6J("ngIf","edit"!=a.editCmm[i]&&"edit"!=a.editQtyValidated[i]&&"edit"!=a.editQtyDelivered[i]&&"edit"!=a.editObservations[i]&&"edit"!=a.editTheoreticalQtyOrder[i]),t.xp6(1),t.Q6J("ngIf","edit"==a.editCmm[i]||"edit"==a.editQtyValidated[i]||"edit"==a.editQtyDelivered[i]||"edit"==a.editObservations[i]||"edit"==a.editTheoreticalQtyOrder[i]||"true"==a.isUpdateLoading[i]),t.xp6(2),t.Q6J("id","export_table"+i),t.xp6(42),t.Gre("fas ","edit"==a.editCmm[i]?"fa-times":"fa-edit",""),t.xp6(5),t.Gre("fas ","edit"==a.editTheoreticalQtyOrder[i]?"fa-times":"fa-edit",""),t.xp6(10),t.Gre("fas ","edit"==a.editQtyValidated[i]?"fa-times":"fa-edit",""),t.xp6(3),t.Gre("fas ","edit"==a.editQtyDelivered[i]?"fa-times":"fa-edit",""),t.xp6(7),t.Gre("fas ","edit"==a.editObservations[i]?"fa-times":"fa-edit",""),t.xp6(21),t.Q6J("ngForOf",a.objectKeys(e.data)),t.xp6(1),t.Q6J("ngIf",i<a.FinalChwsOutputData$.length-1)}}function yt(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Dt,104,28,"div",32),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.FinalChwsOutputData$)}}let At=(()=>{class n{constructor(e,i,a){this.auth=e,this.sync=i,this.router=a,this.roles=new L.G(this.auth),this.data_error_messages="",this.data_no_data_found=!1,this.FinalChwsOutputData$=[],this.selectedChwData=null,this.ChwsDataFromDbError="",this.Districts$=[],this.Sites$=[],this.Chws$=[],this.Months$=[],this.Years$=[],this.chw$=[],this.site$=[],this.Sources$=["Tonoudayo"],this.Forms$=["drug_movements","drug_quantities","pcime_c_asc","pregnancy_family_planning","fp_follow_up_renewal"],this.drugUpdateErrorMsg="",this.isUpdateLoading=[],this.editCmm=[],this.editQtyValidated=[],this.editQtyDelivered=[],this.editObservations=[],this.editTheoreticalQtyOrder=[],this.isNumber=o=>!isNaN(2),this.showClass=o=>this.isNumber(o)?"col-sm-6 col-6":""}createDataFilterFormGroup(){return new d.cw({month:new d.NI(this.month$.id,[d.kI.required]),year:new d.NI(this.year$,[d.kI.required]),sources:new d.NI(""),districts:new d.NI("",this.roles.isChws()?[]:[d.kI.required]),sites:new d.NI("",this.roles.isChws()?[]:[d.kI.required]),chws:new d.NI("")})}editCmmClick(e,i=!1){this.editCmm[e]=1==i?this.editCmm[e]="":"edit"==this.editCmm[e]?"":"edit"}editQtyValidatedClick(e,i=!1){this.editQtyValidated[e]=1==i?this.editQtyValidated[e]="":"edit"==this.editQtyValidated[e]?"":"edit"}editQtyDeliveredClick(e,i=!1){this.editQtyDelivered[e]=1==i?this.editQtyDelivered[e]="":"edit"==this.editQtyDelivered[e]?"":"edit"}editObservationsClick(e,i=!1){this.editObservations[e]=1==i?this.editObservations[e]="":"edit"==this.editObservations[e]?"":"edit"}editTheoreticalQtyOrderClick(e,i=!1){this.editTheoreticalQtyOrder[e]=1==i?this.editTheoreticalQtyOrder[e]="":"edit"==this.editTheoreticalQtyOrder[e]?"":"edit"}ngOnInit(){this.currentUser=this.auth.currentUser(),this.chwOU=this.currentUser?.chw_found,this.roles.isChws()&&(null==this.chwOU||!(0,l.Nf)(this.chwOU))&&this.router.navigate(["chws/select_orgunit"]),this.isLoading=!1,this.initDate=(0,P.vW)(),this.Months$=(0,l.e7)(),this.Years$=(0,l.tR)(),this.year$=(0,l.VK)(this.initDate.end_date),this.month$=(0,l.dK)(this.initDate.end_date),this.chwsDrugDataForm=this.createDataFilterFormGroup(),this.roles.isChws()?this.initDataFilted():this.initAllData()}saveOrUpdate(e,i){if(e.preventDefault(),this.FinalChwsOutputData$.length>0){this.isUpdateLoading[i]="true";const c=this.FinalChwsOutputData$[0];var a=0;const s=this.objectKeys(c.data).length;for(let u=0;u<s;u++){const _=this.getKey(this.toChwsDrugData(this.sortedArray(c.data),u).key),w=this.getLabel(this.toChwsDrugData(this.sortedArray(c.data),u).key),p=this.getDataInfo(i);if(p&&p.district&&p.site&&p.chw){const y=this.getValue(`year_cmm_${i}_${_}`),A=this.getValue(`quantity_validated_${i}_${_}`),b=this.getValue(`delivered_quantity_${i}_${_}`),q=this.getValue(`observations_${i}_${_}`),M=this.getValue(`theoretical_quantity_to_order_${i}_${_}`);y?.index!=_&&A?.index!=_&&b?.index!=_&&q?.index!=_&&M?.index!=_||this.sync.ihDrugUpdateDataPerChw({year:this.chwsDrugDataForm.value.year,month:this.chwsDrugDataForm.value.month,district:p.district,site:p.site,chw:p.chw,drug_index:_,drug_name:w,year_cmm:y?.value,quantity_validated:A?.value,delivered_quantity:b?.value,theoretical_quantity_to_order:M?.value,observations:q?.value,forms:this.Forms$,sources:this.Sources$}).subscribe(h=>{if(a+=1,200==h.status){if(a==s-1&&h.data){const Ut=this.FinalChwsOutputData$.map(v=>v.chwId==p.chw?h.data[0]:v);this.FinalChwsOutputData$=Ut.sort((v,Ot)=>v.chw.external_id.localeCompare(Ot.chw.external_id)),this.editCmmClick(i,!0),this.editQtyValidatedClick(i,!0),this.editQtyDeliveredClick(i,!0),this.editObservationsClick(i,!0),this.editTheoreticalQtyOrderClick(i,!0)}}else this.drugUpdateErrorMsg+=h.data.toString();a==s-1&&(this.isUpdateLoading[i]="false")},h=>{this.drugUpdateErrorMsg+=h.toString(),this.isUpdateLoading[i]="false"})}}}}getValue(e){const i=document.getElementById(e);if(null!=i){const a=i.dataset.drugIndex;return{value:i.value,index:a?parseInt(a):void 0}}}getDataInfo(e){const i=document.getElementById(`data-info-${e}`);if(null!=i)return{district:i.dataset.district??"",site:i.dataset.site??"",chw:i.dataset.chw??""}}showHideMsg(e){}convertQty(e){return 0==e||""==e||null==e?void 0:e}toChwsDrugData(e,i){const a=e[parseInt(i)];return{key:a[0],val:a[1]}}sortedArray(e){return Object.entries(e).sort((i,a)=>{const o=i[0].split("_"),c=a[0].split("_");return parseInt(o[o.length-1])-parseInt(c[c.length-1])})}objectKeys(e){return Object.keys(this.sortedArray(e))}getKey(e){const i=e.split("_");return parseInt(i[i.length-1])}getLabel(e){return e.split("_").slice(0,-1).join(" ")}csv(e){table2csv("data2csv",",",e)}excel(e){table2excel("data2excel",e)}pdf(e){table2pdf("data2pdf","l",e)}json(e){table2json("data2json",e)}print(e){printTable("data2print",e)}initAllData(){var e=this;return(0,f.Z)(function*(){e.isLoading=!0;const i=e.ParamsToFilter();e.initMsg="Chargement des Districts ...",e.sync.getDistrictsList(i).subscribe(function(){var a=(0,f.Z)(function*(o){200==o.status&&(e.Districts$=o.data.sort((c,s)=>c.name.localeCompare(s.name))),e.initMsg="Chargement des Sites ...",e.sync.getSitesList(i).subscribe(function(){var c=(0,f.Z)(function*(s){200==s.status&&(e.Sites$=s.data.sort((u,_)=>u.name.localeCompare(_.name))),e.genarateSites(),e.initMsg="Chargement des ASC ...",e.sync.getChwsList(i).subscribe(function(){var u=(0,f.Z)(function*(_){200==_.status&&(e.Chws$=_.data.sort((w,p)=>w.name.localeCompare(p.name))),e.genarateChws(),e.isLoading=!1});return function(_){return u.apply(this,arguments)}}(),u=>{e.isLoading=!1,console.log(u.error)})});return function(s){return c.apply(this,arguments)}}(),c=>{e.isLoading=!1,console.log(c.error)})});return function(o){return a.apply(this,arguments)}}(),a=>{e.isLoading=!1,console.log(a.error)})})()}genarateSites(){this.site$=[],this.chw$=[];const e=(0,l.Dk)(this.chwsDrugDataForm.value.districts);if(this.chwsDrugDataForm.value.sites=[],this.chwsDrugDataForm.value.chws=[],(0,l.Nf)(e))for(let i=0;i<this.Sites$.length;i++){const a=this.Sites$[i];(0,l.Nf)(a)&&e.includes(a.district.id)&&this.site$.push(a)}else this.site$=[]}genarateChws(){const e=(0,l.Dk)(this.chwsDrugDataForm.value.sites);if(this.chw$=[],this.chwsDrugDataForm.value.chws=[],(0,l.Nf)(e))for(let i=0;i<this.Chws$.length;i++){const a=this.Chws$[i];(0,l.Nf)(a)&&e.includes(a.site.id)&&this.chw$.push(a)}else this.chw$=[]}ParamsToFilter(){const e=this.chwsDrugDataForm.value.month,i=this.chwsDrugDataForm.value.year,a=this.chwsDrugDataForm.value.sources;(0,l.Nf)(a)&&(0,l.pb)(a);var c=[],s=[],u=[];this.roles.isChws()?null!=this.chwOU&&(0,l.Nf)(this.chwOU)&&(c=(0,l.pb)(this.chwOU.site.district.id),s=(0,l.pb)(this.chwOU.site.id),u=(0,l.pb)(this.chwOU.id),this.chw$=[this.chwOU]):(c=(0,l.Dk)(this.chwsDrugDataForm.value.districts),s=(0,l.Dk)(this.chwsDrugDataForm.value.sites),u=(0,l.Dk)(this.chwsDrugDataForm.value.chws));const _=(0,l.zo)(e);return{start_date:`${"12"==_?parseInt(i)-1:i}-${_}-21`,end_date:`${i}-${e}-20`,sources:this.Sources$,districts:c,sites:s,chws:u,forms:this.Forms$}}sort(e){return sortTable(e)}initDataFilted(e){this.isLoading=!0;const i=e??this.ParamsToFilter();this.defaultParams?.start_date!=i.start_date||this.defaultParams?.end_date!=i.end_date||this.defaultParams?.districts!=i.districts||this.defaultParams?.sites!=i.sites?this.sync.ihDrugDataPerChw(i).subscribe(a=>{this.response$=a,this.startTraitement(i)},a=>{this.isLoading=!1,this.ChwsDataFromDbError=a.toString()}):this.startTraitement(i)}startTraitement(e){this.isLoading=!0;const i=e??this.ParamsToFilter();200==this.response$.status?(this.FinalChwsOutputData$=this.response$.data.sort((o,c)=>o.chw.external_id.localeCompare(c.chw.external_id)),this.defaultParams=i,this.data_no_data_found=this.FinalChwsOutputData$.length<=0):(this.data_error_messages=this.response$.data.toString(),this.data_no_data_found=!0),this.isLoading=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.e),t.Y36(T._),t.Y36(C.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-chws-drug"]],decls:28,vars:11,consts:[[1,"content-header"],[1,"container-fluid"],[1,"card","card-info"],[1,"title",2,"text-align","center","color","blue"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"card-header"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],["class","col-sm-2 col-6",4,"ngIf"],[1,"col-sm-2","col-6"],[1,"form-group"],[2,"color","white"],["type","submit",1,"btn","btn-primary","form-control",3,"disabled"],[1,"fa","fa-floppy-o","fa-right"],[1,"content"],[1,"col-sm-5"],[4,"ngIf"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],["class","form-control","formControlName","month",4,"ngIf"],["formControlName","month",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","form-control","formControlName","year",4,"ngIf"],["formControlName","year",1,"form-control"],["class","form-control","formControlName","districts",3,"multiple","change",4,"ngIf"],["formControlName","districts",1,"form-control",3,"multiple","change"],["formControlName","sites",1,"form-control",3,"multiple","change"],["formControlName","chws",1,"form-control",3,"multiple"],[1,"card-body"],[4,"ngFor","ngForOf"],[3,"id"],["novalidate","",3,"submit"],[1,"card"],[1,"card-title"],[1,"chw-info",2,"color","blue","font-size","20px"],["class","submit","type","submit","class","submit-btn btn btn-warning",3,"disabled",4,"ngIf"],[2,"overflow-x","scroll!important"],[1,"table","table-sm","table-striped",2,"margin","auto",3,"id"],[1,"bg-info","head-elem"],["rowspan","2"],[3,"click"],["colspan","9"],["type","submit",1,"submit-btn","btn","btn-warning",3,"disabled"],["style","margin-right: 20px!important;","class","fas fa-1x fa-sync-alt fa-spin",4,"ngIf"],[1,"fas","fa-1x","fa-sync-alt","fa-spin",2,"margin-right","20px!important"],[1,"ajust-cells"],["class","custom-input form-control","type","number",3,"disabled","id","value",4,"ngIf"],[1,"same-line"],["class","fas fa-eye",3,"click",4,"ngIf"],["class","custom-textarea form-control",3,"disabled","id","value",4,"ngIf"],["type","number",1,"custom-input","form-control",3,"disabled","id","value"],[1,"fas","fa-eye",3,"click"],[1,"custom-textarea","form-control",3,"disabled","id","value"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"Situation M\xe9dicament Des ASC"),t.qZA(),t.TgZ(5,"div",4),t.YNc(6,S,4,1,"div",5),t.TgZ(7,"div",6)(8,"form",7),t.NdJ("ngSubmit",function(){return i.initDataFilted()}),t.TgZ(9,"div",8),t.YNc(10,K,5,1,"div",9),t.YNc(11,V,5,1,"div",9),t.YNc(12,X,5,1,"div",9),t.YNc(13,tt,6,2,"div",9),t.YNc(14,it,6,2,"div",9),t.TgZ(15,"div",10)(16,"div",11)(17,"label",12),t._uU(18,"."),t.qZA(),t.TgZ(19,"button",13),t._uU(20," Charger "),t._UZ(21,"span",14),t.qZA()()()()()()()(),t.TgZ(22,"div",15)(23,"div",1)(24,"div",16),t.YNc(25,nt,4,1,"h2",17),t.YNc(26,at,4,0,"h2",17),t.qZA(),t.YNc(27,yt,2,1,"div",17),t.qZA()()()()),2&e&&(t.xp6(6),t.Q6J("ngIf",i.isLoading),t.xp6(2),t.Q6J("formGroup",i.chwsDrugDataForm),t.xp6(2),t.Q6J("ngIf",!i.roles.isChws()),t.xp6(1),t.Q6J("ngIf",!i.roles.isChws()),t.xp6(1),t.Q6J("ngIf",!i.roles.isChws()),t.xp6(1),t.Q6J("ngIf",!i.roles.isChws()),t.xp6(1),t.Q6J("ngIf",!i.roles.isChws()),t.xp6(5),t.Q6J("disabled",!i.chwsDrugDataForm.valid),t.xp6(6),t.Q6J("ngIf",""!=i.data_error_messages),t.xp6(1),t.Q6J("ngIf",1==i.data_no_data_found),t.xp6(1),t.Q6J("ngIf",""==i.data_error_messages&&i.FinalChwsOutputData$.length>0))},dependencies:[m.sg,m.O5,d._Y,d.YN,d.Kr,d.EJ,d.K7,d.JJ,d.JL,d.sg,d.u],styles:[".fa-times[_ngcontent-%COMP%]{color:red;font-size:25px}.fa-edit[_ngcontent-%COMP%]{color:orange;font-size:25px}.custom-input[_ngcontent-%COMP%]{width:90px!important;height:23px!important;margin:-2.5px 0 0!important;padding:1px!important}.custom-textarea[_ngcontent-%COMP%]{width:200px!important;height:23px!important;margin:-2.5px 0 0!important;padding:1px!important}.same-line[_ngcontent-%COMP%]{white-space:nowrap}.same-line[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .same-line[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .same-line[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.same-line[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;margin-left:2.5px}.same-line[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:130px!important;height:15px!important;overflow:hidden}.ajust-cells[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:265px!important}.ajust-cells[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:90px!important;height:0px!important}.submit-btn[_ngcontent-%COMP%]{min-width:200px!important;margin-right:20px;float:right}.card-title[_ngcontent-%COMP%]{width:100%!important}.chw-info[_ngcontent-%COMP%]{float:left!important}ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;overflow:hidden;float:right!important}li[_ngcontent-%COMP%]{background-color:#333;float:right}li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;color:#fff;text-align:center;padding:2px 5px;text-decoration:none;font-size:12px;cursor:pointer}li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#111}"]}),n})();var D=g(3514);const bt=[{path:"",redirectTo:"replacements",pathMatch:"full"},{path:"replacements",component:Y,canActivate:[D.o],data:{href:"replacements",icon:"fa fa-user",label:"Remplacants",title:"Gestion ASC Remplacantes"}},{path:"chws-drug",component:At,canActivate:[D.o],data:{href:"chws_drug",icon:"fa fa-user",label:"chws_drug",title:"Situation M\xe9dicament ASC"}}];let qt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.Bz.forChild(bt),C.Bz]}),n})(),Mt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.ez,d.UX,qt]}),n})()}}]);