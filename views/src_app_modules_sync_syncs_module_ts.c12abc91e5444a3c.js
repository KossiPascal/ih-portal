"use strict";(self.webpackChunkih_portal=self.webpackChunkih_portal||[]).push([["src_app_modules_sync_syncs_module_ts"],{7275:(_e,T,u)=>{u.r(T),u.d(T,{SyncsModule:()=>oe});var g=u(8692),b=u(3580),x=u(8968),m=u(8239),r=u(92),c=u(8629),C=u(574),t=u(4537),D=u(1383),w=u(7556),U=u(1815);function q(i,a){if(1&i&&(t.TgZ(0,"div",46),t._UZ(1,"i",47),t.TgZ(2,"div",48),t._uU(3),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(e.LoadingMsg)}}function I(i,a){if(1&i&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function S(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"select",49),t.NdJ("change",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.genarateSites(s.thinkmdToDhis2Form))}),t.YNc(1,I,2,2,"option",50),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.Districts$)}}function k(i,a){1&i&&t._UZ(0,"select",52)}function N(i,a){if(1&i&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.external_id),t.xp6(1),t.hij(" ",e.name," ")}}function F(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"select",53),t.NdJ("change",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.genarateChws(s.thinkmdToDhis2Form))}),t.YNc(1,N,2,2,"option",50),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.sites$)}}function O(i,a){1&i&&t._UZ(0,"select",52)}function E(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.tab1_messages_error," ")}}function J(i,a){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("Created: ",e.Tab1Dhis2Import.Created,"")}}function $(i,a){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("Updated: ",e.Tab1Dhis2Import.Updated,"")}}function M(i,a){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("Deleted: ",e.Tab1Dhis2Import.Deleted,"")}}function Q(i,a){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("ErrorCount: ",e.Tab1Dhis2Import.ErrorCount," ")}}function Y(i,a){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("ErrorMsg: ",e.Tab1Dhis2Import.ErrorMsg,"")}}function G(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.AsE(" ",e.key,":",e.value," ")}}function L(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" Error Found: ",e,"")}}function P(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&i){const e=a.$implicit,n=t.oxw(3);t.xp6(1),t.hij(" ",n.capitaliseData(e,"_")," ")}}function j(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e," ")}}function K(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,j,2,1,"td",36),t.qZA()),2&i){const e=a.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",n.getItemAsArray(e))}}function W(i,a){if(1&i&&(t.TgZ(0,"div",12)(1,"div",44)(2,"div",54)(3,"div",17)(4,"div",18),t._UZ(5,"table-export"),t.qZA()(),t.TgZ(6,"div",55)(7,"table",56)(8,"thead")(9,"tr"),t.YNc(10,P,2,1,"th",36),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,K,2,1,"tr",36),t.ALo(13,"keyvalue"),t.qZA()()()()()()),2&i){const e=t.oxw(2);t.xp6(10),t.Q6J("ngForOf",null==e.tab1_messages||null==e.tab1_messages.dataToSend||null==e.tab1_messages.dataToSend.Data?null:e.tab1_messages.dataToSend.Data.head),t.xp6(2),t.Q6J("ngForOf",t.lcZ(13,2,null==e.tab1_messages||null==e.tab1_messages.dataToSend||null==e.tab1_messages.dataToSend.Data?null:e.tab1_messages.dataToSend.Data.body))}}function H(i,a){if(1&i&&(t.TgZ(0,"div",46),t._UZ(1,"i",47),t.TgZ(2,"div",48),t._uU(3),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(e.LoadingMsg)}}function V(i,a){if(1&i&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function B(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"select",49),t.NdJ("change",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.genarateSites(s.ihChtToDhis2Form))}),t.YNc(1,V,2,2,"option",50),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.Districts$)}}function z(i,a){1&i&&t._UZ(0,"select",52)}function R(i,a){if(1&i&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function X(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"select",53),t.NdJ("change",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.genarateChws(s.ihChtToDhis2Form))}),t.YNc(1,R,2,2,"option",50),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.sites$)}}function tt(i,a){1&i&&t._UZ(0,"select",52)}function et(i,a){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("Created: ",e.Tab3Dhis2Import.Created,"")}}function it(i,a){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("Updated: ",e.Tab3Dhis2Import.Updated,"")}}function nt(i,a){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("Deleted: ",e.Tab3Dhis2Import.Deleted,"")}}function st(i,a){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("ErrorCount: ",e.Tab3Dhis2Import.ErrorCount," ")}}function at(i,a){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("ErrorMsg: ",e.Tab3Dhis2Import.ErrorMsg,"")}}function rt(i,a){if(1&i&&(t.TgZ(0,"h2")(1,"div",39)(2,"div",9),t._uU(3),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(3),t.hij(" ",e.tab3_error_messages," ")}}function ot(i,a){1&i&&(t.TgZ(0,"h2")(1,"div",39)(2,"div",9),t._uU(3," Pas de donn\xe9es trouv\xe9e avec les paramettres renseign\xe9s ! "),t.qZA()()())}function _t(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&i){const e=a.$implicit,n=t.oxw(3);t.xp6(1),t.hij(" ",n.capitaliseDataGiven(e.key,"_"," ")," ")}}function lt(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&i){const e=a.$implicit,n=t.oxw(4);t.xp6(1),t.Oqu(n.generateCount(e.value))}}function ct(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.YNc(3,lt,2,1,"th",36),t.ALo(4,"keyvalue"),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.chw.name),t.xp6(1),t.Q6J("ngForOf",t.lcZ(4,2,e.data))}}function dt(i,a){if(1&i&&(t.TgZ(0,"div",54)(1,"div",17)(2,"div",18),t._UZ(3,"table-export"),t.qZA()(),t.TgZ(4,"div",55)(5,"table",57)(6,"thead")(7,"th"),t._uU(8,"Nom Asc"),t.qZA(),t.YNc(9,_t,2,1,"th",36),t.ALo(10,"keyvalue"),t.qZA(),t.TgZ(11,"tbody"),t.YNc(12,ct,5,4,"tr",36),t.qZA()()()()),2&i){const e=t.oxw(2);t.xp6(9),t.Q6J("ngForOf",t.lcZ(10,2,e.tab3_messages[0].data)),t.xp6(3),t.Q6J("ngForOf",e.tab3_messages)}}function ut(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"ul",5)(3,"li",6)(4,"a",7),t._uU(5,"ThinkMd vers DHIS2 "),t.qZA()(),t.TgZ(6,"li",6)(7,"a",8),t._uU(8,"CHT vers DHIS2 "),t.qZA()()()(),t.TgZ(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13)(14,"div",14),t.YNc(15,q,4,1,"div",15),t.TgZ(16,"div",16)(17,"div",17)(18,"h3",18),t._uU(19,"Envoyer les donn\xe9es ThinkMd au Dhis2"),t.qZA()(),t.TgZ(20,"form",19),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.runThinkmdToDhis2())}),t.TgZ(21,"div",9)(22,"div",12)(23,"div",20)(24,"div",21)(25,"label"),t._uU(26,"Date de fin"),t.qZA(),t.TgZ(27,"input",22),t.NdJ("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.cleanError())}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24)(30,"div",21)(31,"label"),t._uU(32,"Use Dhis2"),t.qZA(),t.TgZ(33,"div",25),t._UZ(34,"input",26),t.TgZ(35,"label",27),t._uU(36,"Insert Into Dhis2"),t.qZA()()()()(),t.TgZ(37,"div",12)(38,"div",20)(39,"div",21)(40,"label"),t._uU(41,"District"),t.qZA(),t.YNc(42,S,2,1,"select",28),t.YNc(43,k,1,0,"select",29),t.qZA()(),t.TgZ(44,"div",20)(45,"div",21)(46,"label"),t._uU(47,"Site"),t.qZA(),t.YNc(48,F,2,1,"select",30),t.YNc(49,O,1,0,"select",29),t.qZA()()(),t._UZ(50,"br"),t.qZA(),t.TgZ(51,"div",31)(52,"button",32),t._uU(53," Charger les donn\xe9es "),t._UZ(54,"span",33),t.qZA()()()()()(),t.TgZ(55,"div",34),t.YNc(56,E,3,1,"div",35),t.YNc(57,J,2,1,"p",35),t._UZ(58,"br"),t.YNc(59,$,2,1,"p",35),t._UZ(60,"br"),t.YNc(61,M,2,1,"p",35),t._UZ(62,"br"),t.YNc(63,Q,2,1,"p",35),t._UZ(64,"br"),t.YNc(65,Y,2,1,"p",35),t._UZ(66,"br"),t.YNc(67,G,3,2,"div",36),t.ALo(68,"keyvalue"),t._uU(69),t._UZ(70,"br"),t.YNc(71,L,3,1,"div",36),t.qZA()(),t.YNc(72,W,14,4,"div",37),t.qZA(),t.TgZ(73,"div",38)(74,"div",12)(75,"div",13)(76,"div",14),t.YNc(77,H,4,1,"div",15),t.TgZ(78,"div",39)(79,"div",17)(80,"h3",18),t._uU(81,"Envoyer les donn\xe9es Tonoudayo au Dhis2"),t.qZA()(),t.TgZ(82,"form",19),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.flushIhChtDataToDhis2())}),t.TgZ(83,"div",9)(84,"div",12)(85,"div",20)(86,"div",21)(87,"label"),t._uU(88,"Date de d\xe9but"),t.qZA(),t.TgZ(89,"input",40),t.NdJ("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.cleanError())}),t.qZA()()(),t.TgZ(90,"div",20)(91,"div",21)(92,"label"),t._uU(93,"Date de fin"),t.qZA(),t.TgZ(94,"input",22),t.NdJ("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.cleanError())}),t.qZA()()()(),t.TgZ(95,"div",12)(96,"div",20)(97,"div",21)(98,"label"),t._uU(99,"District"),t.qZA(),t.YNc(100,B,2,1,"select",28),t.YNc(101,z,1,0,"select",29),t.qZA()(),t.TgZ(102,"div",20)(103,"div",21)(104,"label"),t._uU(105,"Site"),t.qZA(),t.YNc(106,X,2,1,"select",30),t.YNc(107,tt,1,0,"select",29),t.qZA()()(),t.TgZ(108,"div",12)(109,"div",20)(110,"div",21)(111,"label"),t._uU(112,"Use Dhis2"),t.qZA(),t.TgZ(113,"div",25),t._UZ(114,"input",41),t.TgZ(115,"label",42),t._uU(116,"Insert Into Dhis2"),t.qZA()()()()()(),t.TgZ(117,"div",31)(118,"button",43),t._uU(119," Charger les donn\xe9es "),t._UZ(120,"span",33),t.qZA()()()()()(),t.TgZ(121,"div",34),t.YNc(122,et,2,1,"p",35),t._UZ(123,"br"),t.YNc(124,it,2,1,"p",35),t._UZ(125,"br"),t.YNc(126,nt,2,1,"p",35),t._UZ(127,"br"),t.YNc(128,st,2,1,"p",35),t._UZ(129,"br"),t.YNc(130,at,2,1,"p",35),t._UZ(131,"br"),t.YNc(132,rt,4,1,"h2",35),t.YNc(133,ot,4,0,"h2",35),t.qZA()(),t.TgZ(134,"div",12)(135,"div",44),t.YNc(136,dt,13,4,"div",45),t.qZA()()()()()()}if(2&i){const e=t.oxw();t.xp6(15),t.Q6J("ngIf",e.loading1),t.xp6(5),t.Q6J("formGroup",e.thinkmdToDhis2Form),t.xp6(7),t.Gre("form-control ",e.endDateError(),""),t.xp6(15),t.Q6J("ngIf",e.Districts$.length>0),t.xp6(1),t.Q6J("ngIf",0==e.Districts$.length),t.xp6(5),t.Q6J("ngIf",e.sites$.length>0),t.xp6(1),t.Q6J("ngIf",0==e.sites$.length),t.xp6(3),t.Q6J("disabled",!e.thinkmdToDhis2Form.valid),t.xp6(4),t.Q6J("ngIf",null!=e.tab1_messages_error),t.xp6(1),t.Q6J("ngIf",e.Tab1Dhis2Import.Created>0),t.xp6(2),t.Q6J("ngIf",e.Tab1Dhis2Import.Updated>0),t.xp6(2),t.Q6J("ngIf",e.Tab1Dhis2Import.Deleted>0),t.xp6(2),t.Q6J("ngIf",e.Tab1Dhis2Import.ErrorCount>0),t.xp6(2),t.Q6J("ngIf",""!=e.Tab1Dhis2Import.ErrorMsg),t.xp6(2),t.Q6J("ngForOf",t.lcZ(68,41,null==e.tab1_messages||null==e.tab1_messages.dataToSend?null:e.tab1_messages.dataToSend.ErrorMsg)),t.xp6(2),t.hij(" ",null==e.tab1_messages||null==e.tab1_messages.errorToSend?null:e.tab1_messages.errorToSend.ConsoleError,""),t.xp6(2),t.Q6J("ngForOf",null==e.tab1_messages||null==e.tab1_messages.errorToSend?null:e.tab1_messages.errorToSend.ErrorData),t.xp6(1),t.Q6J("ngIf",null==e.tab1_messages||null==e.tab1_messages.dataToSend?null:e.tab1_messages.dataToSend.Data),t.xp6(5),t.Q6J("ngIf",e.loading3),t.xp6(5),t.Q6J("formGroup",e.ihChtToDhis2Form),t.xp6(7),t.Gre("form-control ",e.startDateError(),""),t.xp6(5),t.Gre("form-control ",e.endDateError(),""),t.xp6(6),t.Q6J("ngIf",e.Districts$.length>0),t.xp6(1),t.Q6J("ngIf",0==e.Districts$.length),t.xp6(5),t.Q6J("ngIf",e.sites$.length>0),t.xp6(1),t.Q6J("ngIf",0==e.sites$.length),t.xp6(11),t.Q6J("disabled",!e.ihChtToDhis2Form.valid),t.xp6(4),t.Q6J("ngIf",e.Tab3Dhis2Import.Created>0),t.xp6(2),t.Q6J("ngIf",e.Tab3Dhis2Import.Updated>0),t.xp6(2),t.Q6J("ngIf",e.Tab3Dhis2Import.Deleted>0),t.xp6(2),t.Q6J("ngIf",e.Tab3Dhis2Import.ErrorCount>0),t.xp6(2),t.Q6J("ngIf",""!=e.Tab3Dhis2Import.ErrorMsg),t.xp6(2),t.Q6J("ngIf",""!=e.tab3_error_messages),t.xp6(1),t.Q6J("ngIf",1==e.tab3_no_data_found),t.xp6(3),t.Q6J("ngIf",""==e.tab3_error_messages&&e.tab3_messages.length>0)}}function ht(i,a){if(1&i&&(t.TgZ(0,"div",46),t._UZ(1,"i",47),t.TgZ(2,"div",48),t._uU(3),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(e.LoadingMsg)}}function gt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",71),t.NdJ("click",function(){const o=t.CHM(e).$implicit,_=t.oxw(3);return t.KtG(_.removeWeekDate(o))}),t.TgZ(1,"b",72),t._uU(2),t.qZA(),t._UZ(3,"span",73),t.qZA()}if(2&i){const e=a.$implicit,n=t.oxw(3);t.xp6(2),t.Oqu(n.dateTransform(e))}}function mt(i,a){if(1&i&&(t.TgZ(0,"div",20)(1,"span",69),t._uU(2,"Dates S\xe9lection\xe9es:"),t.qZA(),t.TgZ(3,"div",12),t.YNc(4,gt,4,1,"div",70),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.weekly_Choosen_Dates)}}function pt(i,a){if(1&i&&(t.TgZ(0,"div",74)(1,"strong"),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(e.weekly_date_error_Msg)}}function ft(i,a){if(1&i&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function vt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"select",49),t.NdJ("change",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.genarateSites(s.ThinkMdWeeklyForm))}),t.YNc(1,ft,2,2,"option",50),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.Districts$)}}function bt(i,a){1&i&&t._UZ(0,"select",52)}function Zt(i,a){if(1&i&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function yt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"select",53),t.NdJ("change",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.genarateWeekyDataChws())}),t.YNc(1,Zt,2,2,"option",50),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.sites$)}}function Tt(i,a){1&i&&t._UZ(0,"select",52)}function xt(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.tab4_messages_error," ")}}function Ct(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.AsE(" ",e.key,":",e.value," ")}}function Dt(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" Error Found: ",e,"")}}function wt(i,a){1&i&&(t.TgZ(0,"div"),t._uU(1," Pas d'erreur rencontr\xe9 lors de la r\xe9cup\xe9ration des donn\xe9es sur le serveur! "),t.qZA())}function Ut(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",75),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.initTable("weekly_thinkMd_datatable"))}),t._uU(1,"G\xe9n\xe9rer Table"),t.qZA()}}function At(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&i){const e=a.$implicit,n=t.oxw(2);t.xp6(1),t.hij(" ",n.capitaliseData(e,"_")," ")}}function qt(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit,n=t.oxw(3);t.Tol(n.genarateColor(e)),t.xp6(1),t.hij(" ",e," ")}}function It(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,qt,2,4,"td",76),t.qZA()),2&i){const e=a.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.getItemAsArray(e))}}function St(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"ul",5)(3,"li",6)(4,"a",58),t._uU(5,"Chws Week Data "),t.qZA()()()(),t.TgZ(6,"div",9)(7,"div",10)(8,"div",59)(9,"div",12)(10,"div",60)(11,"div",14),t.YNc(12,ht,4,1,"div",15),t.TgZ(13,"div",61)(14,"div",17)(15,"h3",18),t._uU(16,"ThinkMd Donn\xe9es ASC par semaine"),t.qZA()(),t.TgZ(17,"form",19),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.runThinkMdWeekly())}),t.TgZ(18,"div",9)(19,"div",12)(20,"div",34)(21,"div",21)(22,"label"),t._uU(23,"Selectionner les dates souhait\xe9es. "),t._UZ(24,"br"),t.TgZ(25,"small")(26,"b"),t._uU(27,"Toujours choisir les dates des Lundis de semaine"),t.qZA()()(),t.TgZ(28,"input",62),t.NdJ("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.addToDateList())}),t.qZA()()(),t._UZ(29,"div",63),t.YNc(30,mt,5,1,"div",64),t.YNc(31,pt,3,1,"div",65),t.qZA(),t._UZ(32,"br"),t.TgZ(33,"div",12)(34,"div",20)(35,"div",21)(36,"label"),t._uU(37,"District"),t.qZA(),t.YNc(38,vt,2,1,"select",28),t.YNc(39,bt,1,0,"select",29),t.qZA()(),t.TgZ(40,"div",20)(41,"div",21)(42,"label"),t._uU(43,"Site"),t.qZA(),t.YNc(44,yt,2,1,"select",30),t.YNc(45,Tt,1,0,"select",29),t.qZA()()()(),t.TgZ(46,"div",31)(47,"button",66),t._uU(48," Charger les donn\xe9es "),t._UZ(49,"span",33),t.qZA()()()()()(),t.TgZ(50,"div",24),t.YNc(51,xt,3,1,"div",35),t.YNc(52,Ct,3,2,"div",36),t.ALo(53,"keyvalue"),t._uU(54),t._UZ(55,"br"),t.YNc(56,Dt,3,1,"div",36),t.YNc(57,wt,2,0,"div",35),t.qZA(),t.TgZ(58,"div",44),t.YNc(59,Ut,2,0,"button",67),t.TgZ(60,"table",68)(61,"thead")(62,"tr"),t.YNc(63,At,2,1,"th",36),t.qZA()(),t.TgZ(64,"tbody"),t.YNc(65,It,2,1,"tr",36),t.ALo(66,"keyvalue"),t.qZA()()()()()()()()}if(2&i){const e=t.oxw();t.xp6(12),t.Q6J("ngIf",e.loading4),t.xp6(5),t.Q6J("formGroup",e.ThinkMdWeeklyForm),t.xp6(13),t.Q6J("ngIf",e.weekly_Choosen_Dates.length>0),t.xp6(1),t.Q6J("ngIf",e.is_weekly_date_error),t.xp6(7),t.Q6J("ngIf",e.Districts$.length>0),t.xp6(1),t.Q6J("ngIf",0==e.Districts$.length),t.xp6(5),t.Q6J("ngIf",e.sites$.length>0),t.xp6(1),t.Q6J("ngIf",0==e.sites$.length),t.xp6(2),t.Q6J("disabled",!e.ThinkMdWeeklyForm.valid),t.xp6(4),t.Q6J("ngIf",null!=e.tab4_messages_error),t.xp6(1),t.Q6J("ngForOf",t.lcZ(53,17,null==e.tab4_messages||null==e.tab4_messages.dataToSend?null:e.tab4_messages.dataToSend.ErrorMsg)),t.xp6(2),t.hij(" ",null==e.tab4_messages||null==e.tab4_messages.errorToSend?null:e.tab4_messages.errorToSend.ConsoleError,""),t.xp6(2),t.Q6J("ngForOf",null==e.tab4_messages||null==e.tab4_messages.errorToSend?null:e.tab4_messages.errorToSend.ErrorData),t.xp6(1),t.Q6J("ngIf","true"==(null==e.tab4_messages||null==e.tab4_messages.dataToSend?null:e.tab4_messages.dataToSend.success)),t.xp6(2),t.Q6J("ngIf",e.roles.isDataManager()),t.xp6(4),t.Q6J("ngForOf",null==e.tab4_messages||null==e.tab4_messages.dataToSend||null==e.tab4_messages.dataToSend.Data?null:e.tab4_messages.dataToSend.Data.head),t.xp6(2),t.Q6J("ngForOf",t.lcZ(66,19,null==e.tab4_messages||null==e.tab4_messages.dataToSend||null==e.tab4_messages.dataToSend.Data?null:e.tab4_messages.dataToSend.Data.body))}}let kt=(()=>{class i{constructor(e,n,s,o){this.store=e,this.auth=n,this.route=s,this.sync=o,this.tab1_messages=null,this.tab1_messages_error=null,this.tab3_messages=[],this.tab3_error_messages="",this.tab3_no_data_found=!1,this.tab4_messages=null,this.tab4_messages_error=null,this.dates=[],this.weekly_Choosen_Dates=[],this.is_weekly_date_error=!1,this.weekly_date_error_Msg="",this.activePage="",this.loading1=!1,this.loading3=!1,this.loading4=!1,this.start_date_error=!1,this.end_date_error=!1,this.LoadingMsg="Loading...",this.Districts$=[],this.Sites$=[],this.Chws$=[],this.Dhis2Chws$=[],this.chws$=[],this.sites$=[],this.dhis2Chws$=[],this.Tab1Dhis2Import={ErrorCount:0,ErrorMsg:"",Created:0,Updated:0,Deleted:0},this.Tab3Dhis2Import={ErrorCount:0,ErrorMsg:"",Created:0,Updated:0,Deleted:0},this.roles=new C.G7(this.store),this.isSelected=_=>this.dates.find(l=>l.isSame(_))?"selected":"notSelected",this.roles.hasNoAccess()&&this.auth.logout()}ngOnInit(){this.initDate=c.ED.startEnd21and20Date(),this.route.params.subscribe(e=>this.activePage=e.cible),("dataToDhis2"===this.activePage&&!this.roles.isDataManager()||"weeklyData"===this.activePage&&!this.roles.isSupervisorMentor())&&(location.href=this.auth.userValue()?.defaultRedirectUrl??""),this.initAllData(),this.thinkmdToDhis2Form=this.createThinkmdFormGroup(),this.ihChtToDhis2Form=this.createIhChtFormGroup(),this.ThinkMdWeeklyForm=this.createThinkmdWeeklyFormGroup()}generateCount(e){const s=e.tonoudayo+e.dhis2;return isNaN(s)?e:s}createThinkmdWeeklyFormGroup(){return new r.cw({start_date:new r.NI("",[r.kI.required,r.kI.minLength(7)]),useToken:new r.NI(!0),InsertIntoDhis2:new r.NI(!1,[]),districts:new r.NI("",[r.kI.required]),sites:new r.NI("",[r.kI.required])})}createDhis2ChwsDataFormGroup(){return new r.cw({start_date:new r.NI(this.initDate.start_date,[r.kI.required,r.kI.minLength(7)]),end_date:new r.NI(this.initDate.end_date,[r.kI.required,r.kI.minLength(7)]),sites:new r.NI("")})}createThinkmdFormGroup(){return new r.cw({end_date:new r.NI(this.initDate.end_date,[r.kI.required,r.kI.minLength(7)]),weekly_Choosen_Dates:new r.NI(""),useToken:new r.NI(!0),InsertIntoDhis2:new r.NI(!1,[]),districts:new r.NI("",[r.kI.required]),sites:new r.NI("",[r.kI.required])})}getSiteById(e){for(let n=0;n<this.Sites$.length;n++){const s=this.Sites$[n];if(e==s.id)return s}return null}createIhChtFormGroup(){return new r.cw({start_date:new r.NI(this.initDate.start_date,[r.kI.required,r.kI.minLength(7)]),end_date:new r.NI(this.initDate.end_date,[r.kI.required,r.kI.minLength(7)]),districts:new r.NI("",[r.kI.required]),sites:new r.NI("",[r.kI.required]),InsertIntoDhis2:new r.NI(!1,[])})}capitaliseDataGiven(e,n,s){return c.FI.capitaliseDataGiven(e,n,s)}initAllData(){var e=this;return(0,m.Z)(function*(){e.loading3=!0,e.LoadingMsg="Chargement des Districts ...",e.sync.getDistrictsList().subscribe(function(){var n=(0,m.Z)(function*(s){200==s.status&&(e.Districts$=s.data),e.LoadingMsg="Chargement des Sites ...",e.sync.getSitesList().subscribe(function(){var o=(0,m.Z)(function*(_){200==_.status&&(e.Sites$=_.data),e.genarateSites(e.ihChtToDhis2Form),e.LoadingMsg="Chargement des ASC ...",e.sync.getChwsList().subscribe(function(){var l=(0,m.Z)(function*(h){200==h.status&&(e.Chws$=h.data),e.genarateChws(e.ihChtToDhis2Form);for(let Z=0;Z<e.Chws$.length;Z++){const y=e.Chws$[Z];var v=`${y.name}`.replace("'","`").toString().replace("\u2019","`").replace("\u2019","`").replace("'","`");e.Dhis2Chws$.push({code:y.external_id,name:v,siteId:y.site.id})}e.genarateWeekyDataChws(),e.loading3=!1,e.LoadingMsg=""});return function(h){return l.apply(this,arguments)}}(),l=>{e.loading3=!1,console.log(l.error)})});return function(_){return o.apply(this,arguments)}}(),o=>{e.loading3=!1,console.log(o.error)})});return function(s){return n.apply(this,arguments)}}())})()}genarateSites(e){this.sites$=[],this.chws$=[];const n=c.FI.returnEmptyArrayIfNul(e.value.districts);if(e.value.sites="",e.value.chws=[],(0,c.Nf)(n))for(let s=0;s<this.Sites$.length;s++){const o=this.Sites$[s];(0,c.Nf)(o)&&n.includes(o.district.id)&&this.sites$.push(o)}else this.sites$=[]}getExternalIdByName(e){for(let n=0;n<this.Chws$.length;n++){const s=this.Chws$[n];if(e==s.name)return s.external_id}return e}genarateChws(e){const n=c.FI.returnEmptyArrayIfNul(e.value.sites);if(this.chws$=[],e.value.chws=[],(0,c.Nf)(n))for(let s=0;s<this.Chws$.length;s++){const o=this.Chws$[s];(0,c.Nf)(o)&&n.includes(o.site.id)&&this.chws$.push(o)}else this.chws$=[]}genarateWeekyDataChws(){const e=c.FI.returnEmptyArrayIfNul(this.ThinkMdWeeklyForm.value.sites);if(this.dhis2Chws$=[],(0,c.Nf)(e))for(let n=0;n<this.Dhis2Chws$.length;n++){const s=this.Dhis2Chws$[n];(0,c.Nf)(s)&&e.includes(s.siteId)&&this.dhis2Chws$.push(s)}else this.dhis2Chws$=this.Dhis2Chws$}ParamsToFilter(){return{start_date:this.ihChtToDhis2Form.value.start_date,end_date:this.ihChtToDhis2Form.value.end_date,sources:["Tonoudayo"],districts:c.FI.returnEmptyArrayIfNul(this.ihChtToDhis2Form.value.districts),sites:c.FI.returnEmptyArrayIfNul(this.ihChtToDhis2Form.value.sites),InsertIntoDhis2:this.ihChtToDhis2Form.value.InsertIntoDhis2}}isValidParams(e,n){if(null!=e){const s=e.value;if(null!=s){const o=s.start_date,_=s.end_date,l=c.ED.isDayInDate(o,21),h=c.ED.isDayInDate(_,20),d=c.ED.daysDiff(o,_);if(1==s.InsertIntoDhis2&&"cht"==n)return d>31?(this.start_date_error=!0,this.end_date_error=!0):(this.start_date_error=!l,this.end_date_error=!h),l&&h&&d<=31;if("thinkMd"==n)return this.end_date_error=!h,h}}return!0}startDateError(){return this.start_date_error?"borderError":""}endDateError(){return this.end_date_error?"borderError":""}cleanError(){this.start_date_error=!1,this.end_date_error=!1}cleanWeeklyDateError(){this.is_weekly_date_error=!1,this.weekly_date_error_Msg=""}WeeklyDateIsValid(){var e=0;for(let n=0;n<this.weekly_Choosen_Dates.length;n++){const s=this.weekly_Choosen_Dates[n];c.ED.getMondays(s).includes(s)||e++}return 0==e}genarateColor(e){if(c.FI.isNumber(e)){const n=parseInt(e);return n<=5?"danger":n>5&&n<=30?"warning":n>30&&n<40?"infos":"good"}return""}removeWeekDate(e){const n=this.weekly_Choosen_Dates.indexOf(e);this.weekly_Choosen_Dates.splice(n,1)}runThinkmdToDhis2(){this.isValidParams(this.thinkmdToDhis2Form,"thinkMd")&&(this.start_date_error=!1,this.loading1=!0,this.tab1_messages=null,this.tab1_messages_error=null,this.Tab1Dhis2Import={ErrorCount:0,ErrorMsg:"",Created:0,Updated:0,Deleted:0},this.sync.thinkmdToDhis2Script(this.thinkmdToDhis2Form.value).subscribe(e=>{try{var n=e;if(1==this.thinkmdToDhis2Form.value.InsertIntoDhis2&&n?.DataFordhis2){var s=0,o=0;for(let l=0;l<n?.DataFordhis2.length;l++){s++;var _=n?.DataFordhis2[l];_.orgUnit=this.getExternalIdByName(_.orgUnit),this.sync.insertOrUpdateDhis2Data(_).subscribe(d=>{o++,200==d.status?("Created"==d.data&&(this.Tab1Dhis2Import.Created+=1),"Updated"==d.data&&(this.Tab1Dhis2Import.Updated+=1),"Deleted"==d.data&&(this.Tab1Dhis2Import.Deleted+=1)):("ErrorCount"==d.data&&(this.Tab1Dhis2Import.ErrorCount+=1),"ErrorMsg"==d.data&&(this.Tab1Dhis2Import.ErrorMsg+=1)),s==o&&(this.tab1_messages=n,this.loading1=!1)},d=>{this.loading1=!1,this.tab1_messages_error=d.toString(),console.log(d.error)})}}else this.tab1_messages=n,this.loading1=!1}catch{this.loading1=!1,this.tab1_messages_error=e.toString()}},e=>{this.loading1=!1,this.tab1_messages_error=e.toString(),console.log(e.error)}))}flushIhChtDataToDhis2(){this.isValidParams(this.ihChtToDhis2Form,"cht")&&(this.start_date_error=!1,this.end_date_error=!1,this.loading3=!0,this.tab3_messages=[],this.tab3_error_messages="",this.tab3_no_data_found=!1,this.Tab3Dhis2Import={ErrorCount:0,ErrorMsg:"",Created:0,Updated:0,Deleted:0},this.sync.ihChtDataPerChw(this.ParamsToFilter()).subscribe(e=>{if(200==e.status){var n=e.data;try{if(1==this.ihChtToDhis2Form.value.InsertIntoDhis2&&n.length>0){var s=0,o=0;for(let _=0;_<n.length;_++)s++,this.sync.insertOrUpdateDhis2Data(n[_].data).subscribe(l=>{o++,200==l.status?("Created"==l.data&&(this.Tab3Dhis2Import.Created+=1),"Updated"==l.data&&(this.Tab3Dhis2Import.Updated+=1),"Deleted"==l.data&&(this.Tab3Dhis2Import.Deleted+=1)):("ErrorCount"==l.data&&(this.Tab3Dhis2Import.ErrorCount+=1),"ErrorMsg"==l.data&&(this.Tab3Dhis2Import.ErrorMsg+="\n\n"+l.data)),s==o&&(this.loading3=!1,this.tab3_messages=n,this.tab3_no_data_found=n.length<=0)},l=>{this.loading3=!1,this.tab3_error_messages=l.toString(),console.log(l.error)})}else this.loading3=!1,this.tab3_messages=n,this.tab3_no_data_found=n.length<=0}catch{this.loading3=!1,this.tab3_no_data_found=!0,this.tab3_error_messages=e.data.toString()}}else this.loading3=!1,this.tab3_no_data_found=!0,this.tab3_error_messages=e.data.toString()},e=>{this.tab3_no_data_found=!1,this.loading3=!1,this.tab3_error_messages=e.toString()}))}runThinkMdWeekly(){this.dhis2Chws$.length>0?(this.addToDateList(),this.weekly_Choosen_Dates.length>1&&this.WeeklyDateIsValid()?(this.is_weekly_date_error=!1,this.weekly_date_error_Msg="",this.loading4=!0,this.tab4_messages=null,this.tab4_messages_error=null,this.ThinkMdWeeklyForm.value.chws=this.dhis2Chws$,this.sync.syncThinkMdWeeklyChwsData(this.ThinkMdWeeklyForm.value).subscribe(e=>{this.loading4=!1;try{this.tab4_messages=JSON.parse(e)}catch{this.tab4_messages_error=e.toString()}},e=>{this.loading4=!1,this.tab4_messages_error=e.toString(),console.log(e.error)})):(this.is_weekly_date_error=!0,this.weekly_Choosen_Dates.length<=1?this.weekly_date_error_Msg="Vous devez choisir au moins 2 dates":this.WeeklyDateIsValid()||(this.weekly_date_error_Msg="Toutes les dates doivent \xeatre un Lundi de la semaine"))):this.tab4_messages_error="Impossible de r\xe9cup\xe9rer les donn\xe9es du dhis2! Veuillez rafraichir la page et r\xe9\xe9ssayer!"}dateTransform(e){return c.ED.getDateInFormat(e,0,"fr")}remove(e,n){for(var s=e.indexOf(n);-1!==s;)e.splice(s,1),s=e.indexOf(n);return e}getValue(e,n){return e[n.pop()]}addToDateList(){const e=this.ThinkMdWeeklyForm.value.start_date;!this.weekly_Choosen_Dates.includes(e)&&null!=e&&""!=e&&this.weekly_Choosen_Dates.push(e),this.ThinkMdWeeklyForm.value.start_date="",this.ThinkMdWeeklyForm.value.end_date="",this.ThinkMdWeeklyForm.value.weekly_Choosen_Dates=this.weekly_Choosen_Dates,this.cleanWeeklyDateError()}renameKeyIfFoundInObject(e,n,s){try{Object.keys(e).includes(n)&&(e[s]=e[n],delete e[n])}catch{}return e}getKeyPath(e,n){return""!=e?e+"."+n:n}listatts(e,n){var s=[];if(!("object"!=typeof(n=this.renameKeyIfFoundInObject(n,"length","_length"))||null==n||n.length>0)){for(var o in n){const l=this.getKeyPath(e,o);if(Object.prototype.hasOwnProperty.call(n,o)){let h=this.listatts(l,n[o]);if(null!=h&&h.length>0)s=[...s,...h];else{let d=l.split("."),p=this.getValue(n,d);if(Array.isArray(p)){var _=[];p.forEach(f=>{if("string"==typeof f)_.push(`"${f}"`);else{let v=this.listatts(l,f);null!=v&&v.length>0&&(s=[...s,...v])}}),_.length>0&&s.push(`"${l}" : [${_}]`)}else s.push(`"${l}" : "${p}"`)}}}return s}}writeContents(e,n,s){var o=document.createElement("a"),_=new Blob([e],{type:s});o.href=URL.createObjectURL(_),o.download=n,o.click()}isObject(e){return null!=e&&e.constructor==Object}testJson(){const s=this.listatts("",{_id:"d1a1ab15-d49f-4dbd-902f-7a9439e39f9f",_rev:"2-8db714ee4d3c9aba5dcb8015d62caa91",form:"pcime_c_asc",from:"00228 93 22 32 66",type:"data_record",fields:{MAM:"false",meta:{instanceID:"uuid:0f9f00e8-ea59-4dce-91fe-53ad5ea9b681"},inputs:{meta:{location:{lat:"",long:"",error:"",message:""},deprecatedID:""},source:"contact",contact:{_id:"412133d8-88fa-4fca-af79-c4ba264d9ebf",sex:"male",name:"Kezeri abourasakou",date_of_birth:"2018-05-25"},source_id:""},s_fever:{n_congrats:"",n_conduct_mrdt:"",s_frequent_fever:"yes",s_fever_warm_body:"yes",s_fever_child_since:"3",n_fever_evaluation_note:"",s_fever_child_sleep_net:"yes",s_fever_child_TDR_result:"positive"},referral:"true",has_fever:"true",beyond_72h:"false",high_fever:"false",next_visit:"30856607",patient_id:"412133d8-88fa-4fca-af79-c4ba264d9ebf",s_constant:{s_use_scale:"",s_constant_child_weight:"15",s_note_child_temparature:"",s_constant_child_temperature:"39.4",s_constant_child_brachial_perimeter:"172"},s_diarrhea:{s_diarrhea_child_has:"no",n_diarrhea_evaluation_note:""},within_24h:"false",within_48h:"true",within_72h:"false",group_review:{fever:{r_fever:"",r_uncomplicated_give_advices:""},submit:"",followup:"",r_summary:"",r_symptoms:"",r_refer_USP:"",r_patient_id:"",r_danger_signs:"",r_malaria_sign:"",r_patient_info:"",r_accompany_USP:"",r_malaria_fever:"",r_no_malnutrition:"",r_diagnosis_treatment:"",s_have_you_refer_child:"yes",r_pre_tranfer_treatement:{r_drink_water:"",r_continue_suckle:"",r_lumartemcoartem:"",r_dose_paracetamol:"",r_no_oral_ingestion:"",r_refer_USP_immediatly:"",r_pre_tranfer_treatement_1:""},r_refer_USP_danger_signs:"",r_paludial_fever_treatment:{r_paludial_paracetamol:"",r_paludial_paracetamol_one:"",r_paludial_fever_treatment_1:"",r_paludial_fever_treatment_lumartem_coartem:"",r_paludial_fever_treatment_lumartem_coartem_2:""},r_accompany_USP_danger_signs:"",r_danger_signs_child_throwup:"",r_danger_signs_urine_cocacola:"",r_danger_signs_child_cannot_drink:"",r_followup_next_visit_any_referral:""},has_diarrhea:"false",patient_name:"Kezeri abourasakou",s_cough_cold:{s_cough_cold_has_cough_cold:"no",n_cough_cold_evaluation_note:""},accompaniment:"true",has_pneumonia:"false",has_cough_cold:"false",patient_sex_en:"Male",patient_sex_fr:"Homme",referral_fever:"true",referral_mucus:"false",s_danger_signs:{has_danger_sign:"true",s_danger_signs_note:{s_danger_signs_note_child:"",s_danger_signs_blood_stools:"no",s_danger_signs_child_throwup:"yes",s_danger_signs_urine_cocacola:"yes",s_danger_signs_child_convulsion:"no",s_danger_signs_child_often_sick:"no",s_danger_signs_diarrhea_more_14:"no",s_danger_signs_child_cannot_drink:"yes"},has_accompaniment_ds:"true",s_danger_signs_observe:{n_danger_signs_exist:"",s_danger_signs_child_anemia:"no",s_danger_signs_child_slimming:"no",s_danger_signs_child_convulsing:"no",s_danger_signs_child_unconscious:"no",s_danger_signs_child_difficulty_breathing:"no"},s_danger_signs_child_research:{s_danger_signs_edema:"no",s_danger_signs_rashes:"no",s_danger_signs_fontanelle:"no",s_danger_signs_dehydration:"no",n_danger_signs_child_present:"",s_danger_signs_neck_stiffness:"no"},s_danger_signs_continue_survey:"yes"},MAS_complicated:"false",assessment_time:{s_assessment_time:"c_assessment_time_1"},no_malnutrition:"true",has_malnutrition:"false",show_car_advices:"true",MAS_uncomplicated:"false",beginning_illness:{s_begining_illness:"morning_day_before_yesterday"},non_malaria_fever:"false",referral_diarrhea:"false",s_vaccinal_status:{s_one_day:{s_vaccinal_status_BCG:"yes",s_vaccinal_status_VPO_0:"yes"},s_six_weeks:{s_vaccinal_status_VPO_1:"yes",s_vaccinal_status_DTC_B1:"yes",s_vaccinal_status_rota_1:"yes",s_vaccinal_status_pneumo_1:"yes"},s_ten_weeks:{s_vaccinal_status_VPO_2:"yes",s_vaccinal_status_DTC_B2:"yes",s_vaccinal_status_rota_2:"yes",s_vaccinal_status_pneumo_2:"yes"},s_nine_months:{s_vaccinal_status_VAA:"yes",s_vaccinal_status_VAR:"yes",s_vaccinal_status_vit_A:"yes"},s_forteen_weeks:{s_vaccinal_status_VPO_3:"yes",s_vaccinal_status_DTC_B3:"yes",s_vaccinal_status_rota_3:"yes",s_vaccinal_status_pneumo_3:"yes"},s_health_issues:{s_other_health_issues:"no"}},fever_with_malaria:"true",has_simple_malaria:"true",fever_with_diarrhea:"false",patient_age_display:"4 years and 1 month old",patient_age_in_days:"1507",referral_cough_cold:"false",s_drug_administered:{s_para:"paracetamol_500",other_drug:"",s_lumartem:"yes",n_drug_administered_tablet_type:""},s_nutritional_state:{n_nutritional_state_branchial_perimeter:""},patient_age_in_years:"4",diarrhea_with_malaria:"false",patient_age_in_months:"49",referral_danger_signs:"true",patient_age_display_fr:"4 ans et 1 mois",referral_missed_vaccine:"false",referral_MAS_complicated:"false",show_nutritional_advices:"true"},contact:{_id:"4e6fb542-a057-489d-86da-b19f062e0da3",parent:{_id:"60867fb9-1202-4c43-9a44-a314ac1009a1",parent:{_id:"5827654a-1c65-4aa3-a917-c83f294d965e"}}},sent_by:"Skon Toba",geolocation:{speed:.7175227999687195,heading:167,accuracy:6.699999809265137,altitude:232.07999959647987,latitude:9.6057433,longitude:1.0205783,altitudeAccuracy:null},_attachments:{content:{stub:!0,digest:"md5-q/AHW2DGudmdiQlHXlPdSw==",length:10945,revpos:1,content_type:"application/xml"}},content_type:"xml",hidden_fields:["meta","nano","mobo",{toto:{tttttttttttt:"ttttttttttttt"}}],reported_date:1657434950915,geolocation_log:[{recording:{speed:.7175227999687195,heading:167,accuracy:6.699999809265137,altitude:232.07999959647987,latitude:9.6057433,longitude:1.0205783,altitudeAccuracy:null},timestamp:1657434953883}]});for(const[o,_]of Object.entries(JSON.parse(`{${s}}`)))console.log(`${o}: ${_}`);this.writeContents(`[{${s}}]`,"./result.json","json")}genarateDataAsTable(e){return null!=e&&null!=e&&(Object.keys(e),Object.values(e)),""}capitaliseData(e,n=" ",s=" "){return c.FI.capitaliseDataGiven(e,n,s)}getItemAsArray(e){return e.value}initTable(e){initDataTable(e)}select(e,n){const s=this.dates.findIndex(o=>o.isSame(e));s<0?this.dates.push(e):this.dates.splice(s,1),n.updateTodaysDate()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(D.u),t.Y36(w.e),t.Y36(b.gz),t.Y36(U._))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sync"]],decls:4,vars:2,consts:[[1,"page-content-wrap"],[1,"col-12","col-sm-12"],["class","card card-warning card-tabs",4,"ngIf"],[1,"card","card-warning","card-tabs"],[1,"card-header","p-0","pt-1"],["id","custom-tabs-one-tab","role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["id","custom-tabs-one-thinkmd-tab","data-toggle","pill","href","#custom-tabs-one-thinkmd","role","tab","aria-controls","custom-tabs-one-thinkmd","aria-selected","true",1,"nav-link","active"],["id","custom-tabs-one-cht-tab","data-toggle","pill","href","#custom-tabs-one-cht","role","tab","aria-controls","custom-tabs-one-cht","aria-selected","false",1,"nav-link"],[1,"card-body"],["id","custom-tabs-one-tabContent",1,"tab-content"],["id","custom-tabs-one-thinkmd","role","tabpanel","aria-labelledby","custom-tabs-one-thinkmd-tab",1,"tab-pane","fade","show","active"],[1,"row"],[1,"col-sm-7"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"card","card-success"],[1,"card-header"],[1,"card-title"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-sm-6"],[1,"form-group"],["type","date","formControlName","end_date",3,"change"],[1,"col-sm-2"],[1,"col-sm-4"],[1,"form-check"],["id","thinkmdToDhis2","type","checkbox","formControlName","InsertIntoDhis2",1,"form-check-input"],["for","thinkmdToDhis2",1,"form-check-label"],["class","form-control","multiple","multiple","formControlName","districts",3,"change",4,"ngIf"],["class","form-control",4,"ngIf"],["class","form-control","multiple","multiple","formControlName","sites",3,"change",4,"ngIf"],[1,"card-footer"],["type","submit",1,"btn","btn-success","float-right",3,"disabled"],[1,"fa","fa-floppy-o","fa-right"],[1,"col-sm-5"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["id","custom-tabs-one-cht","role","tabpanel","aria-labelledby","custom-tabs-one-cht-tab",1,"tab-pane","fade"],[1,"card","card-info"],["type","date","formControlName","start_date",3,"change"],["id","InsertIntoDhis2","type","checkbox","formControlName","InsertIntoDhis2",1,"form-check-input"],["for","InsertIntoDhis2",1,"form-check-label"],["type","submit",1,"btn","btn-info","float-right",3,"disabled"],[1,"col-sm-12"],["class","card",4,"ngIf"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],["multiple","multiple","formControlName","districts",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-control"],["multiple","multiple","formControlName","sites",1,"form-control",3,"change"],[1,"card"],[1,"card-body",2,"overflow-y","scroll!important"],["id","thinkmd_datatable",1,"table","table-bordered","table-striped"],["id","cht_datatable",1,"table","table-bordered","table-striped"],["id","custom-tabs-chws-week-data-tab","data-toggle","pill","href","#custom-tabs-chws-week-data","role","tab","aria-controls","custom-tabs-chws-week-data","aria-selected","true",1,"nav-link","active"],["id","custom-tabs-chws-week-data","role","tabpanel","aria-labelledby","custom-tabs-chws-week-data-tab",1,"tab-pane","fade","show","active"],[1,"col-sm-8"],[1,"card","card-primary"],["type","date","formControlName","start_date",1,"form-control",3,"change"],[1,"col-sm-1"],["class","col-sm-6",4,"ngIf"],["style","color:red;",4,"ngIf"],["type","submit",1,"btn","btn-primary","float-right",3,"disabled"],["type","button",3,"click",4,"ngIf"],["id","weekly_thinkMd_datatable",1,"table","table-bordered","table-striped"],[2,"color","blueviolet"],["class","col-sm-5","style","margin: 10px 0px 10px 10px;",3,"click",4,"ngFor","ngForOf"],[1,"col-sm-5",2,"margin","10px 0px 10px 10px",3,"click"],[2,"color","blue","margin-right","10px","font-size","14px"],[1,"fas","fa-trash",2,"color","red"],[2,"color","red"],["type","button",3,"click"],[3,"class",4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,ut,137,43,"div",2),t.YNc(3,St,67,21,"div",2),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf","dataToDhis2"===n.activePage),t.xp6(1),t.Q6J("ngIf","weeklyData"===n.activePage))},dependencies:[g.sg,g.O5,r._Y,r.YN,r.Kr,r.Fj,r.Wl,r.K7,r.JJ,r.JL,r.sg,r.u,g.Nd],styles:["input[type=checkbox]:checked{filter:invert(90%) hue-rotate(45deg) brightness(1.7);height:18px;width:18px;transform:rotate(-45deg)}input[type=checkbox]{height:18px;width:18px}.form-check-label{margin-top:5px;margin-left:5px}.mat-calendar-body-cell.notSelected{background-color:#4682b4;border-radius:100%;width:50px;height:50px}.mat-calendar-body-cell.selected{background-color:red!important;border-radius:100%;width:50px;height:50px}.results{background-color:#ffebcd;min-height:100px;width:500px}.org-unit-success{padding-left:10px;color:green}.org-unit-error{padding-left:20px;color:red}.borderError{border:solid red 2px}.danger{color:red;font-weight:700}.warning{color:orange;font-weight:700}.infos{color:#8a2be2;font-weight:700}.good{font-weight:700}\n"],encapsulation:2}),i})();var Nt=u(5732);function Ft(i,a){if(1&i&&(t.TgZ(0,"div",50),t._UZ(1,"i",51),t.TgZ(2,"div",52),t._uU(3),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(e.LoadingMsg)}}function Ot(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",55),t._uU(4),t.qZA(),t.TgZ(5,"td",56),t._uU(6),t.qZA(),t.TgZ(7,"td",56),t._uU(8),t.qZA(),t.TgZ(9,"td",56),t._uU(10),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value.successCount),t.xp6(2),t.Oqu(e.value.errorCount),t.xp6(2),t.Oqu(e.value.errorIds),t.xp6(2),t.Oqu(e.value.errorElements)}}function Et(i,a){if(1&i&&(t.TgZ(0,"div",10)(1,"table",53)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"El\xe9ment"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"SuccessCount"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"ErrorsCount"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"ErrorsIds"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"ErrorsMsg"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,Ot,11,5,"tr",54),t.ALo(16,"keyvalue"),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(15),t.Q6J("ngForOf",t.lcZ(16,1,e.tab4_messages))}}function Jt(i,a){if(1&i&&(t.TgZ(0,"div",50),t._UZ(1,"i",51),t.TgZ(2,"div",52),t._uU(3),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(e.LoadingMsg)}}function $t(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",55),t._uU(4),t.qZA(),t.TgZ(5,"td",56),t._uU(6),t.qZA(),t.TgZ(7,"td",56),t._uU(8),t.qZA(),t.TgZ(9,"td",56),t._uU(10),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value.successCount),t.xp6(2),t.Oqu(e.value.errorCount),t.xp6(2),t.Oqu(e.value.errorIds),t.xp6(2),t.Oqu(e.value.errorElements)}}function Mt(i,a){if(1&i&&(t.TgZ(0,"div",10)(1,"table",53)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"El\xe9ment"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"SuccessCount"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"ErrorsCount"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"ErrorsIds"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"ErrorsMsg"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,$t,11,5,"tr",54),t.ALo(16,"keyvalue"),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(15),t.Q6J("ngForOf",t.lcZ(16,1,e.tab5_messages))}}function Qt(i,a){if(1&i&&(t.TgZ(0,"div",50),t._UZ(1,"i",51),t.TgZ(2,"div",52),t._uU(3),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(e.LoadingMsg)}}function Yt(i,a){if(1&i&&(t.TgZ(0,"option",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function Gt(i,a){if(1&i&&(t.TgZ(0,"option",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.external_id),t.xp6(1),t.hij(" ",e.name," ")}}function Lt(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",55),t._uU(4),t.qZA(),t.TgZ(5,"td",56),t._uU(6),t.qZA(),t.TgZ(7,"td",56),t._uU(8),t.qZA(),t.TgZ(9,"td",56),t._uU(10),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value.successCount),t.xp6(2),t.Oqu(e.value.errorCount),t.xp6(2),t.Oqu(e.value.errorIds),t.xp6(2),t.Oqu(e.value.errorElements)}}function Pt(i,a){if(1&i&&(t.TgZ(0,"tbody"),t.YNc(1,Lt,11,5,"tr",54),t.ALo(2,"keyvalue"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e))}}function jt(i,a){if(1&i&&(t.TgZ(0,"div",10)(1,"table",53)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"El\xe9ment"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"SuccessCount"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"ErrorsCount"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"ErrorsIds"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"ErrorsMsg"),t.qZA()()(),t.YNc(14,Pt,3,3,"tbody",54),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(14),t.Q6J("ngForOf",e.tab6_messages)}}function Kt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"ul",5)(3,"li",6)(4,"a",7),t._uU(5,"Sync OrgUnit "),t.qZA()(),t.TgZ(6,"li",6)(7,"a",8),t._uU(8,"Sync Chws Data "),t.qZA()(),t.TgZ(9,"li",6)(10,"a",9),t._uU(11,"Sync DHIS2 Chws Data "),t.qZA()()()(),t.TgZ(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15),t.YNc(18,Ft,4,1,"div",16),t.TgZ(19,"div",17)(20,"div",18)(21,"h3",19),t._uU(22,"Synchroniser OrgUnit, Patients and Chws"),t.qZA()(),t.TgZ(23,"form",20),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.syncOrgUnitsFromCouchDb())}),t.TgZ(24,"div",10)(25,"div",13)(26,"div",21)(27,"div",22)(28,"label"),t._uU(29,"Date de d\xe9but"),t.qZA(),t._UZ(30,"input",23),t.qZA()(),t.TgZ(31,"div",21)(32,"div",22)(33,"label"),t._uU(34,"Date de fin"),t.qZA(),t._UZ(35,"input",24),t.qZA()()(),t.TgZ(36,"div",13)(37,"div",25)(38,"div",22)(39,"div",26),t._UZ(40,"input",27),t.TgZ(41,"label",28),t._uU(42," District & Site"),t.qZA()()()(),t.TgZ(43,"div",25)(44,"div",22)(45,"div",26),t._UZ(46,"input",29),t.TgZ(47,"label",30),t._uU(48," Zone"),t.qZA()()()(),t.TgZ(49,"div",25)(50,"div",22)(51,"div",26),t._UZ(52,"input",31),t.TgZ(53,"label",32),t._uU(54," Family"),t.qZA()()()(),t.TgZ(55,"div",25)(56,"div",22)(57,"div",26),t._UZ(58,"input",33),t.TgZ(59,"label",34),t._uU(60," Patient"),t.qZA()()()(),t.TgZ(61,"div",25)(62,"div",22)(63,"div",26),t._UZ(64,"input",35),t.TgZ(65,"label",36),t._uU(66," Chw"),t.qZA()()()()()(),t.TgZ(67,"div",37)(68,"button",38),t._uU(69," D\xe9marrer la synchronisation "),t._UZ(70,"span",39),t.qZA()()()()()()(),t.TgZ(71,"div",13)(72,"div",14),t.YNc(73,Et,17,3,"div",40),t.qZA()()(),t.TgZ(74,"div",41)(75,"div",13)(76,"div",14)(77,"div",15),t.YNc(78,Jt,4,1,"div",16),t.TgZ(79,"div",42)(80,"div",18)(81,"h3",19),t._uU(82,"Syncroniser les donn\xe9es Tonoudayo des ASC"),t.qZA()(),t.TgZ(83,"form",20),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.syncChwsDataFromCouchDb())}),t.TgZ(84,"div",10)(85,"div",13)(86,"div",43)(87,"div",22)(88,"label"),t._uU(89,"Date de d\xe9but"),t.qZA(),t._UZ(90,"input",23),t.qZA()(),t.TgZ(91,"div",43)(92,"div",22)(93,"label"),t._uU(94,"Date de fin"),t.qZA(),t._UZ(95,"input",24),t.qZA()()()(),t.TgZ(96,"div",37)(97,"button",44),t._uU(98," Synchroniser des donn\xe9es"),t._UZ(99,"span",39),t.qZA()()()()()()(),t.TgZ(100,"div",13)(101,"div",14),t.YNc(102,Mt,17,3,"div",40),t.qZA()()(),t.TgZ(103,"div",45)(104,"div",13)(105,"div",14)(106,"div",15),t.YNc(107,Qt,4,1,"div",16),t.TgZ(108,"div",46)(109,"div",18)(110,"h3",19),t._uU(111,"Synchroniser les donn\xe9es Dhis2 des ASC"),t.qZA()(),t.TgZ(112,"form",20),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.syncChwsDataFromDhis2())}),t.TgZ(113,"div",10)(114,"div",13)(115,"div",43)(116,"div",22)(117,"label"),t._uU(118,"Date de d\xe9but"),t.qZA(),t._UZ(119,"input",23),t.qZA()(),t.TgZ(120,"div",43)(121,"div",22)(122,"label"),t._uU(123,"Date de fin"),t.qZA(),t._UZ(124,"input",24),t.qZA()()(),t.TgZ(125,"div",13)(126,"div",43)(127,"div",22)(128,"label"),t._uU(129,"District"),t.qZA(),t.TgZ(130,"select",47),t.NdJ("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.genarateSites())}),t.YNc(131,Yt,2,2,"option",48),t.qZA()()(),t.TgZ(132,"div",43)(133,"div",22)(134,"label"),t._uU(135,"Site"),t.qZA(),t.TgZ(136,"select",49),t.YNc(137,Gt,2,2,"option",48),t.qZA()()()()(),t.TgZ(138,"div",37)(139,"button",44),t._uU(140," Charger les donn\xe9es "),t._UZ(141,"span",39),t.qZA()()()()()()(),t.TgZ(142,"div",13)(143,"div",14),t.YNc(144,jt,15,1,"div",40),t.qZA()()()()()()}if(2&i){const e=t.oxw();t.xp6(18),t.Q6J("ngIf",e.loading4),t.xp6(5),t.Q6J("formGroup",e.orgUnitAndPersonForm),t.xp6(45),t.Q6J("disabled",!e.orgUnitAndPersonForm.valid),t.xp6(5),t.Q6J("ngIf",null!=e.tab4_messages),t.xp6(5),t.Q6J("ngIf",e.loading5),t.xp6(5),t.Q6J("formGroup",e.chwsDataForm),t.xp6(14),t.Q6J("disabled",!e.chwsDataForm.valid),t.xp6(5),t.Q6J("ngIf",null!=e.tab5_messages),t.xp6(5),t.Q6J("ngIf",e.loading6),t.xp6(5),t.Q6J("formGroup",e.dhis2ChwsDataForm),t.xp6(19),t.Q6J("ngForOf",e.Districts$),t.xp6(6),t.Q6J("ngForOf",e.sites$),t.xp6(2),t.Q6J("disabled",!e.dhis2ChwsDataForm.valid),t.xp6(5),t.Q6J("ngIf",e.tab6_messages.length>0)}}function Wt(i,a){if(1&i&&(t.TgZ(0,"div",50),t._UZ(1,"i",51),t.TgZ(2,"div",52),t._uU(3),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(e.LoadingMsg)}}function Ht(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",55),t._uU(4),t.qZA(),t.TgZ(5,"td",56),t._uU(6),t.qZA(),t.TgZ(7,"td",56),t._uU(8),t.qZA(),t.TgZ(9,"td",56),t._uU(10),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value.successCount),t.xp6(2),t.Oqu(e.value.errorCount),t.xp6(2),t.Oqu(e.value.errorIds),t.xp6(2),t.Oqu(e.value.errorElements)}}function Vt(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",55),t._uU(4),t.qZA(),t.TgZ(5,"td",56),t._uU(6),t.qZA(),t.TgZ(7,"td",56),t._uU(8),t.qZA(),t.TgZ(9,"td",56),t._uU(10),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value.successCount),t.xp6(2),t.Oqu(e.value.errorCount),t.xp6(2),t.Oqu(e.value.errorIds),t.xp6(2),t.Oqu(e.value.errorElements)}}function Bt(i,a){1&i&&(t.TgZ(0,"tr")(1,"th",62),t._uU(2,"Dhis2"),t.qZA()())}function zt(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",55),t._uU(4),t.qZA(),t.TgZ(5,"td",56),t._uU(6),t.qZA(),t.TgZ(7,"td",56),t._uU(8),t.qZA(),t.TgZ(9,"td",56),t._uU(10),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value.successCount),t.xp6(2),t.Oqu(e.value.errorCount),t.xp6(2),t.Oqu(e.value.errorIds),t.xp6(2),t.Oqu(e.value.errorElements)}}function Rt(i,a){if(1&i&&(t.TgZ(0,"tbody"),t.YNc(1,Bt,3,0,"tr",63),t.YNc(2,zt,11,5,"tr",54),t.ALo(3,"keyvalue"),t.qZA()),2&i){const e=a.$implicit,n=a.index;t.xp6(1),t.Q6J("ngIf",1==n),t.xp6(1),t.Q6J("ngForOf",t.lcZ(3,2,e))}}function Xt(i,a){if(1&i&&(t.TgZ(0,"tbody")(1,"tr")(2,"th",64),t._uU(3,"Error"),t.qZA()(),t.TgZ(4,"tr")(5,"td"),t._uU(6),t.qZA()()()),2&i){const e=t.oxw(3);t.xp6(6),t.Oqu(e.tab7_messages.successDetails)}}function te(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",55),t._uU(4),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value)}}function ee(i,a){if(1&i&&(t.TgZ(0,"tbody")(1,"tr")(2,"th",65),t._uU(3,"Success D\xe9tail"),t.qZA()(),t.YNc(4,te,5,2,"tr",54),t.ALo(5,"keyvalue"),t.qZA()),2&i){const e=t.oxw(3);t.xp6(4),t.Q6J("ngForOf",t.lcZ(5,1,e.tab7_messages.successDetails))}}function ie(i,a){if(1&i&&(t.TgZ(0,"div",10)(1,"table",61)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"El\xe9ment"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"SuccessCount"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"ErrorsCount"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"ErrorsIds"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"ErrorsMsg"),t.qZA()()(),t.TgZ(14,"tbody")(15,"tr")(16,"th",62),t._uU(17,"Org Units"),t.qZA()(),t.YNc(18,Ht,11,5,"tr",54),t.ALo(19,"keyvalue"),t.qZA(),t.TgZ(20,"tbody")(21,"tr")(22,"th",62),t._uU(23,"Tonoudayo"),t.qZA()(),t.YNc(24,Vt,11,5,"tr",54),t.ALo(25,"keyvalue"),t.qZA(),t.YNc(26,Rt,4,4,"tbody",54),t.YNc(27,Xt,7,1,"tbody",63),t.YNc(28,ee,6,3,"tbody",63),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(18),t.Q6J("ngForOf",t.lcZ(19,5,e.tab7_messages.orgunit)),t.xp6(6),t.Q6J("ngForOf",t.lcZ(25,7,e.tab7_messages.tonoudayo)),t.xp6(2),t.Q6J("ngForOf",e.tab7_messages.dhis2),t.xp6(1),t.Q6J("ngIf",null!=e.tab7_messages.globalError),t.xp6(1),t.Q6J("ngIf",null!=e.tab7_messages.successDetails)}}function ne(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"ul",5)(3,"li",6)(4,"a",58),t._uU(5,"Sync All (OrgUnits, Tonoudayo, Dhis2) "),t.qZA()()()(),t.TgZ(6,"div",10)(7,"div",11)(8,"div",59)(9,"div",13)(10,"div",14)(11,"div",15),t.YNc(12,Wt,4,1,"div",16),t.TgZ(13,"div",17)(14,"div",18)(15,"h3",19),t._uU(16,"Synchroniser All(OrgUnits, Tonoudayo, Dhis2) from cloud-DB to local-DB"),t.qZA()(),t.TgZ(17,"form",20),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.syncAllFromCouchToDb())}),t.TgZ(18,"div",10)(19,"div",13)(20,"div",60)(21,"div",22)(22,"label"),t._uU(23,"Date de d\xe9but"),t.qZA(),t._UZ(24,"input",23),t.qZA()(),t.TgZ(25,"div",60)(26,"div",22)(27,"label"),t._uU(28,"Date de fin"),t.qZA(),t._UZ(29,"input",24),t.qZA()()()(),t.TgZ(30,"div",37)(31,"button",38),t._uU(32," D\xe9marrer la synchronisation "),t._UZ(33,"span",39),t.qZA()()()()()()(),t.TgZ(34,"div",13)(35,"div",14),t.YNc(36,ie,29,9,"div",40),t.qZA()()()()()()}if(2&i){const e=t.oxw();t.xp6(12),t.Q6J("ngIf",e.loading7),t.xp6(5),t.Q6J("formGroup",e.syncAllForm),t.xp6(14),t.Q6J("disabled",!e.syncAllForm.valid),t.xp6(5),t.Q6J("ngIf",null!=e.tab7_messages)}}let se=(()=>{class i{constructor(e,n,s,o,_){this.store=e,this.route=n,this.sync=s,this.http=o,this.auth=_,this.tab4_messages=null,this.tab5_messages=null,this.tab6_messages=[],this.tab7_messages=null,this.dates=[],this.weekly_Choosen_Dates=[],this.is_weekly_date_error=!1,this.weekly_date_error_Msg="",this.activePage="",this.start_date_error=!1,this.end_date_error=!1,this.LoadingMsg="Loading...",this.Districts$=[],this.Sites$=[],this.sites$=[],this.roles=new C.G7(this.store),this.roles.isSuperUser()||(location.href=this.auth.userValue()?.defaultRedirectUrl??"")}ngOnInit(){var e=this;this.initDate=c.ED.startEnd21and20Date(),this.route.params.subscribe(n=>this.activePage=n.cible),this.sync.getDistrictsList().subscribe(function(){var n=(0,m.Z)(function*(s){200==s.status&&(e.Districts$=s.data,e.sync.getSitesList().subscribe(function(){var o=(0,m.Z)(function*(_){200==_.status&&(e.Sites$=_.data)});return function(_){return o.apply(this,arguments)}}(),o=>console.log(o)))});return function(s){return n.apply(this,arguments)}}(),n=>console.log(n)),this.loading4=!1,this.loading5=!1,this.loading6=!1,this.chwsDataForm=this.createChwsDataFormGroup(),this.dhis2ChwsDataForm=this.createDhis2ChwsDataFormGroup(),this.orgUnitAndPersonForm=this.createOrgUnitAndPersonFormGroup(),this.syncAllForm=this.createSyncAllFormGroup()}createSyncAllFormGroup(){return new r.cw({start_date:new r.NI(this.initDate.start_date,[r.kI.required,r.kI.minLength(7)]),end_date:new r.NI(this.initDate.end_date,[r.kI.required,r.kI.minLength(7)])})}createOrgUnitAndPersonFormGroup(){return new r.cw({start_date:new r.NI(this.initDate.start_date,[r.kI.required,r.kI.minLength(7)]),end_date:new r.NI(this.initDate.end_date,[r.kI.required,r.kI.minLength(7)]),site:new r.NI(!0,[r.kI.required]),zone:new r.NI(!0,[r.kI.required]),family:new r.NI(!0,[r.kI.required]),patient:new r.NI(!0,[r.kI.required]),chw:new r.NI(!0,[r.kI.required])})}createChwsDataFormGroup(){return new r.cw({start_date:new r.NI(this.initDate.start_date,[r.kI.required,r.kI.minLength(7)]),end_date:new r.NI(this.initDate.end_date,[r.kI.required,r.kI.minLength(7)])})}createDhis2ChwsDataFormGroup(){return new r.cw({start_date:new r.NI(this.initDate.start_date,[r.kI.required,r.kI.minLength(7)]),end_date:new r.NI(this.initDate.end_date,[r.kI.required,r.kI.minLength(7)]),districts:new r.NI("",[r.kI.required]),sites:new r.NI("",[r.kI.required])})}genarateSites(){this.sites$=[];const e=c.FI.returnEmptyArrayIfNul(this.dhis2ChwsDataForm.value.districts);if(this.dhis2ChwsDataForm.value.sites="",(0,c.Nf)(e))for(let n=0;n<this.Sites$.length;n++){const s=this.Sites$[n];(0,c.Nf)(s)&&e.includes(s.district.id)&&this.sites$.push(s)}else this.sites$=[]}getSiteById(e){for(let n=0;n<this.sites$.length;n++){const s=this.sites$[n];if(s.external_id==e)return s.name}return e}syncOrgUnitsFromCouchDb(){this.loading4=!0,this.tab4_messages=null,this.sync.syncOrgUnits(this.orgUnitAndPersonForm.value).subscribe(e=>{this.loading4=!1,this.tab4_messages=e},e=>{this.loading4=!1,this.tab4_messages=e.error})}syncChwsDataFromCouchDb(){this.loading5=!0,this.tab5_messages=null,this.sync.syncCouchDbChwsData(this.chwsDataForm.value).subscribe(e=>{this.loading5=!1,this.tab5_messages=e},e=>{this.loading5=!1,this.tab5_messages=e.error})}syncChwsDataFromDhis2(){var e=this;return(0,m.Z)(function*(){const n=c.FI.returnEmptyArrayIfNul(e.dhis2ChwsDataForm.value.sites);e.tab6_messages=[],e.loading6=!0;var s=[];for(let o=0;o<n.length;o++)yield e.sync.syncDhis2ChwsData({orgUnit:n[o],filter:[`RlquY86kI66:GE:${e.dhis2ChwsDataForm.value.start_date}:LE:${e.dhis2ChwsDataForm.value.end_date}`],fields:["event","orgUnit","orgUnitName","dataValues[dataElement,value]"]}).subscribe(_=>{e.tab6_messages.push(_),s.push("Ok"),s.length==n.length&&(e.loading6=!1)},_=>{e.loading6=!1,e.tab6_messages.push(_.error)})})()}syncAllFromCouchToDb(){this.loading7=!0,this.tab7_messages=null,this.sync.syncAll(this.syncAllForm.value).subscribe(e=>{this.loading7=!1,200==e.status?(this.tab7_messages=e.data,console.log(this.tab7_messages)):this.tab7_messages=e.data},e=>{this.loading7=!1,this.tab7_messages=e.error})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(D.u),t.Y36(b.gz),t.Y36(U._),t.Y36(Nt.eN),t.Y36(w.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sync"]],decls:4,vars:2,consts:[[1,"page-content-wrap"],[1,"col-12","col-sm-12"],["class","card card-primary card-tabs",4,"ngIf"],[1,"card","card-primary","card-tabs"],[1,"card-header","p-0","pt-1"],["id","custom-tabs-one-tab","role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["id","custom-tabs-one-sync-orgunits-tab","data-toggle","pill","href","#custom-tabs-one-sync-orgunits","role","tab","aria-controls","custom-tabs-one-sync-orgunits","aria-selected","true",1,"nav-link","active"],["id","custom-tabs-one-sync-chws-tab","data-toggle","pill","href","#custom-tabs-one-sync-chws","role","tab","aria-controls","custom-tabs-one-sync-chws","aria-selected","false",1,"nav-link"],["id","custom-tabs-one-sync-dhis2-chws-tab","data-toggle","pill","href","#custom-tabs-one-sync-dhis2-chws","role","tab","aria-controls","custom-tabs-one-sync-dhis2-chws","aria-selected","false",1,"nav-link"],[1,"card-body"],["id","custom-tabs-one-tabContent",1,"tab-content"],["id","custom-tabs-one-sync-orgunits","role","tabpanel","aria-labelledby","custom-tabs-one-sync-orgunits-tab",1,"tab-pane","fade","show","active"],[1,"row"],[1,"col-sm-12"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"card","card-default"],[1,"card-header"],[1,"card-title"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-sm-2","col-6"],[1,"form-group"],["type","date","formControlName","start_date",1,"form-control"],["type","date","formControlName","end_date",1,"form-control"],[1,"col-sm-2"],[1,"form-check"],["id","useTokenSite","type","checkbox","formControlName","site",1,"form-check-input"],["for","useTokenSite",1,"form-check-label"],["id","useTokenZone","type","checkbox","formControlName","zone",1,"form-check-input"],["for","useTokenZone",1,"form-check-label"],["id","useTokenFamily","type","checkbox","formControlName","family",1,"form-check-input"],["for","useTokenFamily",1,"form-check-label"],["id","useTokenPatient","type","checkbox","formControlName","patient",1,"form-check-input"],["for","useTokenPatient",1,"form-check-label"],["id","useTokenChw","type","checkbox","formControlName","chw",1,"form-check-input"],["for","useTokenChw",1,"form-check-label"],[1,"card-footer"],["type","submit",1,"btn","btn-danger","float-right",3,"disabled"],[1,"fa","fa-floppy-o","fa-right"],["class","card-body",4,"ngIf"],["id","custom-tabs-one-sync-chws","role","tabpanel","aria-labelledby","custom-tabs-one-sync-chws-tab",1,"tab-pane","fade"],[1,"card","card-warning"],[1,"col-sm-6"],["type","submit",1,"btn","btn-warning","float-right",3,"disabled"],["id","custom-tabs-one-sync-dhis2-chws","role","tabpanel","aria-labelledby","custom-tabs-one-sync-dhis2-chws-tab",1,"tab-pane","fade"],[1,"card","card-success"],["formControlName","districts","multiple","multiple",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["formControlName","sites","multiple","multiple",1,"form-control"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],["id","sync_chws_datatable",1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[1,"org-unit-success"],[1,"org-unit-error"],[3,"value"],["id","custom-tabs-one-sync-all-tab","data-toggle","pill","href","#custom-tabs-one-sync-all","role","tab","aria-controls","custom-tabs-one-sync-all","aria-selected","true",1,"nav-link","active"],["id","custom-tabs-one-sync-all","role","tabpanel","aria-labelledby","custom-tabs-one-sync-all-tab",1,"tab-pane","fade","show","active"],[1,"col-sm-4","col-6"],["id","sync_chws_datatable",1,"table","table-bordered"],["colspan","5",2,"background-color","blue","text-align","center","color","white","font-size","18px"],[4,"ngIf"],["colspan","5",2,"background-color","red","text-align","center","color","white","font-size","18px"],["colspan","5",2,"background-color","green","text-align","center","color","white","font-size","18px"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Kt,145,14,"div",2),t.YNc(3,ne,37,4,"div",2),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf","syncDataOneByOne"===n.activePage),t.xp6(1),t.Q6J("ngIf","syncAllDataOneTime"===n.activePage))},dependencies:[g.sg,g.O5,r._Y,r.YN,r.Kr,r.Fj,r.Wl,r.K7,r.JJ,r.JL,r.sg,r.u,g.Nd],styles:["input[type=checkbox]:checked{filter:invert(90%) hue-rotate(45deg) brightness(1.7);height:18px;width:18px;transform:rotate(-45deg)}input[type=checkbox]{height:18px;width:18px}.form-check-label{margin-top:5px;margin-left:5px}.mat-calendar-body-cell.notSelected{background-color:#4682b4;border-radius:100%;width:50px;height:50px}.mat-calendar-body-cell.selected{background-color:red!important;border-radius:100%;width:50px;height:50px}.results{background-color:#ffebcd;min-height:100px;width:500px}.org-unit-success{padding-left:10px;color:green}.org-unit-error{padding-left:20px;color:red}.borderError{border:solid red 2px}.danger{color:red;font-weight:700}.warning{color:orange;font-weight:700}.infos{color:#8a2be2;font-weight:700}.good{font-weight:700}\n"],encapsulation:2}),i})();var A=u(5601);const ae=[{path:"",redirectTo:"data",pathMatch:"full"},{path:"data/:cible",component:kt,canActivate:[x.a,A.p],data:{title:"Sync Data"}},{path:"sync/:cible",component:se,canActivate:[x.a,A.p],data:{title:"Sync OrgUnit & Data"}}];let re=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[b.Bz.forChild(ae),b.Bz]}),i})(),oe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.ez,r.UX,re]}),i})()}}]);