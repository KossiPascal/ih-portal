"use strict";(self.webpackChunkih_portal=self.webpackChunkih_portal||[]).push([[275],{7275:(ye,Z,d)=>{d.r(Z),d.d(Z,{SyncsModule:()=>Te});var g=d(8692),h=d(3580),T=d(8968),s=d(92),_=d(8629),e=d(4537),y=d(1815),x=d(5732),k=d(7556);function A(a,i){if(1&a&&(e.TgZ(0,"div",47),e._UZ(1,"i",48),e.TgZ(2,"div",49),e._uU(3),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(3),e.Oqu(t.LoadingMsg)}}function U(a,i){1&a&&(e.TgZ(0,"div",12)(1,"div",20)(2,"div",21)(3,"label"),e._uU(4,"DHIS2 USERNAME"),e.qZA(),e._UZ(5,"input",50),e.qZA()(),e.TgZ(6,"div",20)(7,"div",21)(8,"label"),e._uU(9,"DHIS2 PASSWORD"),e.qZA(),e._UZ(10,"input",51),e.qZA()()())}function w(a,i){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e._UZ(2,"br"),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.tab1_messages_error," ")}}function S(a,i){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e._UZ(2,"br"),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.AsE(" ",t.key,":",t.value," ")}}function C(a,i){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e._UZ(2,"br"),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.AsE(" ",t.key,":",t.value," ")}}function D(a,i){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e._UZ(2,"br"),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.hij(" Error Found: ",t,"")}}function q(a,i){1&a&&(e.TgZ(0,"div"),e._uU(1," Pas d'erreur rencontr\xe9 lors de la r\xe9cup\xe9ration des donn\xe9es sur le serveur! "),e.qZA())}function I(a,i){if(1&a&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&a){const t=i.$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",n.capitaliseData(t,"_")," ")}}function N(a,i){if(1&a&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.hij(" ",t," ")}}function F(a,i){if(1&a&&(e.TgZ(0,"tr"),e.YNc(1,N,2,1,"td",34),e.qZA()),2&a){const t=i.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.getItemAsArray(t))}}function O(a,i){if(1&a&&(e.TgZ(0,"div",47),e._UZ(1,"i",48),e.TgZ(2,"div",49),e._uU(3),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(3),e.Oqu(t.LoadingMsg)}}function E(a,i){1&a&&(e.TgZ(0,"div",20)(1,"div",21)(2,"label"),e._uU(3,"DHIS2 HOST"),e.qZA(),e._UZ(4,"input",52),e.qZA()())}function J(a,i){1&a&&(e.TgZ(0,"div",12)(1,"div",20)(2,"div",21)(3,"label"),e._uU(4,"DHIS2 USERNAME"),e.qZA(),e._UZ(5,"input",50),e.qZA()(),e.TgZ(6,"div",20)(7,"div",21)(8,"label"),e._uU(9,"DHIS2 PASSWORD"),e.qZA(),e._UZ(10,"input",51),e.qZA()()())}function M(a,i){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e._UZ(2,"br"),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.AsE(" ",t.key,":",t.value," ")}}function Q(a,i){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e._UZ(2,"br"),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.AsE(" ",t.key,":",t.value," ")}}function Y(a,i){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e._UZ(2,"br"),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.hij(" Error Found: ",t,"")}}function G(a,i){1&a&&(e.TgZ(0,"div"),e._uU(1," Pas d'erreur rencontr\xe9 lors de la r\xe9cup\xe9ration des donn\xe9es sur le serveur! "),e.qZA())}function $(a,i){if(1&a&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&a){const t=i.$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.capitaliseData(t,"_")," ")}}function L(a,i){if(1&a&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.hij(" ",t," ")}}function P(a,i){if(1&a&&(e.TgZ(0,"tr"),e.YNc(1,L,2,1,"td",34),e.qZA()),2&a){const t=i.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",n.getItemAsArray(t))}}function H(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"div",36)(1,"div",17)(2,"h3",18),e._uU(3,"DataTable with default features"),e.qZA(),e.TgZ(4,"button",37),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.initTable("medic_datatable"))}),e._uU(5,"Generate Table"),e.qZA()(),e.TgZ(6,"div",9)(7,"table",53)(8,"thead")(9,"tr"),e.YNc(10,$,2,1,"th",34),e.qZA()(),e.TgZ(11,"tbody"),e.YNc(12,P,2,1,"tr",34),e.ALo(13,"keyvalue"),e.qZA()()()()}if(2&a){const t=e.oxw(2);e.xp6(10),e.Q6J("ngForOf",null==t.tab3_messages||null==t.tab3_messages.dataToSend||null==t.tab3_messages.dataToSend.Data?null:t.tab3_messages.dataToSend.Data.head),e.xp6(2),e.Q6J("ngForOf",e.lcZ(13,2,null==t.tab3_messages||null==t.tab3_messages.dataToSend||null==t.tab3_messages.dataToSend.Data?null:t.tab3_messages.dataToSend.Data.body))}}function W(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"ul",5)(3,"li",6)(4,"a",7),e._uU(5,"ThinkMd To DHIS2 "),e.qZA()(),e.TgZ(6,"li",6)(7,"a",8),e._uU(8,"CHT To DHIS2 "),e.qZA()()()(),e.TgZ(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13)(14,"div",14),e.YNc(15,A,4,1,"div",15),e.TgZ(16,"div",16)(17,"div",17)(18,"h3",18),e._uU(19,"Get ThinkMd Aggragate Data From Tableau"),e.qZA()(),e.TgZ(20,"form",19),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.runThinkmdToDhis2())}),e.TgZ(21,"div",9)(22,"div",12)(23,"div",20)(24,"div",21)(25,"label"),e._uU(26,"Date de fin"),e.qZA(),e.TgZ(27,"input",22),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cleanError())}),e.qZA()()()(),e._UZ(28,"br"),e.TgZ(29,"div",12)(30,"div",20)(31,"div",21)(32,"label"),e._uU(33,"Tableau Token User"),e.qZA(),e._UZ(34,"input",23),e.qZA()(),e.TgZ(35,"div",20)(36,"div",21)(37,"label"),e._uU(38,"Tableau Token"),e.qZA(),e._UZ(39,"input",24),e.qZA()()(),e._UZ(40,"br"),e.TgZ(41,"div",12)(42,"div",20)(43,"div",21)(44,"label"),e._uU(45,"Use Dhis2"),e.qZA(),e.TgZ(46,"div",25),e._UZ(47,"input",26),e.TgZ(48,"label",27),e._uU(49,"Insert Into Dhis2"),e.qZA()()()()(),e.YNc(50,U,11,0,"div",28),e.qZA(),e.TgZ(51,"div",29)(52,"button",30),e._uU(53," Charger les donn\xe9es "),e._UZ(54,"span",31),e.qZA()()()()()(),e.TgZ(55,"div",32),e.YNc(56,w,3,1,"div",33),e.YNc(57,S,3,2,"div",34),e.ALo(58,"keyvalue"),e.YNc(59,C,3,2,"div",34),e.ALo(60,"keyvalue"),e._uU(61),e._UZ(62,"br"),e.YNc(63,D,3,1,"div",34),e.YNc(64,q,2,0,"div",33),e.qZA()(),e.TgZ(65,"div",12)(66,"div",35)(67,"div",36)(68,"div",17)(69,"h3",18),e._uU(70,"DataTable with default features"),e.qZA(),e.TgZ(71,"button",37),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.initTable("thinkmd_datatable"))}),e._uU(72,"Generate Table"),e.qZA()(),e.TgZ(73,"div",9)(74,"table",38)(75,"thead")(76,"tr"),e.YNc(77,I,2,1,"th",34),e.qZA()(),e.TgZ(78,"tbody"),e.YNc(79,F,2,1,"tr",34),e.ALo(80,"keyvalue"),e.qZA()()()()()()(),e.TgZ(81,"div",39)(82,"div",12)(83,"div",13)(84,"div",14),e.YNc(85,O,4,1,"div",15),e.TgZ(86,"div",40)(87,"div",17)(88,"h3",18),e._uU(89,"Get Aggregate Data From CHT mebile"),e.qZA()(),e.TgZ(90,"form",19),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.runIhChtToDhis2())}),e.TgZ(91,"div",9)(92,"div",12)(93,"div",20)(94,"div",21)(95,"label"),e._uU(96,"Date de d\xe9but"),e.qZA(),e.TgZ(97,"input",41),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cleanError())}),e.qZA()()(),e.TgZ(98,"div",20)(99,"div",21)(100,"label"),e._uU(101,"Date de fin"),e.qZA(),e.TgZ(102,"input",22),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cleanError())}),e.qZA()()()(),e.TgZ(103,"div",12)(104,"div",20)(105,"div",21)(106,"label"),e._uU(107,"Use Dhis2"),e.qZA(),e.TgZ(108,"div",25),e._UZ(109,"input",42),e.TgZ(110,"label",43),e._uU(111,"Insert Into Dhis2"),e.qZA()()()(),e.YNc(112,E,5,0,"div",44),e.qZA(),e.YNc(113,J,11,0,"div",28),e.qZA(),e.TgZ(114,"div",29)(115,"button",45),e._uU(116," Charger les donn\xe9es "),e._UZ(117,"span",31),e.qZA()()()()()(),e.TgZ(118,"div",32),e.YNc(119,M,3,2,"div",34),e.ALo(120,"keyvalue"),e.YNc(121,Q,3,2,"div",34),e.ALo(122,"keyvalue"),e._uU(123),e._UZ(124,"br"),e.YNc(125,Y,3,1,"div",34),e.YNc(126,G,2,0,"div",33),e.qZA()(),e.TgZ(127,"div",12)(128,"div",35),e.YNc(129,H,14,4,"div",46),e.qZA()()()()()()}if(2&a){const t=e.oxw();e.xp6(15),e.Q6J("ngIf",t.loading1),e.xp6(5),e.Q6J("formGroup",t.thinkmdToDhis2Form),e.xp6(7),e.Gre("form-control ",t.endDateError(),""),e.xp6(23),e.Q6J("ngIf",t.thinkmdToDhis2Form.value.InsertIntoDhis2),e.xp6(2),e.Q6J("disabled",!t.thinkmdToDhis2Form.valid),e.xp6(4),e.Q6J("ngIf",null!=t.tab1_messages_error),e.xp6(1),e.Q6J("ngForOf",e.lcZ(58,32,null==t.tab1_messages||null==t.tab1_messages.dataToSend?null:t.tab1_messages.dataToSend.Dhis2Import)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(60,34,null==t.tab1_messages||null==t.tab1_messages.dataToSend?null:t.tab1_messages.dataToSend.ErrorMsg)),e.xp6(2),e.hij(" ",null==t.tab1_messages||null==t.tab1_messages.errorToSend?null:t.tab1_messages.errorToSend.ConsoleError,""),e.xp6(2),e.Q6J("ngForOf",null==t.tab1_messages||null==t.tab1_messages.errorToSend?null:t.tab1_messages.errorToSend.ErrorData),e.xp6(1),e.Q6J("ngIf","true"==(null==t.tab1_messages||null==t.tab1_messages.dataToSend?null:t.tab1_messages.dataToSend.success)),e.xp6(13),e.Q6J("ngForOf",null==t.tab1_messages||null==t.tab1_messages.dataToSend||null==t.tab1_messages.dataToSend.Data?null:t.tab1_messages.dataToSend.Data.head),e.xp6(2),e.Q6J("ngForOf",e.lcZ(80,36,null==t.tab1_messages||null==t.tab1_messages.dataToSend||null==t.tab1_messages.dataToSend.Data?null:t.tab1_messages.dataToSend.Data.body)),e.xp6(6),e.Q6J("ngIf",t.loading3),e.xp6(5),e.Q6J("formGroup",t.ihChtToDhis2Form),e.xp6(7),e.Gre("form-control ",t.startDateError(),""),e.xp6(5),e.Gre("form-control ",t.endDateError(),""),e.xp6(10),e.Q6J("ngIf",t.ihChtToDhis2Form.value.InsertIntoDhis2),e.xp6(1),e.Q6J("ngIf",t.ihChtToDhis2Form.value.InsertIntoDhis2),e.xp6(2),e.Q6J("disabled",!t.ihChtToDhis2Form.valid),e.xp6(4),e.Q6J("ngForOf",e.lcZ(120,38,null==t.tab3_messages||null==t.tab3_messages.dataToSend?null:t.tab3_messages.dataToSend.Dhis2Import)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(122,40,null==t.tab3_messages||null==t.tab3_messages.dataToSend?null:t.tab3_messages.dataToSend.ErrorMsg)),e.xp6(2),e.hij(" ",null==t.tab3_messages||null==t.tab3_messages.errorToSend?null:t.tab3_messages.errorToSend.ConsoleError,""),e.xp6(2),e.Q6J("ngForOf",null==t.tab3_messages||null==t.tab3_messages.errorToSend?null:t.tab3_messages.errorToSend.ErrorData),e.xp6(1),e.Q6J("ngIf","true"==(null==t.tab3_messages||null==t.tab3_messages.dataToSend?null:t.tab3_messages.dataToSend.success)),e.xp6(3),e.Q6J("ngIf",null!=(null==t.tab3_messages||null==t.tab3_messages.dataToSend?null:t.tab3_messages.dataToSend.Data)&&null!=(null==t.tab3_messages||null==t.tab3_messages.dataToSend?null:t.tab3_messages.dataToSend.Data))}}function j(a,i){if(1&a&&(e.TgZ(0,"div",47),e._UZ(1,"i",48),e.TgZ(2,"div",49),e._uU(3),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(3),e.Oqu(t.LoadingMsg)}}function K(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"div",62),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.removeWeekDate(o))}),e.TgZ(1,"div",21)(2,"strong"),e._uU(3),e.qZA()()()}if(2&a){const t=i.$implicit;e.xp6(3),e.hij(" ",t," ")}}function R(a,i){if(1&a&&(e.TgZ(0,"div",63)(1,"strong"),e._uU(2),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(t.weekly_date_error_Msg)}}function V(a,i){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e._UZ(2,"br"),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.tab4_messages_error," ")}}function B(a,i){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e._UZ(2,"br"),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.AsE(" ",t.key,":",t.value," ")}}function z(a,i){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e._UZ(2,"br"),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.AsE(" ",t.key,":",t.value," ")}}function X(a,i){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e._UZ(2,"br"),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.hij(" Error Found: ",t,"")}}function ee(a,i){1&a&&(e.TgZ(0,"div"),e._uU(1," Pas d'erreur rencontr\xe9 lors de la r\xe9cup\xe9ration des donn\xe9es sur le serveur! "),e.qZA())}function te(a,i){if(1&a&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&a){const t=i.$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",n.capitaliseData(t,"_")," ")}}function ae(a,i){if(1&a&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&a){const t=i.$implicit,n=e.oxw(3);e.Tol(n.genarateColor(t)),e.xp6(1),e.hij(" ",t," ")}}function ne(a,i){if(1&a&&(e.TgZ(0,"tr"),e.YNc(1,ae,2,4,"td",64),e.qZA()),2&a){const t=i.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.getItemAsArray(t))}}function se(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"ul",5)(3,"li",6)(4,"a",54),e._uU(5,"Chws Week Data "),e.qZA()()()(),e.TgZ(6,"div",9)(7,"div",10)(8,"div",55)(9,"div",12)(10,"div",13)(11,"div",14),e.YNc(12,j,4,1,"div",15),e.TgZ(13,"div",56)(14,"div",17)(15,"h3",18),e._uU(16,"Get Chws Weekly Data from ThinkMd and Medic"),e.qZA()(),e.TgZ(17,"form",19),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.runThinkMdWeekly())}),e.TgZ(18,"div",9)(19,"div",12),e.YNc(20,K,4,1,"div",57),e.qZA(),e.YNc(21,R,3,1,"div",58),e.TgZ(22,"div",12)(23,"div",20)(24,"div",21)(25,"label"),e._uU(26,"Date de d\xe9but"),e.qZA(),e.TgZ(27,"input",59),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addToDateList())}),e.qZA()()()(),e.TgZ(28,"div",12)(29,"div",20)(30,"div",21)(31,"label"),e._uU(32,"Tableau Token User"),e.qZA(),e._UZ(33,"input",23),e.qZA()(),e.TgZ(34,"div",20)(35,"div",21)(36,"label"),e._uU(37,"Tableau Token"),e.qZA(),e._UZ(38,"input",24),e.qZA()()(),e.TgZ(39,"div",12)(40,"div",20)(41,"div",21)(42,"label"),e._uU(43,"DHIS2 USERNAME"),e.qZA(),e._UZ(44,"input",50),e.qZA()(),e.TgZ(45,"div",20)(46,"div",21)(47,"label"),e._uU(48,"DHIS2 PASSWORD"),e.qZA(),e._UZ(49,"input",51),e.qZA()()()(),e.TgZ(50,"div",29)(51,"button",60),e._uU(52," Charger les donn\xe9es "),e._UZ(53,"span",31),e.qZA()()()()()(),e.TgZ(54,"div",32),e.YNc(55,V,3,1,"div",33),e.YNc(56,B,3,2,"div",34),e.ALo(57,"keyvalue"),e.YNc(58,z,3,2,"div",34),e.ALo(59,"keyvalue"),e._uU(60),e._UZ(61,"br"),e.YNc(62,X,3,1,"div",34),e.YNc(63,ee,2,0,"div",33),e.qZA(),e.TgZ(64,"div",35)(65,"div",36)(66,"div",17)(67,"h3",18),e._uU(68,"DataTable with default features"),e.qZA(),e.TgZ(69,"button",37),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.initTable("medic_thinkMd_datatable"))}),e._uU(70,"Generate Table"),e.qZA()(),e.TgZ(71,"div",9)(72,"table",61)(73,"thead")(74,"tr"),e.YNc(75,te,2,1,"th",34),e.qZA()(),e.TgZ(76,"tbody"),e.YNc(77,ne,2,1,"tr",34),e.ALo(78,"keyvalue"),e.qZA()()()()()()()()()()}if(2&a){const t=e.oxw();e.xp6(12),e.Q6J("ngIf",t.loading4),e.xp6(5),e.Q6J("formGroup",t.ChtThinkMdWeeklyForm),e.xp6(3),e.Q6J("ngForOf",t.weekly_Choosen_Dates),e.xp6(1),e.Q6J("ngIf",t.is_weekly_date_error),e.xp6(30),e.Q6J("disabled",!t.ChtThinkMdWeeklyForm.valid),e.xp6(4),e.Q6J("ngIf",null!=t.tab4_messages_error),e.xp6(1),e.Q6J("ngForOf",e.lcZ(57,13,null==t.tab4_messages||null==t.tab4_messages.dataToSend?null:t.tab4_messages.dataToSend.Dhis2Import)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(59,15,null==t.tab4_messages||null==t.tab4_messages.dataToSend?null:t.tab4_messages.dataToSend.ErrorMsg)),e.xp6(2),e.hij(" ",null==t.tab4_messages||null==t.tab4_messages.errorToSend?null:t.tab4_messages.errorToSend.ConsoleError,""),e.xp6(2),e.Q6J("ngForOf",null==t.tab4_messages||null==t.tab4_messages.errorToSend?null:t.tab4_messages.errorToSend.ErrorData),e.xp6(1),e.Q6J("ngIf","true"==(null==t.tab4_messages||null==t.tab4_messages.dataToSend?null:t.tab4_messages.dataToSend.success)),e.xp6(12),e.Q6J("ngForOf",null==t.tab4_messages||null==t.tab4_messages.dataToSend||null==t.tab4_messages.dataToSend.Data?null:t.tab4_messages.dataToSend.Data.head),e.xp6(2),e.Q6J("ngForOf",e.lcZ(78,17,null==t.tab4_messages||null==t.tab4_messages.dataToSend||null==t.tab4_messages.dataToSend.Data?null:t.tab4_messages.dataToSend.Data.body))}}let ie=(()=>{class a{constructor(t,n,r,o){this.route=t,this.sync=n,this.http=r,this.authService=o,this.tab1_messages=null,this.tab1_messages_error=null,this.tab3_messages=null,this.tab4_messages=null,this.tab4_messages_error=null,this.dates=[],this.weekly_Choosen_Dates=[],this.is_weekly_date_error=!1,this.weekly_date_error_Msg="",this.activePage="",this.start_date_error=!1,this.end_date_error=!1,this.LoadingMsg="Loading...",this.sitesList=[],this.isSelected=l=>this.dates.find(c=>c.isSame(l))?"selected":"notSelected"}ngOnInit(){this.route.params.subscribe(t=>{this.activePage=t.cible}),this.sync.getSitesList().subscribe(t=>{this.sitesList=t},t=>console.log(t.error)),this.loading1=!1,this.loading3=!1,this.thinkmdToDhis2Form=this.createThinkmdFormGroup(),this.ihChtToDhis2Form=this.createIhChtFormGroup(),this.ChtThinkMdWeeklyForm=this.createChtThinkmdFormGroup()}createFormGroup(t){return new s.cw({start_date:new s.NI("","cht"===t||"allChwsData"===t||"cht_thinkMd"===t?[s.kI.required,s.kI.minLength(7)]:[]),end_date:new s.NI("","cht"===t||"thinkMd"===t||"allChwsData"===t?[s.kI.required,s.kI.minLength(7)]:[]),weekly_Choosen_Dates:new s.NI(""),useToken:new s.NI(!0),thinkmd_token_username:new s.NI(""),thinkmd_token:new s.NI(""),InsertIntoDhis2:new s.NI(!1,[]),dhis2_username:new s.NI(""),dhis2_password:new s.NI(""),ssl_verification:new s.NI(!1,"allChwsData"===t||"allOrgUnit"===t?[s.kI.required]:[])})}createChwsDataFormGroup(){return this.createFormGroup("allChwsData")}createDhis2ChwsDataFormGroup(){return new s.cw({start_date:new s.NI("",[s.kI.required,s.kI.minLength(7)]),end_date:new s.NI("",[s.kI.required,s.kI.minLength(7)]),sites:new s.NI("")})}createOrgUnitAndPersonFormGroup(){return this.createFormGroup("allOrgUnit")}createThinkmdFormGroup(){return this.createFormGroup("thinkMd")}createIhChtFormGroup(){return this.createFormGroup("cht")}createChtThinkmdFormGroup(){return this.createFormGroup("cht_thinkMd")}isValidParams(t,n){if(null!=t){const r=t.value;if(null!=r){const o=r.start_date,l=r.end_date,c=_.E.isDayInDate(o,21),u=_.E.isDayInDate(l,20),m=_.E.daysDiff(o,l);if(1==r.InsertIntoDhis2&&"cht"==n)return m>31?(this.start_date_error=!0,this.end_date_error=!0):(this.start_date_error=!c,this.end_date_error=!u),c&&u&&m<=31;if("thinkMd"==n)return this.end_date_error=!u,u}}return!0}startDateError(){return this.start_date_error?"borderError":""}endDateError(){return this.end_date_error?"borderError":""}cleanError(){this.start_date_error=!1,this.end_date_error=!1}cleanWeeklyDateError(){this.is_weekly_date_error=!1,this.weekly_date_error_Msg=""}WeeklyDateIsValid(){var t=0;for(let n=0;n<this.weekly_Choosen_Dates.length;n++){const r=this.weekly_Choosen_Dates[n];_.E.getMondays(r).includes(r)||t++}return 0==t}genarateColor(t){if(_.F.isNumber(t)){const n=parseInt(t);return n<=5?"danger":n>5&&n<=30?"warning":n>30&&n<40?"infos":"good"}return""}removeWeekDate(t){const n=this.weekly_Choosen_Dates.indexOf(t);this.weekly_Choosen_Dates.splice(n,1)}runThinkmdToDhis2(){this.isValidParams(this.thinkmdToDhis2Form,"thinkMd")&&(this.start_date_error=!1,this.loading1=!0,this.tab1_messages=null,this.tab1_messages_error=null,this.sync.thinkmdToDhis2Script(this.thinkmdToDhis2Form.value).subscribe(t=>{this.loading1=!1;try{this.tab1_messages=JSON.parse(t)}catch{this.tab1_messages_error=t.toString()}},t=>{this.loading1=!1,this.tab1_messages_error=t.toString(),console.log(t.error)}))}runIhChtToDhis2(){this.isValidParams(this.ihChtToDhis2Form,"cht")&&(this.start_date_error=!1,this.end_date_error=!1,this.loading3=!0,this.tab3_messages=null,this.sync.ihChtToDhis2Script(this.ihChtToDhis2Form.value).subscribe(t=>{this.loading3=!1,this.tab3_messages=JSON.parse(t)},t=>{this.loading3=!1,this.tab3_messages=t.message,console.log(t.error)}))}runThinkMdWeekly(){this.addToDateList(),this.weekly_Choosen_Dates.length>1&&this.WeeklyDateIsValid()?(this.is_weekly_date_error=!1,this.weekly_date_error_Msg="",this.loading4=!0,this.tab4_messages=null,this.tab4_messages_error=null,this.sync.syncThinkMdWeeklyChwsData(this.ChtThinkMdWeeklyForm.value).subscribe(t=>{this.loading4=!1;try{this.tab4_messages=JSON.parse(t)}catch{this.tab4_messages_error=t.toString()}},t=>{this.loading4=!1,this.tab4_messages_error=t.toString(),console.log(t.error)})):(this.is_weekly_date_error=!0,this.weekly_Choosen_Dates.length<=1?this.weekly_date_error_Msg="Vous devez choisir au moins 2 dates":this.WeeklyDateIsValid()||(this.weekly_date_error_Msg="Toutes les dates doivent \xeatre un Lundi de la semaine"))}remove(t,n){for(var r=t.indexOf(n);-1!==r;)t.splice(r,1),r=t.indexOf(n);return t}getValue(t,n){return t[n.pop()]}addToDateList(){const t=this.ChtThinkMdWeeklyForm.value.start_date;!this.weekly_Choosen_Dates.includes(t)&&null!=t&&""!=t&&this.weekly_Choosen_Dates.push(t),this.ChtThinkMdWeeklyForm.value.start_date="",this.ChtThinkMdWeeklyForm.value.end_date="",this.ChtThinkMdWeeklyForm.value.weekly_Choosen_Dates=this.weekly_Choosen_Dates,this.cleanWeeklyDateError()}renameKeyIfFoundInObject(t,n,r){try{Object.keys(t).includes(n)&&(t[r]=t[n],delete t[n])}catch{}return t}getKeyPath(t,n){return""!=t?t+"."+n:n}listatts(t,n){var r=[];if(!("object"!=typeof(n=this.renameKeyIfFoundInObject(n,"length","_length"))||null==n||n.length>0)){for(var o in n){const c=this.getKeyPath(t,o);if(Object.prototype.hasOwnProperty.call(n,o)){let u=this.listatts(c,n[o]);if(null!=u&&u.length>0)r=[...r,...u];else{let m=c.split("."),f=this.getValue(n,m);if(Array.isArray(f)){var l=[];f.forEach(v=>{if("string"==typeof v)l.push(`"${v}"`);else{let b=this.listatts(c,v);null!=b&&b.length>0&&(r=[...r,...b])}}),l.length>0&&r.push(`"${c}" : [${l}]`)}else r.push(`"${c}" : "${f}"`)}}}return r}}writeContents(t,n,r){var o=document.createElement("a"),l=new Blob([t],{type:r});o.href=URL.createObjectURL(l),o.download=n,o.click()}isObject(t){return null!=t&&t.constructor==Object}testJson(){const r=this.listatts("",{_id:"d1a1ab15-d49f-4dbd-902f-7a9439e39f9f",_rev:"2-8db714ee4d3c9aba5dcb8015d62caa91",form:"pcime_c_asc",from:"00228 93 22 32 66",type:"data_record",fields:{MAM:"false",meta:{instanceID:"uuid:0f9f00e8-ea59-4dce-91fe-53ad5ea9b681"},inputs:{meta:{location:{lat:"",long:"",error:"",message:""},deprecatedID:""},source:"contact",contact:{_id:"412133d8-88fa-4fca-af79-c4ba264d9ebf",sex:"male",name:"Kezeri abourasakou",date_of_birth:"2018-05-25"},source_id:""},s_fever:{n_congrats:"",n_conduct_mrdt:"",s_frequent_fever:"yes",s_fever_warm_body:"yes",s_fever_child_since:"3",n_fever_evaluation_note:"",s_fever_child_sleep_net:"yes",s_fever_child_TDR_result:"positive"},referral:"true",has_fever:"true",beyond_72h:"false",high_fever:"false",next_visit:"30856607",patient_id:"412133d8-88fa-4fca-af79-c4ba264d9ebf",s_constant:{s_use_scale:"",s_constant_child_weight:"15",s_note_child_temparature:"",s_constant_child_temperature:"39.4",s_constant_child_brachial_perimeter:"172"},s_diarrhea:{s_diarrhea_child_has:"no",n_diarrhea_evaluation_note:""},within_24h:"false",within_48h:"true",within_72h:"false",group_review:{fever:{r_fever:"",r_uncomplicated_give_advices:""},submit:"",followup:"",r_summary:"",r_symptoms:"",r_refer_USP:"",r_patient_id:"",r_danger_signs:"",r_malaria_sign:"",r_patient_info:"",r_accompany_USP:"",r_malaria_fever:"",r_no_malnutrition:"",r_diagnosis_treatment:"",s_have_you_refer_child:"yes",r_pre_tranfer_treatement:{r_drink_water:"",r_continue_suckle:"",r_lumartemcoartem:"",r_dose_paracetamol:"",r_no_oral_ingestion:"",r_refer_USP_immediatly:"",r_pre_tranfer_treatement_1:""},r_refer_USP_danger_signs:"",r_paludial_fever_treatment:{r_paludial_paracetamol:"",r_paludial_paracetamol_one:"",r_paludial_fever_treatment_1:"",r_paludial_fever_treatment_lumartem_coartem:"",r_paludial_fever_treatment_lumartem_coartem_2:""},r_accompany_USP_danger_signs:"",r_danger_signs_child_throwup:"",r_danger_signs_urine_cocacola:"",r_danger_signs_child_cannot_drink:"",r_followup_next_visit_any_referral:""},has_diarrhea:"false",patient_name:"Kezeri abourasakou",s_cough_cold:{s_cough_cold_has_cough_cold:"no",n_cough_cold_evaluation_note:""},accompaniment:"true",has_pneumonia:"false",has_cough_cold:"false",patient_sex_en:"Male",patient_sex_fr:"Homme",referral_fever:"true",referral_mucus:"false",s_danger_signs:{has_danger_sign:"true",s_danger_signs_note:{s_danger_signs_note_child:"",s_danger_signs_blood_stools:"no",s_danger_signs_child_throwup:"yes",s_danger_signs_urine_cocacola:"yes",s_danger_signs_child_convulsion:"no",s_danger_signs_child_often_sick:"no",s_danger_signs_diarrhea_more_14:"no",s_danger_signs_child_cannot_drink:"yes"},has_accompaniment_ds:"true",s_danger_signs_observe:{n_danger_signs_exist:"",s_danger_signs_child_anemia:"no",s_danger_signs_child_slimming:"no",s_danger_signs_child_convulsing:"no",s_danger_signs_child_unconscious:"no",s_danger_signs_child_difficulty_breathing:"no"},s_danger_signs_child_research:{s_danger_signs_edema:"no",s_danger_signs_rashes:"no",s_danger_signs_fontanelle:"no",s_danger_signs_dehydration:"no",n_danger_signs_child_present:"",s_danger_signs_neck_stiffness:"no"},s_danger_signs_continue_survey:"yes"},MAS_complicated:"false",assessment_time:{s_assessment_time:"c_assessment_time_1"},no_malnutrition:"true",has_malnutrition:"false",show_car_advices:"true",MAS_uncomplicated:"false",beginning_illness:{s_begining_illness:"morning_day_before_yesterday"},non_malaria_fever:"false",referral_diarrhea:"false",s_vaccinal_status:{s_one_day:{s_vaccinal_status_BCG:"yes",s_vaccinal_status_VPO_0:"yes"},s_six_weeks:{s_vaccinal_status_VPO_1:"yes",s_vaccinal_status_DTC_B1:"yes",s_vaccinal_status_rota_1:"yes",s_vaccinal_status_pneumo_1:"yes"},s_ten_weeks:{s_vaccinal_status_VPO_2:"yes",s_vaccinal_status_DTC_B2:"yes",s_vaccinal_status_rota_2:"yes",s_vaccinal_status_pneumo_2:"yes"},s_nine_months:{s_vaccinal_status_VAA:"yes",s_vaccinal_status_VAR:"yes",s_vaccinal_status_vit_A:"yes"},s_forteen_weeks:{s_vaccinal_status_VPO_3:"yes",s_vaccinal_status_DTC_B3:"yes",s_vaccinal_status_rota_3:"yes",s_vaccinal_status_pneumo_3:"yes"},s_health_issues:{s_other_health_issues:"no"}},fever_with_malaria:"true",has_simple_malaria:"true",fever_with_diarrhea:"false",patient_age_display:"4 years and 1 month old",patient_age_in_days:"1507",referral_cough_cold:"false",s_drug_administered:{s_para:"paracetamol_500",other_drug:"",s_lumartem:"yes",n_drug_administered_tablet_type:""},s_nutritional_state:{n_nutritional_state_branchial_perimeter:""},patient_age_in_years:"4",diarrhea_with_malaria:"false",patient_age_in_months:"49",referral_danger_signs:"true",patient_age_display_fr:"4 ans et 1 mois",referral_missed_vaccine:"false",referral_MAS_complicated:"false",show_nutritional_advices:"true"},contact:{_id:"4e6fb542-a057-489d-86da-b19f062e0da3",parent:{_id:"60867fb9-1202-4c43-9a44-a314ac1009a1",parent:{_id:"5827654a-1c65-4aa3-a917-c83f294d965e"}}},sent_by:"Skon Toba",geolocation:{speed:.7175227999687195,heading:167,accuracy:6.699999809265137,altitude:232.07999959647987,latitude:9.6057433,longitude:1.0205783,altitudeAccuracy:null},_attachments:{content:{stub:!0,digest:"md5-q/AHW2DGudmdiQlHXlPdSw==",length:10945,revpos:1,content_type:"application/xml"}},content_type:"xml",hidden_fields:["meta","nano","mobo",{toto:{tttttttttttt:"ttttttttttttt"}}],reported_date:1657434950915,geolocation_log:[{recording:{speed:.7175227999687195,heading:167,accuracy:6.699999809265137,altitude:232.07999959647987,latitude:9.6057433,longitude:1.0205783,altitudeAccuracy:null},timestamp:1657434953883}]});for(const[o,l]of Object.entries(JSON.parse(`{${r}}`)))console.log(`${o}: ${l}`);this.writeContents(`[{${r}}]`,"./result.json","json")}genarateDataAsTable(t){return null!=t&&null!=t&&(Object.keys(t),Object.values(t),console.log(t)),""}capitaliseData(t,n=" ",r=" "){return _.F.capitaliseDataGiven(t,n,r)}getItemAsArray(t){return t.value}initTable(t){initDataTable(t)}select(t,n){const r=this.dates.findIndex(o=>o.isSame(t));r<0?this.dates.push(t):this.dates.splice(r,1),n.updateTodaysDate()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(h.gz),e.Y36(y._),e.Y36(x.eN),e.Y36(k.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-sync"]],decls:4,vars:2,consts:[[1,"page-content-wrap"],[1,"col-12","col-sm-12"],["class","card card-warning card-tabs",4,"ngIf"],[1,"card","card-warning","card-tabs"],[1,"card-header","p-0","pt-1"],["id","custom-tabs-one-tab","role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["id","custom-tabs-one-thinkmd-tab","data-toggle","pill","href","#custom-tabs-one-thinkmd","role","tab","aria-controls","custom-tabs-one-thinkmd","aria-selected","true",1,"nav-link","active"],["id","custom-tabs-one-cht-tab","data-toggle","pill","href","#custom-tabs-one-cht","role","tab","aria-controls","custom-tabs-one-cht","aria-selected","false",1,"nav-link"],[1,"card-body"],["id","custom-tabs-one-tabContent",1,"tab-content"],["id","custom-tabs-one-thinkmd","role","tabpanel","aria-labelledby","custom-tabs-one-thinkmd-tab",1,"tab-pane","fade","show","active"],[1,"row"],[1,"col-sm-7"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"card","card-success"],[1,"card-header"],[1,"card-title"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-sm-6"],[1,"form-group"],["type","date","formControlName","end_date",3,"change"],["type","text","formControlName","thinkmd_token_username",1,"form-control"],["type","password","formControlName","thinkmd_token",1,"form-control"],[1,"form-check"],["id","thinkmdToDhis2","type","checkbox","formControlName","InsertIntoDhis2",1,"form-check-input"],["for","thinkmdToDhis2",1,"form-check-label"],["class","row",4,"ngIf"],[1,"card-footer"],["type","submit",1,"btn","btn-success","float-right",3,"disabled"],[1,"fa","fa-floppy-o","fa-right"],[1,"col-sm-5"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-sm-12"],[1,"card"],["type","button",3,"click"],["id","thinkmd_datatable",1,"table","table-bordered","table-striped"],["id","custom-tabs-one-cht","role","tabpanel","aria-labelledby","custom-tabs-one-cht-tab",1,"tab-pane","fade"],[1,"card","card-info"],["type","date","formControlName","start_date",3,"change"],["id","InsertIntoDhis2","type","checkbox","formControlName","InsertIntoDhis2",1,"form-check-input"],["for","InsertIntoDhis2",1,"form-check-label"],["class","col-sm-6",4,"ngIf"],["type","submit",1,"btn","btn-info","float-right",3,"disabled"],["class","card",4,"ngIf"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],["type","text","formControlName","dhis2_username",1,"form-control"],["type","password","formControlName","dhis2_password",1,"form-control"],["type","text","formControlName","dhis2_host",1,"form-control"],["id","medic_datatable",1,"table","table-bordered","table-striped"],["id","custom-tabs-chws-week-data-tab","data-toggle","pill","href","#custom-tabs-chws-week-data","role","tab","aria-controls","custom-tabs-chws-week-data","aria-selected","true",1,"nav-link","active"],["id","custom-tabs-chws-week-data","role","tabpanel","aria-labelledby","custom-tabs-chws-week-data-tab",1,"tab-pane","fade","show","active"],[1,"card","card-primary"],["class","col-sm-3",3,"click",4,"ngFor","ngForOf"],["style","color:red;",4,"ngIf"],["type","date","formControlName","start_date",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary","float-right",3,"disabled"],["id","medic_thinkMd_datatable",1,"table","table-bordered","table-striped"],[1,"col-sm-3",3,"click"],[2,"color","red"],[3,"class",4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,W,130,42,"div",2),e.YNc(3,se,79,19,"div",2),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngIf","dataToDhis2"===n.activePage),e.xp6(1),e.Q6J("ngIf","weeklyData"===n.activePage))},dependencies:[g.sg,g.O5,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.sg,s.u,g.Nd],styles:["input[type=checkbox]:checked{filter:invert(90%) hue-rotate(45deg) brightness(1.7);height:18px;width:18px;transform:rotate(-45deg)}input[type=checkbox]{height:18px;width:18px}.form-check-label{margin-top:5px;margin-left:5px}.mat-calendar-body-cell.notSelected{background-color:#4682b4;border-radius:100%;width:50px;height:50px}.mat-calendar-body-cell.selected{background-color:red!important;border-radius:100%;width:50px;height:50px}.results{background-color:#ffebcd;min-height:100px;width:500px}.org-unit-success{padding-left:10px;color:green}.org-unit-error{padding-left:20px;color:red}.borderError{border:solid red 2px}.danger{color:red;font-weight:700}.warning{color:orange;font-weight:700}.infos{color:#8a2be2;font-weight:700}.good{font-weight:700}\n"],encapsulation:2}),a})();var p=d(8239);function re(a,i){if(1&a&&(e.TgZ(0,"div",51),e._UZ(1,"i",52),e.TgZ(2,"div",53),e._uU(3),e.qZA()()),2&a){const t=e.oxw();e.xp6(3),e.Oqu(t.LoadingMsg)}}function oe(a,i){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",56),e._uU(4),e.qZA(),e.TgZ(5,"td",57),e._uU(6),e.qZA(),e.TgZ(7,"td",57),e._uU(8),e.qZA(),e.TgZ(9,"td",57),e._uU(10),e.qZA()()),2&a){const t=i.$implicit;e.xp6(2),e.Oqu(t.key),e.xp6(2),e.Oqu(t.value.successCount),e.xp6(2),e.Oqu(t.value.errorCount),e.xp6(2),e.Oqu(t.value.errorIds),e.xp6(2),e.Oqu(t.value.errorElements)}}function le(a,i){if(1&a&&(e.TgZ(0,"div",9)(1,"table",54)(2,"thead")(3,"tr")(4,"th"),e._uU(5,"El\xe9ment"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"SuccessCount"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"ErrorsCount"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"ErrorsIds"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"ErrorsMsg"),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,oe,11,5,"tr",55),e.ALo(16,"keyvalue"),e.qZA()()()),2&a){const t=e.oxw();e.xp6(15),e.Q6J("ngForOf",e.lcZ(16,1,t.tab4_messages))}}function de(a,i){if(1&a&&(e.TgZ(0,"div",51),e._UZ(1,"i",52),e.TgZ(2,"div",53),e._uU(3),e.qZA()()),2&a){const t=e.oxw();e.xp6(3),e.Oqu(t.LoadingMsg)}}function _e(a,i){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",56),e._uU(4),e.qZA(),e.TgZ(5,"td",57),e._uU(6),e.qZA(),e.TgZ(7,"td",57),e._uU(8),e.qZA(),e.TgZ(9,"td",57),e._uU(10),e.qZA()()),2&a){const t=i.$implicit;e.xp6(2),e.Oqu(t.key),e.xp6(2),e.Oqu(t.value.successCount),e.xp6(2),e.Oqu(t.value.errorCount),e.xp6(2),e.Oqu(t.value.errorIds),e.xp6(2),e.Oqu(t.value.errorElements)}}function ce(a,i){if(1&a&&(e.TgZ(0,"div",9)(1,"table",54)(2,"thead")(3,"tr")(4,"th"),e._uU(5,"El\xe9ment"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"SuccessCount"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"ErrorsCount"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"ErrorsIds"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"ErrorsMsg"),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,_e,11,5,"tr",55),e.ALo(16,"keyvalue"),e.qZA()()()),2&a){const t=e.oxw();e.xp6(15),e.Q6J("ngForOf",e.lcZ(16,1,t.tab5_messages))}}function ue(a,i){if(1&a&&(e.TgZ(0,"div",51),e._UZ(1,"i",52),e.TgZ(2,"div",53),e._uU(3),e.qZA()()),2&a){const t=e.oxw();e.xp6(3),e.Oqu(t.LoadingMsg)}}function ge(a,i){if(1&a&&(e.TgZ(0,"option",58),e._uU(1),e.qZA()),2&a){const t=i.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function me(a,i){if(1&a&&(e.TgZ(0,"option",58),e._uU(1),e.qZA()),2&a){const t=i.$implicit;e.s9C("value",t.external_id),e.xp6(1),e.hij(" ",t.name," ")}}function he(a,i){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",56),e._uU(4),e.qZA(),e.TgZ(5,"td",57),e._uU(6),e.qZA(),e.TgZ(7,"td",57),e._uU(8),e.qZA(),e.TgZ(9,"td",57),e._uU(10),e.qZA()()),2&a){const t=i.$implicit;e.xp6(2),e.Oqu(t.key),e.xp6(2),e.Oqu(t.value.successCount),e.xp6(2),e.Oqu(t.value.errorCount),e.xp6(2),e.Oqu(t.value.errorIds),e.xp6(2),e.Oqu(t.value.errorElements)}}function pe(a,i){if(1&a&&(e.TgZ(0,"tbody"),e.YNc(1,he,11,5,"tr",55),e.ALo(2,"keyvalue"),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t))}}function fe(a,i){if(1&a&&(e.TgZ(0,"div",9)(1,"table",54)(2,"thead")(3,"tr")(4,"th"),e._uU(5,"El\xe9ment"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"SuccessCount"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"ErrorsCount"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"ErrorsIds"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"ErrorsMsg"),e.qZA()()(),e.YNc(14,pe,3,3,"tbody",55),e.qZA()()),2&a){const t=e.oxw();e.xp6(14),e.Q6J("ngForOf",t.tab6_messages)}}const be=[{path:"",redirectTo:"data",pathMatch:"full"},{path:"data/:cible",component:ie,canActivate:[T.a],data:{title:"Sync Data"}},{path:"sync",component:(()=>{class a{constructor(t,n,r){this.sync=t,this.http=n,this.authService=r,this.tab4_messages=null,this.tab5_messages=null,this.tab6_messages=[],this.dates=[],this.weekly_Choosen_Dates=[],this.is_weekly_date_error=!1,this.weekly_date_error_Msg="",this.start_date_error=!1,this.end_date_error=!1,this.LoadingMsg="Loading...",this.Districts$=[],this.Sites$=[],this.sites$=[]}ngOnInit(){var t=this;this.initDate=_.E.startEnd21and20Date(),this.sync.getDistrictsList().subscribe(function(){var n=(0,p.Z)(function*(r){200==r.status&&(t.Districts$=r.data,t.sync.getSitesList().subscribe(function(){var o=(0,p.Z)(function*(l){200==l.status&&(t.Sites$=l.data)});return function(l){return o.apply(this,arguments)}}(),o=>console.log(o)))});return function(r){return n.apply(this,arguments)}}(),n=>console.log(n)),this.loading4=!1,this.loading5=!1,this.loading6=!1,this.chwsDataForm=this.createChwsDataFormGroup(),this.dhis2ChwsDataForm=this.createDhis2ChwsDataFormGroup(),this.orgUnitAndPersonForm=this.createOrgUnitAndPersonFormGroup()}createOrgUnitAndPersonFormGroup(){return new s.cw({start_date:new s.NI("",[s.kI.required,s.kI.minLength(7)]),end_date:new s.NI("",[s.kI.required,s.kI.minLength(7)]),site:new s.NI(!0,[s.kI.required]),zone:new s.NI(!0,[s.kI.required]),family:new s.NI(!0,[s.kI.required]),patient:new s.NI(!0,[s.kI.required]),chw:new s.NI(!0,[s.kI.required])})}createChwsDataFormGroup(){return new s.cw({start_date:new s.NI(this.initDate.start_date,[s.kI.required,s.kI.minLength(7)]),end_date:new s.NI(this.initDate.end_date,[s.kI.required,s.kI.minLength(7)])})}createDhis2ChwsDataFormGroup(){return new s.cw({start_date:new s.NI(this.initDate.start_date,[s.kI.required,s.kI.minLength(7)]),end_date:new s.NI(this.initDate.end_date,[s.kI.required,s.kI.minLength(7)]),districts:new s.NI("",[s.kI.required]),sites:new s.NI("",[s.kI.required]),username:new s.NI("",[s.kI.required]),password:new s.NI("",[s.kI.required])})}genarateSites(){this.sites$=[];const t=_.F.returnEmptyArrayIfNul(this.dhis2ChwsDataForm.value.districts);if(this.dhis2ChwsDataForm.value.sites="",_.F.notNull(t))for(let n=0;n<this.Sites$.length;n++){const r=this.Sites$[n];_.F.notNull(r)&&t.includes(r.district.id)&&this.sites$.push(r)}else this.sites$=[]}getSiteById(t){for(let n=0;n<this.sites$.length;n++){const r=this.sites$[n];if(r.external_id==t)return r.name}return t}syncOrgUnitsFromCouchDb(){this.loading4=!0,this.tab4_messages=null,this.sync.syncOrgUnits(this.orgUnitAndPersonForm.value).subscribe(t=>{this.loading4=!1,this.tab4_messages=t},t=>{this.loading4=!1,this.tab4_messages=t.error})}syncChwsDataFromCouchDb(){this.loading5=!0,this.tab5_messages=null,this.sync.syncCouchDbChwsData(this.chwsDataForm.value).subscribe(t=>{this.loading5=!1,this.tab5_messages=t},t=>{this.loading5=!1,this.tab5_messages=t.error})}syncChwsDataFromDhis2(){var t=this;return(0,p.Z)(function*(){const n=_.F.returnEmptyArrayIfNul(t.dhis2ChwsDataForm.value.sites);t.tab6_messages=[],t.loading6=!0;for(let o=0;o<n.length;o++)yield t.sync.syncDhis2ChwsData({orgUnit:n[o],filter:[`RlquY86kI66:GE:${t.dhis2ChwsDataForm.value.start_date}:LE:${t.dhis2ChwsDataForm.value.end_date}`],fields:["event","orgUnit","orgUnitName","dataValues[dataElement,value]"],username:t.dhis2ChwsDataForm.value.username,password:t.dhis2ChwsDataForm.value.password}).subscribe(l=>{t.tab6_messages.push(l),t.loading6=!1},l=>{t.loading6=!1,t.tab6_messages.push(l.error)})})()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y._),e.Y36(x.eN),e.Y36(k.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-sync"]],decls:160,vars:14,consts:[[1,"page-content-wrap"],[1,"col-12","col-sm-12"],[1,"card","card-primary","card-tabs"],[1,"card-header","p-0","pt-1"],["id","custom-tabs-one-tab","role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["id","custom-tabs-one-sync-orgunits-tab","data-toggle","pill","href","#custom-tabs-one-sync-orgunits","role","tab","aria-controls","custom-tabs-one-sync-orgunits","aria-selected","true",1,"nav-link","active"],["id","custom-tabs-one-sync-chws-tab","data-toggle","pill","href","#custom-tabs-one-sync-chws","role","tab","aria-controls","custom-tabs-one-sync-chws","aria-selected","false",1,"nav-link"],["id","custom-tabs-one-sync-dhis2-chws-tab","data-toggle","pill","href","#custom-tabs-one-sync-dhis2-chws","role","tab","aria-controls","custom-tabs-one-sync-dhis2-chws","aria-selected","false",1,"nav-link"],[1,"card-body"],["id","custom-tabs-one-tabContent",1,"tab-content"],["id","custom-tabs-one-sync-orgunits","role","tabpanel","aria-labelledby","custom-tabs-one-sync-orgunits-tab",1,"tab-pane","fade","show","active"],[1,"row"],[1,"col-sm-12"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"card","card-default"],[1,"card-header"],[1,"card-title"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-sm-6"],[1,"form-group"],["type","date","formControlName","start_date",1,"form-control"],["type","date","formControlName","end_date",1,"form-control"],[1,"col-sm-2"],[1,"form-check"],["id","useTokenSite","type","checkbox","formControlName","site",1,"form-check-input"],["for","useTokenSite",1,"form-check-label"],["id","useTokenZone","type","checkbox","formControlName","zone",1,"form-check-input"],["for","useTokenZone",1,"form-check-label"],["id","useTokenFamily","type","checkbox","formControlName","family",1,"form-check-input"],["for","useTokenFamily",1,"form-check-label"],["id","useTokenPatient","type","checkbox","formControlName","patient",1,"form-check-input"],["for","useTokenPatient",1,"form-check-label"],["id","useTokenChw","type","checkbox","formControlName","chw",1,"form-check-input"],["for","useTokenChw",1,"form-check-label"],[1,"card-footer"],["type","submit",1,"btn","btn-danger","float-right",3,"disabled"],[1,"fa","fa-floppy-o","fa-right"],["class","card-body",4,"ngIf"],["id","custom-tabs-one-sync-chws","role","tabpanel","aria-labelledby","custom-tabs-one-sync-chws-tab",1,"tab-pane","fade"],[1,"card","card-warning"],["type","submit",1,"btn","btn-warning","float-right",3,"disabled"],["id","custom-tabs-one-sync-dhis2-chws","role","tabpanel","aria-labelledby","custom-tabs-one-sync-dhis2-chws-tab",1,"tab-pane","fade"],[1,"card","card-success"],["type","text","formControlName","username",1,"form-control"],["type","password","formControlName","password",1,"form-control"],["formControlName","districts","multiple","multiple",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","sites","multiple","multiple",1,"form-control"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],["id","sync_chws_datatable",1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[1,"org-unit-success"],[1,"org-unit-error"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),e._uU(7,"Sync OrgUnit "),e.qZA()(),e.TgZ(8,"li",5)(9,"a",7),e._uU(10,"Sync Chws Data "),e.qZA()(),e.TgZ(11,"li",5)(12,"a",8),e._uU(13,"Sync DHIS2 Chws Data "),e.qZA()()()(),e.TgZ(14,"div",9)(15,"div",10)(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14),e.YNc(20,re,4,1,"div",15),e.TgZ(21,"div",16)(22,"div",17)(23,"h3",18),e._uU(24,"Synchroniser OrgUnit, Patients and Chws"),e.qZA()(),e.TgZ(25,"form",19),e.NdJ("ngSubmit",function(){return n.syncOrgUnitsFromCouchDb()}),e.TgZ(26,"div",9)(27,"div",12)(28,"div",20)(29,"div",21)(30,"label"),e._uU(31,"Date de d\xe9but"),e.qZA(),e._UZ(32,"input",22),e.qZA()(),e.TgZ(33,"div",20)(34,"div",21)(35,"label"),e._uU(36,"Date de fin"),e.qZA(),e._UZ(37,"input",23),e.qZA()()(),e.TgZ(38,"div",12)(39,"div",24)(40,"div",21)(41,"div",25),e._UZ(42,"input",26),e.TgZ(43,"label",27),e._uU(44," Site"),e.qZA()()()(),e.TgZ(45,"div",24)(46,"div",21)(47,"div",25),e._UZ(48,"input",28),e.TgZ(49,"label",29),e._uU(50," Zone"),e.qZA()()()(),e.TgZ(51,"div",24)(52,"div",21)(53,"div",25),e._UZ(54,"input",30),e.TgZ(55,"label",31),e._uU(56," Family"),e.qZA()()()(),e.TgZ(57,"div",24)(58,"div",21)(59,"div",25),e._UZ(60,"input",32),e.TgZ(61,"label",33),e._uU(62," Patient"),e.qZA()()()(),e.TgZ(63,"div",24)(64,"div",21)(65,"div",25),e._UZ(66,"input",34),e.TgZ(67,"label",35),e._uU(68," Chw"),e.qZA()()()()()(),e.TgZ(69,"div",36)(70,"button",37),e._uU(71," D\xe9marrer la synchronisation "),e._UZ(72,"span",38),e.qZA()()()()()()(),e.TgZ(73,"div",12)(74,"div",13),e.YNc(75,le,17,3,"div",39),e.qZA()()(),e.TgZ(76,"div",40)(77,"div",12)(78,"div",13)(79,"div",14),e.YNc(80,de,4,1,"div",15),e.TgZ(81,"div",41)(82,"div",17)(83,"h3",18),e._uU(84,"Syncroniser les donn\xe9es Tonoudayo des ASC"),e.qZA()(),e.TgZ(85,"form",19),e.NdJ("ngSubmit",function(){return n.syncChwsDataFromCouchDb()}),e.TgZ(86,"div",9)(87,"div",12)(88,"div",20)(89,"div",21)(90,"label"),e._uU(91,"Date de d\xe9but"),e.qZA(),e._UZ(92,"input",22),e.qZA()(),e.TgZ(93,"div",20)(94,"div",21)(95,"label"),e._uU(96,"Date de fin"),e.qZA(),e._UZ(97,"input",23),e.qZA()()()(),e.TgZ(98,"div",36)(99,"button",42),e._uU(100," Synchroniser des donn\xe9es"),e._UZ(101,"span",38),e.qZA()()()()()()(),e.TgZ(102,"div",12)(103,"div",13),e.YNc(104,ce,17,3,"div",39),e.qZA()()(),e.TgZ(105,"div",43)(106,"div",12)(107,"div",13)(108,"div",14),e.YNc(109,ue,4,1,"div",15),e.TgZ(110,"div",44)(111,"div",17)(112,"h3",18),e._uU(113,"Synchroniser les donn\xe9es Dhis2 des ASC"),e.qZA()(),e.TgZ(114,"form",19),e.NdJ("ngSubmit",function(){return n.syncChwsDataFromDhis2()}),e.TgZ(115,"div",9)(116,"div",12)(117,"div",20)(118,"div",21)(119,"label"),e._uU(120,"Date de d\xe9but"),e.qZA(),e._UZ(121,"input",22),e.qZA()(),e.TgZ(122,"div",20)(123,"div",21)(124,"label"),e._uU(125,"Date de fin"),e.qZA(),e._UZ(126,"input",23),e.qZA()()(),e.TgZ(127,"div",12)(128,"div",20)(129,"div",21)(130,"label"),e._uU(131,"DHIS2 USERNAME"),e.qZA(),e._UZ(132,"input",45),e.qZA()(),e.TgZ(133,"div",20)(134,"div",21)(135,"label"),e._uU(136,"DHIS2 PASSWORD"),e.qZA(),e._UZ(137,"input",46),e.qZA()()(),e.TgZ(138,"div",12)(139,"div",20)(140,"div",21)(141,"label"),e._uU(142,"District"),e.qZA(),e.TgZ(143,"select",47),e.NdJ("change",function(){return n.genarateSites()}),e._UZ(144,"option",48),e.YNc(145,ge,2,2,"option",49),e.qZA()()(),e.TgZ(146,"div",20)(147,"div",21)(148,"label"),e._uU(149,"Site"),e.qZA(),e.TgZ(150,"select",50),e._UZ(151,"option",48),e.YNc(152,me,2,2,"option",49),e.qZA()()()()(),e.TgZ(153,"div",36)(154,"button",42),e._uU(155," Charger les donn\xe9es "),e._UZ(156,"span",38),e.qZA()()()()()()(),e.TgZ(157,"div",12)(158,"div",13),e.YNc(159,fe,15,1,"div",39),e.qZA()()()()()()()()),2&t&&(e.xp6(20),e.Q6J("ngIf",n.loading4),e.xp6(5),e.Q6J("formGroup",n.orgUnitAndPersonForm),e.xp6(45),e.Q6J("disabled",!n.orgUnitAndPersonForm.valid),e.xp6(5),e.Q6J("ngIf",null!=n.tab4_messages),e.xp6(5),e.Q6J("ngIf",n.loading5),e.xp6(5),e.Q6J("formGroup",n.chwsDataForm),e.xp6(14),e.Q6J("disabled",!n.chwsDataForm.valid),e.xp6(5),e.Q6J("ngIf",null!=n.tab5_messages),e.xp6(5),e.Q6J("ngIf",n.loading6),e.xp6(5),e.Q6J("formGroup",n.dhis2ChwsDataForm),e.xp6(31),e.Q6J("ngForOf",n.Districts$),e.xp6(7),e.Q6J("ngForOf",n.sites$),e.xp6(2),e.Q6J("disabled",!n.dhis2ChwsDataForm.valid),e.xp6(5),e.Q6J("ngIf",n.tab6_messages.length>0))},dependencies:[g.sg,g.O5,s._Y,s.YN,s.Kr,s.Fj,s.Wl,s.K7,s.JJ,s.JL,s.sg,s.u,g.Nd],styles:["input[type=checkbox]:checked{filter:invert(90%) hue-rotate(45deg) brightness(1.7);height:18px;width:18px;transform:rotate(-45deg)}input[type=checkbox]{height:18px;width:18px}.form-check-label{margin-top:5px;margin-left:5px}.mat-calendar-body-cell.notSelected{background-color:#4682b4;border-radius:100%;width:50px;height:50px}.mat-calendar-body-cell.selected{background-color:red!important;border-radius:100%;width:50px;height:50px}.results{background-color:#ffebcd;min-height:100px;width:500px}.org-unit-success{padding-left:10px;color:green}.org-unit-error{padding-left:20px;color:red}.borderError{border:solid red 2px}.danger{color:red;font-weight:700}.warning{color:orange;font-weight:700}.infos{color:#8a2be2;font-weight:700}.good{font-weight:700}\n"],encapsulation:2}),a})(),canActivate:[T.a],data:{title:"Sync OrgUnit & Data"}}];let Ze=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[h.Bz.forChild(be),h.Bz]}),a})(),Te=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[g.ez,s.UX,Ze]}),a})()}}]);