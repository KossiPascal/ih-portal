"use strict";(self.webpackChunkih_portal=self.webpackChunkih_portal||[]).push([["src_app_modules_admin_admin_module_ts"],{8705:(me,C,d)=>{d.r(C),d.d(C,{AdminModule:()=>pe});var p=d(8692),m=d(3580),u=d(8239),a=d(92),c=d(8629),e=d(4537),f=d(3395),g=d(7556),M=d(3406);function R(i,r){if(1&i&&(e.TgZ(0,"div",32),e._UZ(1,"i",33),e.TgZ(2,"div",34),e._uU(3),e.qZA()()),2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.initMsg,"")}}function w(i,r){if(1&i&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t.name),e.xp6(1),e.hij(" ",t.table," ")}}function y(i,r){if(1&i&&(e.TgZ(0,"div",32),e._UZ(1,"i",33),e.TgZ(2,"div",34),e._uU(3),e.qZA()()),2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.initMsg,"")}}function F(i,r){if(1&i&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function D(i,r){if(1&i&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function N(i,r){if(1&i&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function k(i,r){if(1&i&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function L(i,r){if(1&i&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",t.toUpperCase()," ")}}function J(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteSelectedDataFromCouchDb())}),e._uU(1," Delete Selected Data From CouchDb "),e.qZA()}}function E(i,r){if(1&i&&(e.TgZ(0,"tbody")(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA()()()),2&i){const t=r.$implicit;e.xp6(3),e.Oqu(t.id),e.xp6(2),e.Oqu(t.rev),e.xp6(2),e.Oqu(t.zone.name),e.xp6(2),e.Oqu(t.site.name)}}let O=(()=>{class i{constructor(t,s,o,n){this.sync=t,this.auth=s,this.dbUtils=o,this.router=n,this.responseMsg="",this.foundedDataToDelete=[],this.selectedListToBeDelete=[],this.Districts$=[],this.Sites$=[],this.Zones$=[],this.Chws$=[],this.sites$=[],this.zones$=[],this.chws$=[],this.types$=["data","patients","families"],this.constMsg="Loading...",this.initMsg=this.constMsg,this.EntitiesList$=[],this.initEntity=[]}createEntitiesFilterFormGroup(){return new a.cw({entities:new a.NI([],[a.kI.required])})}dataListToDeleteFilterFormGroup(){return new a.cw({start_date:new a.NI("",[a.kI.required,a.kI.minLength(7)]),end_date:new a.NI("",[a.kI.required,a.kI.minLength(7)]),sources:new a.NI("Tonoudayo",[a.kI.required]),districts:new a.NI("",[a.kI.required]),sites:new a.NI("",[a.kI.required]),zones:new a.NI("",[a.kI.required]),chws:new a.NI("",[a.kI.required]),type:new a.NI("",[a.kI.required])})}ngOnInit(){this.EntitiesForm=this.createEntitiesFilterFormGroup(),this.dataListToDeleteForm=this.dataListToDeleteFilterFormGroup(),this.initAllData()}initAllData(){var t=this;return(0,u.Z)(function*(){t.isLoading=!0,t.initMsg="Chargement des Entities ...",t.dbUtils.getDatabaseEntities().subscribe(function(){var s=(0,u.Z)(function*(o){200==o.status&&(t.EntitiesList$=o.data),t.initMsg="Chargement des Districts ...",t.sync.getDistrictsList().subscribe(function(){var n=(0,u.Z)(function*(l){200==l.status&&(t.Districts$=l.data),t.initMsg="Chargement des Sites ...",t.sync.getSitesList().subscribe(function(){var Z=(0,u.Z)(function*(b){200==b.status&&(t.Sites$=b.data),t.initMsg="Chargement des Zones ...",t.sync.getZonesList().subscribe(function(){var v=(0,u.Z)(function*(T){200==T.status&&(t.Zones$=T.data),t.initMsg="Chargement des ASC ...",t.sync.getChwsList().subscribe(function(){var U=(0,u.Z)(function*(A){200==A.status&&(t.Chws$=A.data),t.isLoading=!1});return function(A){return U.apply(this,arguments)}}(),U=>{t.isLoading=!1,console.log(U.error)})});return function(T){return v.apply(this,arguments)}}(),v=>{t.isLoading=!1,console.log(v.error)})});return function(b){return Z.apply(this,arguments)}}(),Z=>{t.isLoading=!1,console.log(Z.error)})});return function(l){return n.apply(this,arguments)}}(),n=>{t.isLoading=!1,console.log(n.error)})});return function(o){return s.apply(this,arguments)}}(),s=>{t.isLoading=!1,console.log(s.error)})})()}EntitiesSelectedList(){var t=[];const s=(0,c.Dk)(this.EntitiesForm.value.entities);this.initEntity=s;for(let o=0;o<this.EntitiesList$.length;o++){const n=this.EntitiesList$[o];s.includes(n.name)&&t.push(n)}return t}TruncateBd(){var t=this;const s=this.EntitiesSelectedList();s.length>0&&(this.responseMsg="",this.initMsg=this.constMsg,this.isEntityLoading=!0,this.dbUtils.truncateDatabase({procide:!0,entities:s}).subscribe(function(){var o=(0,u.Z)(function*(n){t.responseMsg=n.data.toString(),200==n.status&&(t.initEntity=[]),t.isEntityLoading=!1});return function(n){return o.apply(this,arguments)}}(),o=>{console.log(o.error),this.isEntityLoading=!1,this.responseMsg=o.toString()}))}getListOfDataToDeleteFromCouchDb(){var t=this;this.initMsg=this.constMsg,this.isLoading=!0,this.foundedDataToDelete=[],this.selectedListToBeDelete=[],this.responseMsg="",this.dbUtils.getDataToDeleteFromCouchDb(this.ParamsToFilter()).subscribe(function(){var s=(0,u.Z)(function*(o){if(200==o.status){t.foundedDataToDelete=o.data;for(let n=0;n<t.foundedDataToDelete.length;n++){const l=t.foundedDataToDelete[n];t.selectedListToBeDelete.push({_deleted:!0,_id:l.id,_rev:l.rev})}}else t.responseMsg=o.data;t.isLoading=!1});return function(o){return s.apply(this,arguments)}}(),s=>{console.log(s.error),this.isLoading=!1,this.responseMsg=s.toString()})}deleteSelectedDataFromCouchDb(){var t=this;this.initMsg=this.constMsg,this.responseMsg="",this.selectedListToBeDelete.length>0?this.dbUtils.deleteDataFromCouchDb(this.selectedListToBeDelete,this.dataListToDeleteForm.value.type).subscribe(function(){var s=(0,u.Z)(function*(o){200==o.status?(t.responseMsg="Done successfuly !",t.foundedDataToDelete=[],t.selectedListToBeDelete=[]):t.responseMsg="Problem with query, retry!"});return function(o){return s.apply(this,arguments)}}(),s=>{console.log(s),this.responseMsg="Error found when deleting ..."}):this.responseMsg="Not data provied!"}ParamsToFilter(){return{start_date:this.dataListToDeleteForm.value.start_date,end_date:this.dataListToDeleteForm.value.end_date,sources:(0,c.pb)(this.dataListToDeleteForm.value.sources),districts:(0,c.pb)(this.dataListToDeleteForm.value.districts),sites:(0,c.pb)(this.dataListToDeleteForm.value.sites),zones:(0,c.pb)(this.dataListToDeleteForm.value.zones),chws:(0,c.pb)(this.dataListToDeleteForm.value.chws),type:this.dataListToDeleteForm.value.type,withDhis2Data:!1}}genarateSites(){this.sites$=[],this.zones$=[],this.chws$=[];const t=this.dataListToDeleteForm.value.districts;if(this.dataListToDeleteForm.value.sites="",this.dataListToDeleteForm.value.chws="",(0,c.Nf)(t))for(let s=0;s<this.Sites$.length;s++){const o=this.Sites$[s];(0,c.Nf)(o)&&t==o.district.id&&this.sites$.push(o)}else this.sites$=[]}genarateZones(){this.zones$=[],this.chws$=[];const t=this.dataListToDeleteForm.value.sites;if(this.dataListToDeleteForm.value.zones="",this.dataListToDeleteForm.value.chws="",(0,c.Nf)(t))for(let s=0;s<this.Zones$.length;s++){const o=this.Zones$[s];(0,c.Nf)(t)&&t==o.site.id&&this.zones$.push(o)}else this.zones$=[]}genarateChws(){this.chws$=[];const t=this.dataListToDeleteForm.value.zones;if(this.dataListToDeleteForm.value.chws="",(0,c.Nf)(t))for(let s=0;s<this.Chws$.length;s++){const o=this.Chws$[s];(0,c.Nf)(o)&&t==o.zone.id&&this.chws$.push(o)}else this.chws$=[]}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f._),e.Y36(g.e),e.Y36(M.W),e.Y36(m.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user"]],decls:105,vars:15,consts:[[2,"color","red"],[1,"content-header"],[1,"container-fluid"],[1,"card","card-info"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"card-header"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-4","col-6"],[1,"form-group"],["formControlName","entities","multiple","multiple",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-danger","form-control",3,"disabled"],[1,"fa","fa-floppy-o","fa-right"],[1,"col-sm-3","col-6"],["type","date","formControlName","start_date",1,"form-control"],["type","date","formControlName","end_date",1,"form-control"],["formControlName","districts",1,"form-control",3,"change"],["formControlName","sites",1,"form-control",3,"change"],["formControlName","zones",1,"form-control",3,"change"],["formControlName","chws",1,"form-control"],["formControlName","type",1,"form-control"],[1,"col-sm-2","col-6"],["type","submit",1,"btn","btn-warning","form-control",3,"disabled"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"panel-body"],["type","button","class","btn btn-warning",3,"click",4,"ngIf"],[1,"table","datatable"],[4,"ngFor","ngForOf"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],[3,"value"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.TgZ(2,"section",1)(3,"div",2)(4,"h2"),e._uU(5,"Truncate Database"),e.qZA(),e.TgZ(6,"div",3)(7,"div",4),e.YNc(8,R,4,1,"div",5),e.TgZ(9,"div",6)(10,"form",7),e.NdJ("ngSubmit",function(){return s.TruncateBd()}),e.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"label"),e._uU(15,"Entities"),e.qZA(),e.TgZ(16,"select",11),e._UZ(17,"option",12),e.YNc(18,w,2,2,"option",13),e.qZA()()(),e.TgZ(19,"div",9)(20,"div",10)(21,"label"),e._uU(22,"."),e.qZA(),e.TgZ(23,"button",14),e._uU(24," Truncate Progres database "),e._UZ(25,"span",15),e.qZA()()()()()()()()()(),e.TgZ(26,"section",1)(27,"div",2)(28,"h2"),e._uU(29,"Delete Chws Data From Couch Database (Tonoudayo App)"),e.qZA(),e.TgZ(30,"div",3)(31,"div",4),e.YNc(32,y,4,1,"div",5),e.TgZ(33,"div",6)(34,"form",7),e.NdJ("ngSubmit",function(){return s.getListOfDataToDeleteFromCouchDb()}),e.TgZ(35,"div",8)(36,"div",16)(37,"div",10)(38,"label"),e._uU(39,"Date D\xe9but"),e.qZA(),e._UZ(40,"input",17),e.qZA()(),e.TgZ(41,"div",16)(42,"div",10)(43,"label"),e._uU(44,"Date Fin"),e.qZA(),e._UZ(45,"input",18),e.qZA()(),e.TgZ(46,"div",16)(47,"div",10)(48,"label"),e._uU(49,"District"),e.qZA(),e.TgZ(50,"select",19),e.NdJ("change",function(){return s.genarateSites()}),e._UZ(51,"option",12),e.YNc(52,F,2,2,"option",13),e.qZA()()(),e.TgZ(53,"div",16)(54,"div",10)(55,"label"),e._uU(56,"Site"),e.qZA(),e.TgZ(57,"select",20),e.NdJ("change",function(){return s.genarateZones()}),e._UZ(58,"option",12),e.YNc(59,D,2,2,"option",13),e.qZA()()(),e.TgZ(60,"div",16)(61,"div",10)(62,"label"),e._uU(63,"Zone"),e.qZA(),e.TgZ(64,"select",21),e.NdJ("change",function(){return s.genarateChws()}),e._UZ(65,"option",12),e.YNc(66,N,2,2,"option",13),e.qZA()()(),e.TgZ(67,"div",16)(68,"div",10)(69,"label"),e._uU(70,"Chw"),e.qZA(),e.TgZ(71,"select",22),e._UZ(72,"option",12),e.YNc(73,k,2,2,"option",13),e.qZA()()(),e.TgZ(74,"div",16)(75,"div",10)(76,"label"),e._uU(77,"Type"),e.qZA(),e.TgZ(78,"select",23),e._UZ(79,"option",12),e.YNc(80,L,2,2,"option",13),e.qZA()()(),e.TgZ(81,"div",24)(82,"div",10)(83,"label"),e._uU(84,"."),e.qZA(),e.TgZ(85,"button",25),e._uU(86," OK "),e._UZ(87,"span",15),e.qZA()()()()()()(),e.TgZ(88,"div",26),e._UZ(89,"div",27),e.TgZ(90,"div",28),e.YNc(91,J,2,0,"button",29),e._UZ(92,"br"),e.TgZ(93,"table",30)(94,"thead")(95,"tr")(96,"th"),e._uU(97,"ID"),e.qZA(),e.TgZ(98,"th"),e._uU(99,"REV"),e.qZA(),e.TgZ(100,"th"),e._uU(101,"Zone Name"),e.qZA(),e.TgZ(102,"th"),e._uU(103,"Site"),e.qZA()()(),e.YNc(104,E,10,4,"tbody",31),e.qZA()()()()()()),2&t&&(e.xp6(1),e.hij(" ",s.responseMsg," "),e.xp6(7),e.Q6J("ngIf",s.isEntityLoading),e.xp6(2),e.Q6J("formGroup",s.EntitiesForm),e.xp6(8),e.Q6J("ngForOf",s.EntitiesList$),e.xp6(5),e.Q6J("disabled",!s.EntitiesForm.valid&&s.initEntity.length<=0),e.xp6(9),e.Q6J("ngIf",s.isLoading),e.xp6(2),e.Q6J("formGroup",s.dataListToDeleteForm),e.xp6(18),e.Q6J("ngForOf",s.Districts$),e.xp6(7),e.Q6J("ngForOf",s.sites$),e.xp6(7),e.Q6J("ngForOf",s.zones$),e.xp6(7),e.Q6J("ngForOf",s.chws$),e.xp6(7),e.Q6J("ngForOf",s.types$),e.xp6(5),e.Q6J("disabled",!s.dataListToDeleteForm.valid),e.xp6(6),e.Q6J("ngIf",s.selectedListToBeDelete.length>0),e.xp6(13),e.Q6J("ngForOf",s.foundedDataToDelete))},dependencies:[p.sg,p.O5,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.K7,a.JJ,a.JL,a.sg,a.u],encapsulation:2}),i})(),S=(()=>{class i{constructor(t,s,o){this.route=t,this.router=s,this.auth=o}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.gz),e.Y36(m.F0),e.Y36(g.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:29,vars:0,consts:[[1,"card","card-primary","card-outline"],[1,"card-header"],[1,"card-title"],[1,"fas","fa-edit"],[1,"card-body"],[1,"row"],[1,"col-3","col-sm-2"],["id","vert-tabs-tab","role","tablist","aria-orientation","vertical",1,"nav","flex-column","nav-tabs","h-100"],["id","vert-tabs-home-tab","data-toggle","pill","href","#vert-tabs-home","role","tab","aria-controls","vert-tabs-home","aria-selected","true",1,"nav-link","active"],["id","vert-tabs-profile-tab","data-toggle","pill","href","#vert-tabs-profile","role","tab","aria-controls","vert-tabs-profile","aria-selected","false",1,"nav-link"],["id","vert-tabs-messages-tab","data-toggle","pill","href","#vert-tabs-messages","role","tab","aria-controls","vert-tabs-messages","aria-selected","false",1,"nav-link"],["id","vert-tabs-settings-tab","data-toggle","pill","href","#vert-tabs-settings","role","tab","aria-controls","vert-tabs-settings","aria-selected","false",1,"nav-link"],[1,"col-9","col-sm-10"],["id","vert-tabs-tabContent",1,"tab-content"],["id","vert-tabs-home","role","tabpanel","aria-labelledby","vert-tabs-home-tab",1,"tab-pane","text-left","fade","show","active"],["id","vert-tabs-profile","role","tabpanel","aria-labelledby","vert-tabs-profile-tab",1,"tab-pane","fade"],["id","vert-tabs-messages","role","tabpanel","aria-labelledby","vert-tabs-messages-tab",1,"tab-pane","fade"],["id","vert-tabs-settings","role","tabpanel","aria-labelledby","vert-tabs-settings-tab",1,"tab-pane","fade"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._UZ(3,"i",3),e._uU(4," Vertical Tabs Examples "),e.qZA()(),e.TgZ(5,"div",4)(6,"h4"),e._uU(7,"Left Sided"),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"a",8),e._uU(12,"Doc1"),e.qZA(),e.TgZ(13,"a",9),e._uU(14,"Doc2"),e.qZA(),e.TgZ(15,"a",10),e._uU(16,"Doc3"),e.qZA(),e.TgZ(17,"a",11),e._uU(18,"Doc4"),e.qZA()()(),e.TgZ(19,"div",12)(20,"div",13)(21,"div",14),e._uU(22," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin malesuada lacus ullamcorper dui molestie, sit amet congue quam finibus. Etiam ultricies nunc non magna feugiat commodo. Etiam odio magna, mollis auctor felis vitae, ullamcorper ornare ligula. Proin pellentesque tincidunt nisi, vitae ullamcorper felis aliquam id. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin id orci eu lectus blandit suscipit. Phasellus porta, ante et varius ornare, sem enim sollicitudin eros, at commodo leo est vitae lacus. Etiam ut porta sem. Proin porttitor porta nisl, id tempor risus rhoncus quis. In in quam a nibh cursus pulvinar non consequat neque. Mauris lacus elit, condimentum ac condimentum at, semper vitae lectus. Cras lacinia erat eget sapien porta consectetur. "),e.qZA(),e.TgZ(23,"div",15),e._uU(24," Mauris tincidunt mi at erat gravida, eget tristique urna bibendum. Mauris pharetra purus ut ligula tempor, et vulputate metus facilisis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Maecenas sollicitudin, nisi a luctus interdum, nisl ligula placerat mi, quis posuere purus ligula eu lectus. Donec nunc tellus, elementum sit amet ultricies at, posuere nec nunc. Nunc euismod pellentesque diam. "),e.qZA(),e.TgZ(25,"div",16),e._uU(26," Morbi turpis dolor, vulputate vitae felis non, tincidunt congue mauris. Phasellus volutpat augue id mi placerat mollis. Vivamus faucibus eu massa eget condimentum. Fusce nec hendrerit sem, ac tristique nulla. Integer vestibulum orci odio. Cras nec augue ipsum. Suspendisse ut velit condimentum, mattis urna a, malesuada nunc. Curabitur eleifend facilisis velit finibus tristique. Nam vulputate, eros non luctus efficitur, ipsum odio volutpat massa, sit amet sollicitudin est libero sed ipsum. Nulla lacinia, ex vitae gravida fermentum, lectus ipsum gravida arcu, id fermentum metus arcu vel metus. Curabitur eget sem eu risus tincidunt eleifend ac ornare magna. "),e.qZA(),e.TgZ(27,"div",17),e._uU(28," Pellentesque vestibulum commodo nibh nec blandit. Maecenas neque magna, iaculis tempus turpis ac, ornare sodales tellus. Mauris eget blandit dolor. Quisque tincidunt venenatis vulputate. Morbi euismod molestie tristique. Vestibulum consectetur dolor a vestibulum pharetra. Donec interdum placerat urna nec pharetra. Etiam eget dapibus orci, eget aliquet urna. Nunc at consequat diam. Nunc et felis ut nisl commodo dignissim. In hac habitasse platea dictumst. Praesent imperdiet accumsan ex sit amet facilisis. "),e.qZA()()()()()())},encapsulation:2}),i})();var q=d(5128),_=d(8527);function I(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"h3",68),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.EditUser(o))}),e._UZ(1,"i",69),e._uU(2," Modifier "),e.qZA()}}function G(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"h3",70),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.UserSelected(o))}),e._UZ(1,"i",71),e._uU(2," Supprimer "),e.qZA()}}function P(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tbody")(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td")(11,"i",59),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.ShowRoles(n))}),e._UZ(12,"i",60),e.qZA()(),e._UZ(13,"td"),e.TgZ(14,"td")(15,"span",61),e._uU(16),e.qZA()(),e.TgZ(17,"td")(18,"span",61),e._uU(19),e.qZA()(),e.TgZ(20,"td")(21,"span",62)(22,"a",63),e._UZ(23,"i",64),e.qZA(),e.TgZ(24,"div",65),e._UZ(25,"br"),e.TgZ(26,"h3"),e._uU(27),e.qZA(),e.YNc(28,I,3,0,"h3",66),e.YNc(29,G,3,0,"h3",67),e.qZA()()()()()}if(2&i){const t=r.$implicit,s=r.index,o=e.oxw();e.xp6(3),e.Oqu(s+1),e.xp6(2),e.Oqu(t.username),e.xp6(2),e.Oqu(t.fullname),e.xp6(2),e.Oqu(t.email),e.xp6(7),e.Oqu(t.isActive?"":"\u2713"),e.xp6(3),e.Oqu(o.isSuperUser(t.roles)?"\u2713":""),e.xp6(8),e.hij("ID: ",t.id,""),e.xp6(1),e.Q6J("ngIf",!0),e.xp6(1),e.Q6J("ngIf",!0)}}function Q(i,r){if(1&i&&(e.TgZ(0,"p",56)(1,"strong"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.message)}}function Y(i,r){1&i&&(e.TgZ(0,"label",72),e._uU(1,"Username"),e.qZA())}function z(i,r){1&i&&(e.TgZ(0,"label",73),e._uU(1,"Full Name"),e.qZA())}function j(i,r){1&i&&(e.TgZ(0,"label",74),e._uU(1,"Email"),e.qZA())}function K(i,r){1&i&&(e.TgZ(0,"label",75),e._uU(1,"Password"),e.qZA())}function H(i,r){1&i&&(e.TgZ(0,"label",76),e._uU(1,"Password Confirm"),e.qZA())}function B(i,r){1&i&&(e.TgZ(0,"div",77),e._uU(1," Password does not match "),e.qZA())}function V(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"p")(1,"input",78),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.AddOrRemoveRole(n.id))}),e.qZA(),e.TgZ(2,"span",79),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.AddOrRemoveRole(n.id))}),e._uU(3),e.qZA()()}if(2&i){const t=r.$implicit,s=e.oxw();e.xp6(1),e.Q6J("checked",s.containsRole(t.id)),e.xp6(2),e.hij(" ",t.name,"")}}function X(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"p")(1,"input",78),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.AddOrRemoveMR(n.id))}),e.qZA(),e.TgZ(2,"span",79),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.AddOrRemoveMR(n.id))}),e._uU(3),e.qZA()()}if(2&i){const t=r.$implicit,s=e.oxw();e.xp6(1),e.Q6J("checked",s.containsMR(t.id)),e.xp6(2),e.hij(" ",t.name," ")}}function W(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"p")(1,"input",78),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.AddOrRemoveRole(n.id))}),e.qZA(),e.TgZ(2,"span",79),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.AddOrRemoveRole(n.id))}),e._uU(3),e.qZA()()}if(2&i){const t=r.$implicit,s=e.oxw();e.xp6(1),e.Q6J("checked",s.containsRole(t.id)),e.xp6(2),e.hij(" ",t.name,"")}}function ee(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"p")(1,"input",78),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.AddOrRemoveMR(n.id))}),e.qZA(),e.TgZ(2,"span",79),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.AddOrRemoveMR(n.id))}),e._uU(3),e.qZA()()}if(2&i){const t=r.$implicit,s=e.oxw();e.xp6(1),e.Q6J("checked",s.containsMR(t.id)),e.xp6(2),e.hij(" ",t.name," ")}}let te=(()=>{class i{constructor(t,s,o){this.auth=t,this.sync=s,this.router=o,this.users$=[],this.roles$=[],this.MeetingReport$=[],this.isLoginForm=!1,this.isLoading=!1,this.LoadingMsg="Loading...",this.isEditMode=!1,this.message="",this.APP_LOGO=q.z.APP_LOGO,this.selectedRole=[],this.selectedMR=[]}activeSave(){throw new Error("Method not implemented.")}ngOnInit(){this.getUsers(),this.GetTeams(),this.GetUserRoles(),this.userForm=this.createFormGroup()}GetUserRoles(){var t=this;this.auth.GetAllRoles().subscribe(function(){var s=(0,u.Z)(function*(o){200==o.status&&(t.roles$=o.data)});return function(o){return s.apply(this,arguments)}}(),s=>{})}GetTeams(){var t=this;this.sync.GetTeams().subscribe(function(){var s=(0,u.Z)(function*(o){200==o.status&&(t.MeetingReport$=o.data.sort((n,l)=>n.name.localeCompare(l.name)))});return function(o){return s.apply(this,arguments)}}(),s=>{})}getUsers(){this.auth.getAllUsers().subscribe(t=>{if(200===t.status){this.users$=[];const s=t.data;for(let o=0;o<s.length;o++)this.users$.push(s[o])}else console.log(t.data)},t=>{console.log(t.error)})}EditUser(t){this.isEditMode=!0,this.userForm=this.createFormGroup(t),this.selectedRole=(0,_.p)(t.roles,"idsString")??[],this.selectedMR=t.meeting_report??[],this.UserSelected(t)}UserSelected(t){this.selectedUser=t,this.message=""}DeleteUser(){this.isEditMode=!1,this.selectedUser&&this.auth.deleteUser(this.selectedUser).subscribe(t=>{200===t.status?(this.showModalToast("success","Supprim\xe9 avec success"),this.getUsers(),this.selectedUser=null,this.selectedRole=[],this.selectedMR=[],this.isLoading=!1,this.message=""):this.message=t.data},t=>{this.message=t,this.isLoading=!1})}CreateUser(){this.isEditMode=!1,this.userForm=this.createFormGroup(),this.selectedUser=null,this.selectedRole=[],this.selectedMR=[],this.message=""}createFormGroup(t){const s={username:new a.NI(null!=t?t.username:"",[a.kI.required,a.kI.minLength(4)]),fullname:new a.NI(null!=t?t.fullname:""),email:new a.NI(null!=t?t.email:""),password:new a.NI("",this.isEditMode?[]:[a.kI.required,a.kI.minLength(8)]),passwordConfirm:new a.NI("",this.isEditMode?[]:[a.kI.required,a.kI.minLength(8)]),isActive:new a.NI(null!=t&&t.isActive)},o=[this.MatchValidator("password","passwordConfirm")];return this.isEditMode&&s.username.disable(),new a.cw(s,o)}passwordMatchError(){return this.userForm.getError("password")&&this.userForm.get("passwordConfirm")?.touched}showModalToast(t,s){showToast(t,s),this.closeModal("close-delete-modal")}closeModal(t="close-modal"){$("#"+t).trigger("click")}MatchValidator(t,s){return o=>{const n=o.get(t),l=o.get(s);if(n&&l){if(n.value!==l.value)return{mismatch:!0};if(this.isEditMode&&((0,c.Nf)(n.value)&&n.value.length<8||(0,c.Nf)(l.value)&&l.value.length<8))return{mismatch:!0}}return null}}ToStringNewLine(t,s){return`${t}`.toString().replace(/,/g,"<br>")}isSuperUser(t){const s=(0,_.p)(t,"names");return!!s&&s.includes("super_admin")}ShowRoles(t){this.selectedRole=(0,_.p)(t.roles,"idsString")??[],this.selectedMR=t.meeting_report??[]}registerOrUpdate(){if(this.auth.isLoggedIn()){var t;if(this.isEditMode){if(this.selectedUser){this.selectedUser.fullname=this.userForm.value.fullname,this.selectedUser.email=this.userForm.value.email,this.selectedUser.roles=this.selectedRole,this.selectedUser.meeting_report=this.selectedMR,this.selectedUser.isActive=this.userForm.value.isActive;const s=this.selectedUser;(0,c.Nf)(this.userForm.value.password)&&(0,c.Nf)(this.userForm.value.passwordConfirm)&&(s.password=this.userForm.value.password),t=this.auth.updateUser(s)}}else delete this.userForm.value.passwordConfirm,this.userForm.value.roles=this.selectedRole,this.userForm.value.meeting_report=this.selectedMR,t=this.auth.register(this.userForm.value,!0);if(t)return t.subscribe(s=>{if(200===s.status){this.message="Registed successfully !",this.closeModal(),this.getUsers();const o=this.auth.currentUser(),n=s.data;o&&n&&o.id==n.id&&this.auth.setUser(n),this.selectedUser=null,this.selectedRole=[],this.selectedMR=[],this.message=""}else this.message=s.data;this.isLoading=!1},s=>{this.isLoading=!1})}}containsRole(t){return this.selectedRole.includes(`${t}`)}AddOrRemoveRole(t){const s=this.selectedRole.indexOf(`${t}`);-1!==s?this.selectedRole.splice(s,1):this.selectedRole.push(`${t}`)}SelectAllRoles(){this.selectedRole=this.selectedRole.length==this.roles$.length?[]:this.roles$.filter(t=>(0,c.Nf)(t?.id)).map(t=>t?.id?`${t?.id}`:"")}containsMR(t){return!!t&&this.selectedMR.includes(`${t}`)}SelectAllMRs(){this.selectedMR=this.selectedMR.length==this.MeetingReport$.length?[]:this.MeetingReport$.filter(t=>(0,c.Nf)(t?.id)).map(t=>t?.id?`${t?.id}`:"")}AddOrRemoveMR(t){if(t){const s=this.selectedMR.indexOf(`${t}`);-1!==s?this.selectedMR.splice(s,1):this.selectedMR.push(`${t}`)}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.e),e.Y36(f._),e.Y36(m.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user"]],decls:148,vars:29,consts:[[1,"page-title","card","card-primary","card-outline"],[1,"card-body"],[1,"fas","fa-user",2,"float","left"],["type","button","data-toggle","modal","data-target","#modal-default",1,"btn","btn-default",2,"float","right",3,"click"],[1,"page-content-wrap"],[1,"row"],[1,"col-md-12"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"panel-body"],[1,"table","datatable"],[4,"ngFor","ngForOf"],["id","modal-default",1,"modal","fade"],[1,"modal-dialog"],["novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"modal-content"],[1,"modal-header"],["height","30","alt","","srcset","",1,"modal-title",3,"src"],[1,"login-box-msg",2,"text-align","center"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["class","login-box-msg",4,"ngIf"],["for","username",4,"ngIf"],[1,"input-group","mb-3"],["id","username","type","text","placeholder","Username","formControlName","username",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-user"],["for","fullname",4,"ngIf"],["id","fullname","type","text","placeholder","Full Name","formControlName","fullname",1,"form-control"],["for","email",4,"ngIf"],["id","email","type","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"fas","fa-envelope"],["for","password",4,"ngIf"],["id","password","type","password","placeholder","Password","formControlName","password",1,"form-control"],[1,"fas","fa-lock"],["for","passwordConfirm",4,"ngIf"],["id","passwordConfirm","type","password","placeholder","Retype password","formControlName","passwordConfirm",1,"form-control"],["class","btn btn-danger",4,"ngIf"],[1,"col-md-6"],["type","checkbox",2,"zoom","1.5",3,"checked","click"],[2,"margin-left","5px"],[1,"col-6"],[1,"icheck-primary"],["type","checkbox","id","isActive","formControlName","isActive"],["for","isActive"],[1,"modal-footer","justify-content-between"],["id","close-modal","type","button","data-dismiss","modal",1,"btn","btn-default"],["type","submit",3,"disabled"],["id","modal-primary",1,"modal","fade"],[1,"modal-footer"],["id","modal-danger",1,"modal","fade"],[1,"modal-content","bg-danger"],[1,"modal-title"],["id","close-delete-modal","type","button","data-dismiss","modal","aria-label","Close",1,"close"],[1,"login-box-msg"],["type","button","data-dismiss","modal",1,"btn","btn-default"],["type","button",1,"btn","btn-danger","swalDefaultSuccess",3,"click"],["role","button","data-toggle","modal","data-target","#modal-primary",2,"cursor","pointer",3,"click"],[1,"fas","fa-eye"],[2,"font-size","20px"],[1,"nav-item","dropdown"],["data-toggle","dropdown","href","#",2,"text-decoration","none","color","black"],[1,"fa","fa-ellipsis-v",2,"font-size","18px"],[1,"dropdown-menu","dropdown-menu-lg","dropdown-menu-right",2,"padding-left","10px"],["style","cursor: pointer;","role","button","data-toggle","modal","data-target","#modal-default",3,"click",4,"ngIf"],["style","cursor: pointer;","role","button","data-toggle","modal","data-target","#modal-danger",3,"click",4,"ngIf"],["role","button","data-toggle","modal","data-target","#modal-default",2,"cursor","pointer",3,"click"],[1,"fas","fa-edit"],["role","button","data-toggle","modal","data-target","#modal-danger",2,"cursor","pointer",3,"click"],[1,"fas","fa-trash-alt"],["for","username"],["for","fullname"],["for","email"],["for","password"],["for","passwordConfirm"],[1,"btn","btn-danger"],["type","checkbox",3,"checked","click"],[2,"margin-left","5px","cursor","pointer",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3," Users List"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return s.CreateUser()}),e._uU(5," Add User "),e.qZA()()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),e._UZ(10,"div",8),e.TgZ(11,"div",9)(12,"table",10)(13,"thead")(14,"tr")(15,"th"),e._uU(16,"N\xb0"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Username"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Full name"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Email"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"R\xf4les"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Default Page"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"InActifs"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"IsSuperAdmin"),e.qZA(),e._UZ(31,"th"),e.qZA()(),e.YNc(32,P,30,9,"tbody",11),e.qZA()()()()()(),e.TgZ(33,"div",12)(34,"div",13)(35,"form",14),e.NdJ("ngSubmit",function(){return s.registerOrUpdate()}),e.TgZ(36,"div",15)(37,"div",16),e._UZ(38,"img",17),e.TgZ(39,"strong",18)(40,"span"),e._uU(41),e.qZA()(),e.TgZ(42,"button",19)(43,"span",20),e._uU(44,"\xd7"),e.qZA()()(),e.TgZ(45,"div",21),e.YNc(46,Q,3,1,"p",22),e.YNc(47,Y,2,0,"label",23),e.TgZ(48,"div",24),e._UZ(49,"input",25),e.TgZ(50,"div",26)(51,"div",27),e._UZ(52,"span",28),e.qZA()()(),e.YNc(53,z,2,0,"label",29),e.TgZ(54,"div",24),e._UZ(55,"input",30),e.TgZ(56,"div",26)(57,"div",27),e._UZ(58,"span",28),e.qZA()()(),e.YNc(59,j,2,0,"label",31),e.TgZ(60,"div",24),e._UZ(61,"input",32),e.TgZ(62,"div",26)(63,"div",27),e._UZ(64,"span",33),e.qZA()()(),e.YNc(65,K,2,0,"label",34),e.TgZ(66,"div",24),e._UZ(67,"input",35),e.TgZ(68,"div",26)(69,"div",27),e._UZ(70,"span",36),e.qZA()()(),e.YNc(71,H,2,0,"label",37),e.TgZ(72,"div",24),e._UZ(73,"input",38),e.TgZ(74,"div",26)(75,"div",27),e._UZ(76,"span",36),e.qZA()()(),e.YNc(77,B,2,0,"div",39),e.TgZ(78,"div",5)(79,"div",40)(80,"h1")(81,"input",41),e.NdJ("click",function(){return s.SelectAllRoles()}),e.qZA(),e.TgZ(82,"span",42),e._uU(83,"R\xf4les"),e.qZA()(),e.YNc(84,V,4,2,"p",11),e.qZA(),e.TgZ(85,"div",40)(86,"h1")(87,"input",41),e.NdJ("click",function(){return s.SelectAllMRs()}),e.qZA(),e.TgZ(88,"span",42),e._uU(89,"Metting Team"),e.qZA()(),e.YNc(90,X,4,2,"p",11),e.qZA()(),e._UZ(91,"br"),e.TgZ(92,"div",5)(93,"div",43)(94,"div",24)(95,"div",44),e._UZ(96,"input",45),e.TgZ(97,"label",46),e._uU(98,"Activer"),e.qZA()()()()()(),e.TgZ(99,"div",47)(100,"button",48),e._uU(101,"Close"),e.qZA(),e.TgZ(102,"button",49),e._uU(103),e.qZA()()()()()(),e.TgZ(104,"div",50)(105,"div",13)(106,"div",15)(107,"div",16),e._UZ(108,"img",17),e.TgZ(109,"button",19)(110,"span",20),e._uU(111,"\xd7"),e.qZA()()(),e.TgZ(112,"div",21)(113,"div",5)(114,"div",40)(115,"h1")(116,"input",41),e.NdJ("click",function(){return s.SelectAllRoles()}),e.qZA(),e.TgZ(117,"span",42),e._uU(118,"R\xf4les"),e.qZA()(),e.YNc(119,W,4,2,"p",11),e.qZA(),e.TgZ(120,"div",40)(121,"h1")(122,"input",41),e.NdJ("click",function(){return s.SelectAllMRs()}),e.qZA(),e.TgZ(123,"span",42),e._uU(124,"Metting Team"),e.qZA()(),e.YNc(125,ee,4,2,"p",11),e.qZA()()(),e.TgZ(126,"div",51)(127,"button",48),e._uU(128,"Close"),e.qZA()()()()(),e.TgZ(129,"div",52)(130,"div",13)(131,"div",53)(132,"div",16)(133,"h4",54),e._uU(134,"Suppression d'utilisateur"),e.qZA(),e.TgZ(135,"button",55)(136,"span",20),e._uU(137,"\xd7"),e.qZA()()(),e.TgZ(138,"div",21),e._uU(139," Cette action est ir\xe9versible! \xcates vous s\xfbr de proc\xe9der \xe0 la suppression ? "),e.TgZ(140,"p",56)(141,"strong"),e._uU(142),e.qZA()()(),e.TgZ(143,"div",47)(144,"button",57),e._uU(145,"Annuler"),e.qZA(),e.TgZ(146,"button",58),e.NdJ("click",function(){return s.DeleteUser()}),e._uU(147,"Oui Supprimer !"),e.qZA()()()()()),2&t&&(e.xp6(32),e.Q6J("ngForOf",s.users$),e.xp6(3),e.Q6J("formGroup",s.userForm),e.xp6(3),e.s9C("src",s.APP_LOGO,e.LSH),e.xp6(2),e.Gre(" btn-",s.isEditMode?"warning":"success",""),e.xp6(1),e.Oqu(s.isEditMode?"Modifier un utilisateur":"Ajouter un utilisateur"),e.xp6(5),e.Q6J("ngIf",""!=s.message),e.xp6(1),e.Q6J("ngIf",s.isEditMode),e.xp6(6),e.Q6J("ngIf",s.isEditMode),e.xp6(6),e.Q6J("ngIf",s.isEditMode),e.xp6(6),e.Q6J("ngIf",s.isEditMode),e.xp6(6),e.Q6J("ngIf",s.isEditMode),e.xp6(6),e.Q6J("ngIf",s.passwordMatchError()),e.xp6(4),e.Q6J("checked",s.selectedRole.length==s.roles$.length),e.xp6(3),e.Q6J("ngForOf",s.roles$),e.xp6(3),e.Q6J("checked",s.selectedMR.length==s.MeetingReport$.length),e.xp6(3),e.Q6J("ngForOf",s.MeetingReport$),e.xp6(12),e.Gre("btn btn-",s.isEditMode?"warning":"success",""),e.Q6J("disabled",!s.userForm.valid),e.xp6(1),e.Oqu(s.isEditMode?"Modifier":"Sauvegarder"),e.xp6(5),e.s9C("src",s.APP_LOGO,e.LSH),e.xp6(8),e.Q6J("checked",s.selectedRole.length==s.roles$.length),e.xp6(3),e.Q6J("ngForOf",s.roles$),e.xp6(3),e.Q6J("checked",s.selectedMR.length==s.MeetingReport$.length),e.xp6(3),e.Q6J("ngForOf",s.MeetingReport$),e.xp6(17),e.Oqu(s.message))},dependencies:[p.sg,p.O5,a._Y,a.Fj,a.Wl,a.JJ,a.JL,a.sg,a.u],encapsulation:2}),i})();function se(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tbody")(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td")(9,"i",46),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.EditRole(n))}),e.qZA()(),e.TgZ(10,"td")(11,"i",47),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.RoleSelected(n))}),e.qZA()()()()}if(2&i){const t=r.$implicit;e.xp6(3),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.default_page)}}function ie(i,r){if(1&i&&(e.TgZ(0,"p",43)(1,"strong"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.message)}}function oe(i,r){1&i&&(e.TgZ(0,"h1"),e._uU(1,"Name"),e.qZA())}const x=function(i){return{"custom-class":i}};function ne(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",48)(2,"p")(3,"input",49),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.AddOrRemovePage(n))}),e.qZA(),e.TgZ(4,"span",50),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.AddOrRemovePage(n))}),e._uU(5),e.qZA()()(),e.BQk()}if(2&i){const t=r.$implicit,s=r.index,o=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,x,s<=o.pages$.length/2)),e.xp6(2),e.Q6J("checked",o.containsPage(t)),e.xp6(2),e.Oqu(t)}}function ae(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",48)(2,"p")(3,"input",49),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.AddOrRemoveAction(n))}),e.qZA(),e.TgZ(4,"span",50),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.AddOrRemoveAction(n))}),e._uU(5),e.qZA()()(),e.BQk()}if(2&i){const t=r.$implicit,s=r.index,o=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,x,s<=o.actions$.length/2)),e.xp6(2),e.Q6J("checked",o.containsAction(t)),e.xp6(2),e.Oqu(t)}}function re(i,r){1&i&&(e.TgZ(0,"h1"),e._uU(1,"DefaultPage"),e.qZA())}function le(i,r){if(1&i&&(e.TgZ(0,"option",51),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",t," ")}}let ce=(()=>{class i{constructor(t,s,o){this.auth=t,this.sync=s,this.router=o,this.roles$=[],this.pages$=[],this.actions$=[],this.isLoading=!1,this.LoadingMsg="Loading...",this.isEditMode=!1,this.message="",this.APP_LOGO=q.z.APP_LOGO,this.selectedPage=[],this.selectedAction=[]}activeSave(){throw new Error("Method not implemented.")}ngOnInit(){this.GetRoles(),this.GetUserActions(),this.GetUserPages(),this.roleForm=this.createFormGroup()}GetRoles(){var t=this;this.auth.GetAllRoles().subscribe(function(){var s=(0,u.Z)(function*(o){200==o.status&&(t.roles$=o.data)});return function(o){return s.apply(this,arguments)}}(),s=>{})}GetUserActions(){var t=this;this.auth.UserActionsList().subscribe(function(){var s=(0,u.Z)(function*(o){200==o.status&&(t.actions$=o.data)});return function(o){return s.apply(this,arguments)}}(),s=>{})}GetUserPages(){var t=this;this.auth.UserPagesList().subscribe(function(){var s=(0,u.Z)(function*(o){200==o.status&&(t.pages$=o.data)});return function(o){return s.apply(this,arguments)}}(),s=>{})}EditRole(t){this.isEditMode=!0,this.selectedPage=t.pages??[],this.selectedAction=t.actions??[],this.roleForm=this.createFormGroup(t),this.RoleSelected(t)}RoleSelected(t){this.selectedRole=t,this.message=""}DeleteRole(){this.isEditMode=!1,this.selectedRole&&this.auth.DeleteRole(this.selectedRole).subscribe(t=>{200===t.status?(this.showModalToast("success","Supprim\xe9 avec success"),console.log("successfully deleted!"),this.GetRoles(),this.selectedRole=null,this.selectedPage=[],this.selectedAction=[],this.isLoading=!1,this.message=""):this.message=t.data,console.log(this.message)},t=>{this.message=t,this.isLoading=!1,console.log(this.message)})}CreateRole(){this.isEditMode=!1,this.roleForm=this.createFormGroup(),this.selectedRole=null,this.selectedPage=[],this.selectedAction=[],this.message=""}containsPage(t){return this.selectedPage.includes(t)}containsAction(t){return this.selectedAction.includes(t)}AddOrRemovePage(t){const s=this.selectedPage.indexOf(t);-1!==s?this.selectedPage.splice(s,1):this.selectedPage.push(t)}SelectAllPages(){this.selectedPage=this.selectedPage.length==this.pages$.length?[]:this.pages$}SelectAllActions(){this.selectedAction=this.selectedAction.length==this.actions$.length?[]:this.actions$}AddOrRemoveAction(t){const s=this.selectedAction.indexOf(t);-1!==s?this.selectedAction.splice(s,1):this.selectedAction.push(t)}createFormGroup(t){const s={name:new a.NI(null!=t?t.name:"",[a.kI.required,a.kI.minLength(4)]),default_page:new a.NI(null!=t?t.default_page:"")};return this.isEditMode&&s.name.disable(),new a.cw(s)}passwordMatchError(){return this.roleForm.getError("password")&&this.roleForm.get("passwordConfirm")?.touched}showModalToast(t,s){showToast(t,s),this.closeModal("close-delete-modal")}closeModal(t="close-modal"){$("#"+t).trigger("click")}MatchValidator(t,s){return o=>{const n=o.get(t),l=o.get(s);if(n&&l){if(n.value!==l.value)return{mismatch:!0};if(this.isEditMode&&((0,c.Nf)(n.value)&&n.value.length<8||(0,c.Nf)(l.value)&&l.value.length<8))return{mismatch:!0}}return null}}ToStringNewLine(t,s){return null!=t?`${t}`.toString().replace(/,/g,"<br>"):""}CreateOrUpdateRole(){var t;if(this.isEditMode?this.selectedRole&&(this.selectedRole.default_page=this.roleForm.value.default_page,this.selectedRole.pages=this.selectedPage,this.selectedRole.actions=this.selectedAction,t=this.auth.UpdateRole(this.selectedRole)):(this.roleForm.value.pages=this.selectedPage,this.roleForm.value.actions=this.selectedAction,t=this.auth.CreateRole(this.roleForm.value)),t)return t.subscribe(s=>{200===s.status?(this.message="Registed successfully !",this.closeModal(),this.GetRoles(),this.selectedRole=null,this.selectedPage=[],this.selectedAction=[],this.message=""):this.message=s.data,console.log(this.message),this.isLoading=!1},s=>{this.isLoading=!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.e),e.Y36(f._),e.Y36(m.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["user-role"]],decls:92,vars:21,consts:[[1,"page-title","card","card-primary","card-outline"],[1,"card-body"],[1,"fas","fa-user",2,"float","left"],["type","button","data-toggle","modal","data-target","#modal-default",1,"btn","btn-default",2,"float","right",3,"click"],[1,"page-content-wrap"],[1,"row"],[1,"col-md-12"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"panel-body"],[1,"table","datatable"],["colspan","2"],[4,"ngFor","ngForOf"],["id","modal-default",1,"modal","fade"],[1,"modal-dialog"],["novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"modal-content"],[1,"modal-header"],["height","30","alt","","srcset","",1,"modal-title",3,"src"],[1,"login-box-msg",2,"text-align","center"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["class","login-box-msg",4,"ngIf"],[4,"ngIf"],[1,"input-group","mb-3"],["id","name","type","text","placeholder","Name","formControlName","name",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-user"],["type","checkbox",2,"zoom","1.5",3,"checked","click"],[2,"margin-left","5px"],["formControlName","default_page",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fas","fa-lock"],[1,"modal-footer","justify-content-between"],["id","close-modal","type","button","data-dismiss","modal",1,"btn","btn-default"],["type","submit",3,"disabled"],["id","modal-danger",1,"modal","fade"],[1,"modal-content","bg-danger"],[1,"modal-title"],["id","close-delete-modal","type","button","data-dismiss","modal","aria-label","Close",1,"close"],[1,"login-box-msg"],["type","button","data-dismiss","modal",1,"btn","btn-default"],["type","button",1,"btn","btn-danger","swalDefaultSuccess",3,"click"],["data-toggle","modal","data-target","#modal-default",1,"btn-warning","fas","fa-edit",3,"click"],["data-toggle","modal","data-target","#modal-danger",1,"btn-danger","fas","fa-trash-alt",3,"click"],[1,"col-md-6",3,"ngClass"],["type","checkbox",3,"checked","click"],[2,"margin-left","5px","cursor","pointer",3,"click"],[3,"value"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3," Roles List"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return s.CreateRole()}),e._uU(5," Add Role "),e.qZA()()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),e._UZ(10,"div",8),e.TgZ(11,"div",9)(12,"table",10)(13,"thead")(14,"tr")(15,"th"),e._uU(16,"id"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Name"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"DefaultPage"),e.qZA(),e.TgZ(21,"th",11),e._uU(22,"Actions"),e.qZA()()(),e.YNc(23,se,12,3,"tbody",12),e.qZA()()()()()(),e.TgZ(24,"div",13)(25,"div",14)(26,"form",15),e.NdJ("ngSubmit",function(){return s.CreateOrUpdateRole()}),e.TgZ(27,"div",16)(28,"div",17),e._UZ(29,"img",18),e.TgZ(30,"strong",19)(31,"span"),e._uU(32),e.qZA()(),e.TgZ(33,"button",20)(34,"span",21),e._uU(35,"\xd7"),e.qZA()()(),e.TgZ(36,"div",22),e.YNc(37,ie,3,1,"p",23),e.YNc(38,oe,2,0,"h1",24),e.TgZ(39,"div",25),e._UZ(40,"input",26),e.TgZ(41,"div",27)(42,"div",28),e._UZ(43,"span",29),e.qZA()()(),e._UZ(44,"br"),e.TgZ(45,"div",5)(46,"h1")(47,"input",30),e.NdJ("click",function(){return s.SelectAllPages()}),e.qZA(),e.TgZ(48,"span",31),e._uU(49,"Pages"),e.qZA()(),e.YNc(50,ne,6,5,"ng-container",12),e.qZA(),e._UZ(51,"br"),e.TgZ(52,"div",5)(53,"h1")(54,"input",30),e.NdJ("click",function(){return s.SelectAllActions()}),e.qZA(),e.TgZ(55,"span",31),e._uU(56,"Actions"),e.qZA()(),e.YNc(57,ae,6,5,"ng-container",12),e.qZA(),e._UZ(58,"br"),e.YNc(59,re,2,0,"h1",24),e.TgZ(60,"div",25)(61,"select",32),e._UZ(62,"option",33),e.YNc(63,le,2,2,"option",34),e.qZA(),e.TgZ(64,"div",27)(65,"div",28),e._UZ(66,"span",35),e.qZA()()(),e._UZ(67,"br"),e.qZA(),e.TgZ(68,"div",36)(69,"button",37),e._uU(70,"Close"),e.qZA(),e.TgZ(71,"button",38),e._uU(72),e.qZA()()()()()(),e.TgZ(73,"div",39)(74,"div",14)(75,"div",40)(76,"div",17)(77,"h4",41),e._uU(78,"Suppression d'utilisateur"),e.qZA(),e.TgZ(79,"button",42)(80,"span",21),e._uU(81,"\xd7"),e.qZA()()(),e.TgZ(82,"div",22),e._uU(83," Cette action est ir\xe9versible! \xcates vous s\xfbr de proc\xe9der \xe0 la suppression ? "),e.TgZ(84,"p",43)(85,"strong"),e._uU(86),e.qZA()()(),e.TgZ(87,"div",36)(88,"button",44),e._uU(89,"Annuler"),e.qZA(),e.TgZ(90,"button",45),e.NdJ("click",function(){return s.DeleteRole()}),e._uU(91,"Oui Supprimer !"),e.qZA()()()()()),2&t&&(e.xp6(23),e.Q6J("ngForOf",s.roles$),e.xp6(3),e.Q6J("formGroup",s.roleForm),e.xp6(3),e.s9C("src",s.APP_LOGO,e.LSH),e.xp6(2),e.Gre(" btn-",s.isEditMode?"warning":"success",""),e.xp6(1),e.hij(" ",s.isEditMode?"Modifier un utilisateur":"Ajouter un utilisateur",""),e.xp6(5),e.Q6J("ngIf",""!=s.message),e.xp6(1),e.Q6J("ngIf",s.isEditMode),e.xp6(9),e.Q6J("checked",s.selectedPage.length==s.pages$.length),e.xp6(3),e.Q6J("ngForOf",s.pages$),e.xp6(4),e.Q6J("checked",s.selectedAction.length==s.actions$.length),e.xp6(3),e.Q6J("ngForOf",s.actions$),e.xp6(2),e.Q6J("ngIf",s.isEditMode),e.xp6(4),e.Q6J("ngForOf",s.selectedPage),e.xp6(8),e.Gre("btn btn-",s.isEditMode?"warning":"success",""),e.Q6J("disabled",!s.roleForm.valid),e.xp6(1),e.hij("",s.isEditMode?"Modifier":"Sauvegarder"," "),e.xp6(14),e.Oqu(s.message))},dependencies:[p.mk,p.sg,p.O5,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.sg,a.u],encapsulation:2}),i})();var h=d(3514);const de=[{path:"",redirectTo:"documentations",pathMatch:"full"},{path:"documentations",component:S,canActivate:[h.o],data:{title:"Documentation"}},{path:"database-utils",component:O,canActivate:[h.o],data:{href:"utils",icon:"fa fa-user",label:"DatabaseUtils",title:"DatabaseUtils"}},{path:"users-list",component:te,canActivate:[h.o],data:{href:"user",icon:"fa fa-user",label:"Users",title:"Users"}},{path:"roles-list",component:ce,canActivate:[h.o],data:{href:"user",icon:"fa fa-user",label:"Roles",title:"Roles"}}];let ue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,m.Bz.forChild(de),m.Bz]}),i})(),pe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,ue,a.UX]}),i})()}}]);