"use strict";(self.webpackChunkih_portal=self.webpackChunkih_portal||[]).push([["src_app_modules_manage-data_manage-data_module_ts"],{8001:(Ae,D,h)=>{h.r(D),h.d(D,{ManageDataModule:()=>xe});var g=h(8692),f=h(3580),p=h(4553),o=h(92),u=h(8629),m=h(926),x=h(8527),t=h(4537),b=h(7556),T=h(3395);function C(n,s){if(1&n&&(t.TgZ(0,"div",47),t._UZ(1,"i",48),t.TgZ(2,"div",49),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.LoadingMsg)}}function U(n,s){if(1&n&&(t.TgZ(0,"option",52),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function q(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"select",50),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.genarateSites(a.thinkmdToDhis2Form))}),t.YNc(1,U,2,2,"option",51),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.Districts$)}}function A(n,s){1&n&&t._UZ(0,"select",53)}function w(n,s){if(1&n&&(t.TgZ(0,"option",52),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.external_id),t.xp6(1),t.hij(" ",e.name," ")}}function I(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"select",54),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.genarateChws(a.thinkmdToDhis2Form))}),t.YNc(1,w,2,2,"option",51),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.sites$)}}function k(n,s){1&n&&t._UZ(0,"select",53)}function S(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.tab1_messages_error," ")}}function N(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("Created: ",e.Tab1Dhis2Import.Created,"")}}function F(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("Updated: ",e.Tab1Dhis2Import.Updated,"")}}function O(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("Deleted: ",e.Tab1Dhis2Import.Deleted,"")}}function E(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("ErrorCount: ",e.Tab1Dhis2Import.ErrorCount," ")}}function J(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("ErrorMsg: ",e.Tab1Dhis2Import.ErrorMsg,"")}}function $(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.AsE(" ",e.key,":",e.value," ")}}function Y(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.hij(" Error Found: ",e,"")}}function Q(n,s){1&n&&t._UZ(0,"table-export")}function M(n,s){if(1&n&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&n){const e=s.$implicit,i=t.oxw(2);t.xp6(1),t.hij(" ",i.capitaliseData(e,"_")," ")}}function L(n,s){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.hij(" ",e," ")}}function W(n,s){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,L,2,1,"td",36),t.qZA()),2&n){const e=s.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",i.getItemAsArray(e))}}function G(n,s){if(1&n&&(t.TgZ(0,"div",12)(1,"div",44)(2,"div",55)(3,"div",17)(4,"div",18),t.YNc(5,Q,1,0,"table-export",35),t.qZA()(),t.TgZ(6,"div",56)(7,"table",57)(8,"thead")(9,"tr"),t.YNc(10,M,2,1,"th",36),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,W,2,1,"tr",36),t.ALo(13,"keyvalue"),t.qZA()()()()()()),2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.roles.canDownloadReports()),t.xp6(5),t.Q6J("ngForOf",null==e.tab1_messages||null==e.tab1_messages.dataToSend||null==e.tab1_messages.dataToSend.Data?null:e.tab1_messages.dataToSend.Data.head),t.xp6(2),t.Q6J("ngForOf",t.lcZ(13,3,null==e.tab1_messages||null==e.tab1_messages.dataToSend||null==e.tab1_messages.dataToSend.Data?null:e.tab1_messages.dataToSend.Data.body))}}function j(n,s){if(1&n&&(t.TgZ(0,"div",47),t._UZ(1,"i",48),t.TgZ(2,"div",49),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.LoadingMsg)}}function P(n,s){if(1&n&&(t.TgZ(0,"option",52),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function K(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"select",50),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.genarateSites(a.ihChtToDhis2Form))}),t.YNc(1,P,2,2,"option",51),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.Districts$)}}function H(n,s){1&n&&t._UZ(0,"select",53)}function z(n,s){if(1&n&&(t.TgZ(0,"option",52),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function V(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"select",54),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.genarateChws(a.ihChtToDhis2Form))}),t.YNc(1,z,2,2,"option",51),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.sites$)}}function B(n,s){1&n&&t._UZ(0,"select",53)}function X(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("Created: ",e.Tab3Dhis2Import.Created,"")}}function R(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("Updated: ",e.Tab3Dhis2Import.Updated,"")}}function tt(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("Deleted: ",e.Tab3Dhis2Import.Deleted,"")}}function et(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("ErrorCount: ",e.Tab3Dhis2Import.ErrorCount," ")}}function nt(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("ErrorMsg: ",e.Tab3Dhis2Import.ErrorMsg,"")}}function it(n,s){if(1&n&&(t.TgZ(0,"h2")(1,"div",39)(2,"div",9),t._uU(3),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",e.tab3_error_messages," ")}}function st(n,s){1&n&&(t.TgZ(0,"h2")(1,"div",39)(2,"div",9),t._uU(3," Pas de donn\xe9es trouv\xe9e avec les paramettres renseign\xe9s ! "),t.qZA()()())}function ot(n,s){1&n&&t._UZ(0,"table-export")}function at(n,s){if(1&n&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&n){const e=s.$implicit,i=t.oxw(2);t.xp6(1),t.hij(" ",i.capitaliseDataGiven(e.key,"_"," ")," ")}}function rt(n,s){if(1&n&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&n){const e=s.$implicit,i=t.oxw(3);t.xp6(1),t.Oqu(i.generateCount(e.value))}}function lt(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.YNc(3,rt,2,1,"th",36),t.ALo(4,"keyvalue"),t.qZA()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.chw.name),t.xp6(1),t.Q6J("ngForOf",t.lcZ(4,2,e.data))}}function ct(n,s){if(1&n&&(t.TgZ(0,"div",55)(1,"div",17)(2,"div",18),t.YNc(3,ot,1,0,"table-export",35),t.qZA()(),t.TgZ(4,"div",56)(5,"table",58)(6,"thead")(7,"th"),t._uU(8,"Nom Asc"),t.qZA(),t.YNc(9,at,2,1,"th",36),t.ALo(10,"keyvalue"),t.qZA(),t.TgZ(11,"tbody"),t.YNc(12,lt,5,4,"tr",36),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.roles.canDownloadReports()),t.xp6(6),t.Q6J("ngForOf",t.lcZ(10,3,e.tab3_messages[0].data)),t.xp6(3),t.Q6J("ngForOf",e.tab3_messages)}}function dt(n,s){if(1&n&&(t.TgZ(0,"div",47),t._UZ(1,"i",48),t.TgZ(2,"div",49),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.LoadingMsg)}}function ut(n,s){if(1&n&&(t.TgZ(0,"option",52),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function _t(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"select",50),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.genarateSites(a.recapActivityToDhis2Form))}),t.YNc(1,ut,2,2,"option",51),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.Districts$)}}function ht(n,s){1&n&&t._UZ(0,"select",53)}function gt(n,s){if(1&n&&(t.TgZ(0,"option",52),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function pt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"select",54),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.genarateChws(a.recapActivityToDhis2Form))}),t.YNc(1,gt,2,2,"option",51),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.sites$)}}function mt(n,s){1&n&&t._UZ(0,"select",53)}function ft(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("Created: ",e.Tab5Dhis2Import.Created,"")}}function bt(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("Updated: ",e.Tab5Dhis2Import.Updated,"")}}function Tt(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("Deleted: ",e.Tab5Dhis2Import.Deleted,"")}}function Zt(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("ErrorCount: ",e.Tab5Dhis2Import.ErrorCount,"")}}function vt(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("ErrorMsg: ",e.Tab5Dhis2Import.ErrorMsg,"")}}function yt(n,s){if(1&n&&(t.TgZ(0,"h2")(1,"div",39)(2,"div",9),t._uU(3),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.tab5_error_messages)}}function Dt(n,s){1&n&&(t.TgZ(0,"h2")(1,"div",39)(2,"div",9),t._uU(3,"Pas de donn\xe9es trouv\xe9e avec les paramettres renseign\xe9s !"),t.qZA()()())}function xt(n,s){1&n&&t._UZ(0,"table-export")}function Ct(n,s){if(1&n&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&n){const e=s.$implicit,i=t.oxw(2);t.xp6(1),t.hij(" ",i.capitaliseDataGiven(e.key,"_"," ")," ")}}function Ut(n,s){if(1&n&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&n){const e=s.$implicit,i=t.oxw(3);t.xp6(1),t.Oqu(i.generateCount(e.value))}}function qt(n,s){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,Ut,2,1,"th",36),t.ALo(2,"keyvalue"),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e))}}function At(n,s){if(1&n&&(t.TgZ(0,"div",55)(1,"div",17)(2,"div",18),t.YNc(3,xt,1,0,"table-export",35),t.qZA()(),t.TgZ(4,"div",56)(5,"table",58)(6,"thead"),t.YNc(7,Ct,2,1,"th",36),t.ALo(8,"keyvalue"),t.qZA(),t.TgZ(9,"tbody"),t.YNc(10,qt,3,3,"tr",36),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.roles.canDownloadReports()),t.xp6(4),t.Q6J("ngForOf",t.lcZ(8,3,e.tab5_messages[0])),t.xp6(3),t.Q6J("ngForOf",e.tab5_messages)}}let wt=(()=>{class n{constructor(e,i,a){this.auth=e,this.route=i,this.sync=a,this.tab1_messages=null,this.tab1_messages_error=null,this.tab3_messages=[],this.tab3_error_messages="",this.tab5_error_messages="",this.tab3_no_data_found=!1,this.tab5_no_data_found=!1,this.tab4_messages=null,this.tab5_messages=[],this.tab4_messages_error=null,this.dates=[],this.loading1=!1,this.loading3=!1,this.loading4=!1,this.loading5=!1,this.start_date_error=!1,this.end_date_error=!1,this.LoadingMsg="Loading...",this.Districts$=[],this.Sites$=[],this.Chws$=[],this.Dhis2Chws$=[],this.chws$=[],this.sites$=[],this.dhis2Chws$=[],this.Tab1Dhis2Import={ErrorCount:0,ErrorMsg:"",Created:0,Updated:0,Deleted:0},this.Tab3Dhis2Import={ErrorCount:0,ErrorMsg:"",Created:0,Updated:0,Deleted:0},this.Tab5Dhis2Import={ErrorCount:0,ErrorMsg:"",Created:0,Updated:0,Deleted:0},this.roles=new x.G(this.auth)}ngOnInit(){this.initDate=(0,m.vW)(),this.initAllData(),this.thinkmdToDhis2Form=this.createThinkmdFormGroup(),this.ihChtToDhis2Form=this.createIhChtFormGroup(),this.recapActivityToDhis2Form=this.createRecapActivityFormGroup()}generateCount(e){const a=e.tonoudayo+e.dhis2;return isNaN(a)?e:a}createDhis2ChwsDataFormGroup(){return new o.cw({start_date:new o.NI(this.initDate.start_date,[o.kI.required,o.kI.minLength(7)]),end_date:new o.NI(this.initDate.end_date,[o.kI.required,o.kI.minLength(7)]),sites:new o.NI("")})}createThinkmdFormGroup(){return new o.cw({end_date:new o.NI(this.initDate.end_date,[o.kI.required,o.kI.minLength(7)]),weekly_Choosen_Dates:new o.NI(""),useToken:new o.NI(!0),InsertIntoDhis2:new o.NI(!1,[]),districts:new o.NI("",[o.kI.required]),sites:new o.NI("",[o.kI.required])})}createIhChtFormGroup(){return new o.cw({start_date:new o.NI(this.initDate.start_date,[o.kI.required,o.kI.minLength(7)]),end_date:new o.NI(this.initDate.end_date,[o.kI.required,o.kI.minLength(7)]),districts:new o.NI("",[o.kI.required]),sites:new o.NI("",[o.kI.required]),InsertIntoDhis2:new o.NI(!1,[])})}createRecapActivityFormGroup(){return new o.cw({start_date:new o.NI(this.initDate.start_date,[o.kI.required,o.kI.minLength(7)]),end_date:new o.NI(this.initDate.end_date,[o.kI.required,o.kI.minLength(7)]),districts:new o.NI("",[o.kI.required]),sites:new o.NI("",[o.kI.required]),InsertIntoDhis2:new o.NI(!1,[])})}getSiteById(e){for(let i=0;i<this.Sites$.length;i++){const a=this.Sites$[i];if(e==a.id)return a}return null}capitaliseDataGiven(e,i,a){return(0,u.Fs)(e,i,a)}initAllData(){var e=this;return(0,p.Z)(function*(){e.loading3=!0,e.LoadingMsg="Chargement des Districts ...",e.sync.getDistrictsList().subscribe(function(){var i=(0,p.Z)(function*(a){200==a.status&&(e.Districts$=a.data),e.LoadingMsg="Chargement des Sites ...",e.sync.getSitesList().subscribe(function(){var r=(0,p.Z)(function*(c){200==c.status&&(e.Sites$=c.data),e.genarateSites(e.ihChtToDhis2Form),e.genarateSites(e.recapActivityToDhis2Form),e.LoadingMsg="Chargement des ASC ...",e.sync.getChwsList().subscribe(function(){var l=(0,p.Z)(function*(_){200==_.status&&(e.Chws$=_.data),e.genarateChws(e.ihChtToDhis2Form),e.genarateChws(e.recapActivityToDhis2Form);for(let v=0;v<e.Chws$.length;v++){const y=e.Chws$[v];var qe=`${y.name}`.replace("'","`").toString().replace("\u2019","`").replace("\u2019","`").replace("'","`");e.Dhis2Chws$.push({code:y.external_id,name:qe,siteId:y.site.id})}e.loading3=!1,e.LoadingMsg=""});return function(_){return l.apply(this,arguments)}}(),l=>{e.loading3=!1,console.log(l.error)})});return function(c){return r.apply(this,arguments)}}(),r=>{e.loading3=!1,console.log(r.error)})});return function(a){return i.apply(this,arguments)}}())})()}genarateSites(e){this.sites$=[],this.chws$=[];const i=(0,u.pb)(e.value.districts);if(e.value.sites="",e.value.chws=[],(0,u.Nf)(i))for(let a=0;a<this.Sites$.length;a++){const r=this.Sites$[a];(0,u.Nf)(r)&&i.includes(r.district.id)&&this.sites$.push(r)}else this.sites$=[]}getExternalIdByName(e){for(let i=0;i<this.Chws$.length;i++){const a=this.Chws$[i];if(e==a.name)return a.external_id}return e}genarateChws(e){const i=(0,u.pb)(e.value.sites);if(this.chws$=[],e.value.chws=[],(0,u.Nf)(i))for(let a=0;a<this.Chws$.length;a++){const r=this.Chws$[a];(0,u.Nf)(r)&&i.includes(r.site.id)&&this.chws$.push(r)}else this.chws$=[]}ParamsToFilter(e){return{start_date:e.value.start_date,end_date:e.value.end_date,sources:["Tonoudayo"],districts:(0,u.pb)(e.value.districts),sites:(0,u.pb)(e.value.sites),InsertIntoDhis2:e.value.InsertIntoDhis2}}isValidParams(e,i){if(null!=e){const a=e.value;if(null!=a){const r=a.start_date,c=a.end_date,l=(0,m.gq)(r,21),_=(0,m.gq)(c,20),d=(0,m.M2)(r,c);if(1==a.InsertIntoDhis2&&"cht"==i)return d>31?(this.start_date_error=!0,this.end_date_error=!0):(this.start_date_error=!l,this.end_date_error=!_),l&&_&&d<=31;if("thinkMd"==i)return this.end_date_error=!_,_}}return!0}startDateError(){return this.start_date_error?"borderError":""}endDateError(){return this.end_date_error?"borderError":""}cleanError(){this.start_date_error=!1,this.end_date_error=!1}runThinkmdToDhis2(){this.isValidParams(this.thinkmdToDhis2Form,"thinkMd")&&(this.start_date_error=!1,this.loading1=!0,this.tab1_messages=null,this.tab1_messages_error=null,this.Tab1Dhis2Import={ErrorCount:0,ErrorMsg:"",Created:0,Updated:0,Deleted:0},this.sync.thinkmdToDhis2Script(this.thinkmdToDhis2Form.value).subscribe(e=>{try{var i=e;if(1==this.thinkmdToDhis2Form.value.InsertIntoDhis2&&i?.DataFordhis2){var a=0,r=0;for(let l=0;l<i?.DataFordhis2.length;l++){a++;var c=i?.DataFordhis2[l];c.orgUnit=this.getExternalIdByName(c.orgUnit),this.sync.insertOrUpdateDhis2Data(c).subscribe(d=>{r++,200==d.status?("Created"==d.data&&(this.Tab1Dhis2Import.Created+=1),"Updated"==d.data&&(this.Tab1Dhis2Import.Updated+=1),"Deleted"==d.data&&(this.Tab1Dhis2Import.Deleted+=1)):("ErrorCount"==d.data&&(this.Tab1Dhis2Import.ErrorCount+=1),"ErrorMsg"==d.data&&(this.Tab1Dhis2Import.ErrorMsg+=1)),a==r&&(this.tab1_messages=i,this.loading1=!1)},d=>{this.loading1=!1,this.tab1_messages_error=d.toString(),console.log(d.error)})}}else this.tab1_messages=i,this.loading1=!1}catch{this.loading1=!1,this.tab1_messages_error=e.toString()}},e=>{this.loading1=!1,this.tab1_messages_error=e.toString(),console.log(e.error)}))}flushIhChtDataToDhis2(){this.isValidParams(this.ihChtToDhis2Form,"cht")&&(this.start_date_error=!1,this.end_date_error=!1,this.loading3=!0,this.tab3_messages=[],this.tab3_error_messages="",this.tab3_no_data_found=!1,this.Tab3Dhis2Import={ErrorCount:0,ErrorMsg:"",Created:0,Updated:0,Deleted:0},this.sync.ihChtDataPerChw(this.ParamsToFilter(this.ihChtToDhis2Form)).subscribe(e=>{if(200==e.status){var i=e.data;try{if(1==this.ihChtToDhis2Form.value.InsertIntoDhis2&&i.length>0){var a=0,r=0;for(let c=0;c<i.length;c++)a++,this.sync.insertOrUpdateDhis2Data(i[c].data).subscribe(l=>{r++,200==l.status?("Created"==l.data&&(this.Tab3Dhis2Import.Created+=1),"Updated"==l.data&&(this.Tab3Dhis2Import.Updated+=1),"Deleted"==l.data&&(this.Tab3Dhis2Import.Deleted+=1)):("ErrorCount"==l.data&&(this.Tab3Dhis2Import.ErrorCount+=1),"ErrorMsg"==l.data&&(this.Tab3Dhis2Import.ErrorMsg+="\n\n"+l.data)),a==r&&(this.loading3=!1,this.tab3_messages=i,this.tab3_no_data_found=i.length<=0)},l=>{this.loading3=!1,this.tab3_error_messages=l.toString(),console.log(l.error)})}else this.loading3=!1,this.tab3_messages=i,this.tab3_no_data_found=i.length<=0}catch{this.loading3=!1,this.tab3_no_data_found=!0,this.tab3_error_messages=e.data.toString()}}else this.loading3=!1,this.tab3_no_data_found=!0,this.tab3_error_messages=e.data.toString()},e=>{this.tab3_no_data_found=!1,this.loading3=!1,this.tab3_error_messages=e.toString()}))}flushRecapActivityDataToDhis2(){this.isValidParams(this.recapActivityToDhis2Form,"cht")&&(this.start_date_error=!1,this.end_date_error=!1,this.loading5=!0,this.tab5_messages=[],this.tab5_error_messages="",this.tab5_no_data_found=!1,this.Tab5Dhis2Import={ErrorCount:0,ErrorMsg:"",Created:0,Updated:0,Deleted:0},this.sync.recapActivityDataPerChw(this.ParamsToFilter(this.recapActivityToDhis2Form)).subscribe(e=>{const i=e.data??[],a={};for(const l of i)for(const _ of l.dataValues)"plW6bCSnXKU"==_.dataElement&&(a[_.value]=l);if(console.log(a),200==e.status){const l=i.length;try{if(1==this.recapActivityToDhis2Form.value.InsertIntoDhis2&&l>0){var r=0,c=0;for(const _ of i)r++,this.sync.insertOrUpdateRecapActivityDataToDhis2(_).subscribe(d=>{c++,console.log(d),200==d.status?("Created"==d.data&&(this.Tab5Dhis2Import.Created+=1),"Updated"==d.data&&(this.Tab5Dhis2Import.Updated+=1),"Deleted"==d.data&&(this.Tab5Dhis2Import.Deleted+=1)):("ErrorCount"==d.data&&(this.Tab5Dhis2Import.ErrorCount+=1),"ErrorMsg"==d.data&&(this.Tab5Dhis2Import.ErrorMsg+="\n\n"+d.data)),r==c&&(this.loading5=!1,this.tab5_messages=i,this.tab5_no_data_found=l<=0)},d=>{this.loading5=!1,this.tab5_error_messages=d.toString(),console.log(d.error)})}else this.loading5=!1,this.tab5_messages=i,this.tab5_no_data_found=l<=0}catch{this.loading5=!1,this.tab5_no_data_found=!0,this.tab5_error_messages=i.toString()}}else this.loading5=!1,this.tab5_no_data_found=!0,this.tab5_error_messages=i.toString()},e=>{this.tab5_no_data_found=!1,this.loading5=!1,this.tab5_error_messages=e.toString()}))}capitaliseData(e,i=" ",a=" "){return(0,u.Fs)(e,i,a)}getItemAsArray(e){return e.value}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.e),t.Y36(f.gz),t.Y36(T._))},n.\u0275cmp=t.Xpm({type:n,selectors:[["sync-to-dhis2"]],decls:206,vars:64,consts:[[1,"page-content-wrap"],[1,"col-12","col-sm-12"],[1,"card","card-warning","card-tabs"],[1,"card-header","p-0","pt-1"],["id","custom-tabs-one-tab","role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["id","custom-tabs-one-thinkmd-tab","data-toggle","pill","href","#custom-tabs-one-thinkmd","role","tab","aria-controls","custom-tabs-one-thinkmd","aria-selected","true",1,"nav-link","active"],["id","custom-tabs-one-cht-tab","data-toggle","pill","href","#custom-tabs-one-cht","role","tab","aria-controls","custom-tabs-one-cht","aria-selected","false",1,"nav-link"],["id","custom-tabs-one-cht-recap-tab","data-toggle","pill","href","#custom-tabs-one-cht-recap","role","tab","aria-controls","custom-tabs-one-cht-recap","aria-selected","false",1,"nav-link"],[1,"card-body"],["id","custom-tabs-one-tabContent",1,"tab-content"],["id","custom-tabs-one-thinkmd","role","tabpanel","aria-labelledby","custom-tabs-one-thinkmd-tab",1,"tab-pane","fade","show","active"],[1,"row"],[1,"col-sm-7"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"card","card-success"],[1,"card-header"],[1,"card-title"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-sm-6"],[1,"form-group"],["type","date","formControlName","end_date",3,"change"],[1,"col-sm-2"],[1,"col-sm-4"],[1,"form-check"],["id","thinkmdToDhis2","type","checkbox","formControlName","InsertIntoDhis2",1,"form-check-input"],["for","thinkmdToDhis2",1,"form-check-label"],["class","form-control","multiple","multiple","formControlName","districts",3,"change",4,"ngIf"],["class","form-control",4,"ngIf"],["class","form-control","multiple","multiple","formControlName","sites",3,"change",4,"ngIf"],[1,"card-footer"],["type","submit",1,"btn","btn-success","float-right",3,"disabled"],[1,"fa","fa-floppy-o","fa-right"],[1,"col-sm-5"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["id","custom-tabs-one-cht","role","tabpanel","aria-labelledby","custom-tabs-one-cht-tab",1,"tab-pane","fade"],[1,"card","card-info"],["type","date","formControlName","start_date",3,"change"],["id","InsertIntoDhis2","type","checkbox","formControlName","InsertIntoDhis2",1,"form-check-input"],["for","InsertIntoDhis2",1,"form-check-label"],["type","submit",1,"btn","btn-info","float-right",3,"disabled"],[1,"col-sm-12"],["class","card",4,"ngIf"],["id","custom-tabs-one-cht-recap","role","tabpanel","aria-labelledby","custom-tabs-one-cht-recap-tab",1,"tab-pane","fade"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],["multiple","multiple","formControlName","districts",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-control"],["multiple","multiple","formControlName","sites",1,"form-control",3,"change"],[1,"card"],[1,"card-body",2,"overflow-y","scroll!important"],["id","thinkmd_datatable",1,"table","table-bordered","table-striped"],["id","cht_datatable",1,"table","table-bordered","table-striped"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),t._uU(7,"ThinkMd vers DHIS2 "),t.qZA()(),t.TgZ(8,"li",5)(9,"a",7),t._uU(10,"Tonoudayo vers DHIS2 "),t.qZA()(),t.TgZ(11,"li",5)(12,"a",8),t._uU(13,"Fiche R\xe9cap vers DHIS2 "),t.qZA()()()(),t.TgZ(14,"div",9)(15,"div",10)(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14),t.YNc(20,C,4,1,"div",15),t.TgZ(21,"div",16)(22,"div",17)(23,"h3",18),t._uU(24,"Envoyer les donn\xe9es ThinkMd au Dhis2"),t.qZA()(),t.TgZ(25,"form",19),t.NdJ("ngSubmit",function(){return i.runThinkmdToDhis2()}),t.TgZ(26,"div",9)(27,"div",12)(28,"div",20)(29,"div",21)(30,"label"),t._uU(31,"Date de fin"),t.qZA(),t.TgZ(32,"input",22),t.NdJ("change",function(){return i.cleanError()}),t.qZA()()(),t._UZ(33,"div",23),t.TgZ(34,"div",24)(35,"div",21)(36,"label"),t._uU(37,"Use Dhis2"),t.qZA(),t.TgZ(38,"div",25),t._UZ(39,"input",26),t.TgZ(40,"label",27),t._uU(41,"Insert Into Dhis2"),t.qZA()()()()(),t.TgZ(42,"div",12)(43,"div",20)(44,"div",21)(45,"label"),t._uU(46,"District"),t.qZA(),t.YNc(47,q,2,1,"select",28),t.YNc(48,A,1,0,"select",29),t.qZA()(),t.TgZ(49,"div",20)(50,"div",21)(51,"label"),t._uU(52,"Site"),t.qZA(),t.YNc(53,I,2,1,"select",30),t.YNc(54,k,1,0,"select",29),t.qZA()()(),t._UZ(55,"br"),t.qZA(),t.TgZ(56,"div",31)(57,"button",32),t._uU(58," Charger les donn\xe9es "),t._UZ(59,"span",33),t.qZA()()()()()(),t.TgZ(60,"div",34),t.YNc(61,S,3,1,"div",35),t.YNc(62,N,2,1,"p",35),t._UZ(63,"br"),t.YNc(64,F,2,1,"p",35),t._UZ(65,"br"),t.YNc(66,O,2,1,"p",35),t._UZ(67,"br"),t.YNc(68,E,2,1,"p",35),t._UZ(69,"br"),t.YNc(70,J,2,1,"p",35),t._UZ(71,"br"),t.YNc(72,$,3,2,"div",36),t.ALo(73,"keyvalue"),t._uU(74),t._UZ(75,"br"),t.YNc(76,Y,3,1,"div",36),t.qZA()(),t.YNc(77,G,14,5,"div",37),t.qZA(),t.TgZ(78,"div",38)(79,"div",12)(80,"div",13)(81,"div",14),t.YNc(82,j,4,1,"div",15),t.TgZ(83,"div",39)(84,"div",17)(85,"h3",18),t._uU(86,"Envoyer les donn\xe9es Tonoudayo au Dhis2"),t.qZA()(),t.TgZ(87,"form",19),t.NdJ("ngSubmit",function(){return i.flushIhChtDataToDhis2()}),t.TgZ(88,"div",9)(89,"div",12)(90,"div",20)(91,"div",21)(92,"label"),t._uU(93,"Date de d\xe9but"),t.qZA(),t.TgZ(94,"input",40),t.NdJ("change",function(){return i.cleanError()}),t.qZA()()(),t.TgZ(95,"div",20)(96,"div",21)(97,"label"),t._uU(98,"Date de fin"),t.qZA(),t.TgZ(99,"input",22),t.NdJ("change",function(){return i.cleanError()}),t.qZA()()()(),t.TgZ(100,"div",12)(101,"div",20)(102,"div",21)(103,"label"),t._uU(104,"District"),t.qZA(),t.YNc(105,K,2,1,"select",28),t.YNc(106,H,1,0,"select",29),t.qZA()(),t.TgZ(107,"div",20)(108,"div",21)(109,"label"),t._uU(110,"Site"),t.qZA(),t.YNc(111,V,2,1,"select",30),t.YNc(112,B,1,0,"select",29),t.qZA()()(),t.TgZ(113,"div",12)(114,"div",20)(115,"div",21)(116,"label"),t._uU(117,"Use Dhis2"),t.qZA(),t.TgZ(118,"div",25),t._UZ(119,"input",41),t.TgZ(120,"label",42),t._uU(121,"Insert Into Dhis2"),t.qZA()()()()()(),t.TgZ(122,"div",31)(123,"button",43),t._uU(124," Charger les donn\xe9es "),t._UZ(125,"span",33),t.qZA()()()()()(),t.TgZ(126,"div",34),t.YNc(127,X,2,1,"p",35),t._UZ(128,"br"),t.YNc(129,R,2,1,"p",35),t._UZ(130,"br"),t.YNc(131,tt,2,1,"p",35),t._UZ(132,"br"),t.YNc(133,et,2,1,"p",35),t._UZ(134,"br"),t.YNc(135,nt,2,1,"p",35),t._UZ(136,"br"),t.YNc(137,it,4,1,"h2",35),t.YNc(138,st,4,0,"h2",35),t.qZA()(),t.TgZ(139,"div",12)(140,"div",44),t.YNc(141,ct,13,5,"div",45),t.qZA()()(),t.TgZ(142,"div",46)(143,"div",12)(144,"div",13)(145,"div",14),t.YNc(146,dt,4,1,"div",15),t.TgZ(147,"div",39)(148,"div",17)(149,"h3",18),t._uU(150,"Envoyer les donn\xe9es Fiches R\xe9caps de Tonoudayo au Dhis2"),t.qZA()(),t.TgZ(151,"form",19),t.NdJ("ngSubmit",function(){return i.flushRecapActivityDataToDhis2()}),t.TgZ(152,"div",9)(153,"div",12)(154,"div",20)(155,"div",21)(156,"label"),t._uU(157,"Date de d\xe9but"),t.qZA(),t.TgZ(158,"input",40),t.NdJ("change",function(){return i.cleanError()}),t.qZA()()(),t.TgZ(159,"div",20)(160,"div",21)(161,"label"),t._uU(162,"Date de fin"),t.qZA(),t.TgZ(163,"input",22),t.NdJ("change",function(){return i.cleanError()}),t.qZA()()()(),t.TgZ(164,"div",12)(165,"div",20)(166,"div",21)(167,"label"),t._uU(168,"District"),t.qZA(),t.YNc(169,_t,2,1,"select",28),t.YNc(170,ht,1,0,"select",29),t.qZA()(),t.TgZ(171,"div",20)(172,"div",21)(173,"label"),t._uU(174,"Site"),t.qZA(),t.YNc(175,pt,2,1,"select",30),t.YNc(176,mt,1,0,"select",29),t.qZA()()(),t.TgZ(177,"div",12)(178,"div",20)(179,"div",21)(180,"label"),t._uU(181,"Use Dhis2"),t.qZA(),t.TgZ(182,"div",25),t._UZ(183,"input",41),t.TgZ(184,"label",42),t._uU(185,"Insert Into Dhis2"),t.qZA()()()()()(),t.TgZ(186,"div",31)(187,"button",43),t._uU(188," Envoy\xe9 au DHIS2 "),t._UZ(189,"span",33),t.qZA()()()()()(),t.TgZ(190,"div",34),t.YNc(191,ft,2,1,"p",35),t._UZ(192,"br"),t.YNc(193,bt,2,1,"p",35),t._UZ(194,"br"),t.YNc(195,Tt,2,1,"p",35),t._UZ(196,"br"),t.YNc(197,Zt,2,1,"p",35),t._UZ(198,"br"),t.YNc(199,vt,2,1,"p",35),t._UZ(200,"br"),t.YNc(201,yt,4,1,"h2",35),t.YNc(202,Dt,4,0,"h2",35),t.qZA()(),t.TgZ(203,"div",12)(204,"div",44),t.YNc(205,At,11,5,"div",45),t.qZA()()()()()()()()),2&e&&(t.xp6(20),t.Q6J("ngIf",i.loading1),t.xp6(5),t.Q6J("formGroup",i.thinkmdToDhis2Form),t.xp6(7),t.Gre("form-control ",i.endDateError(),""),t.xp6(15),t.Q6J("ngIf",i.Districts$.length>0),t.xp6(1),t.Q6J("ngIf",0==i.Districts$.length),t.xp6(5),t.Q6J("ngIf",i.sites$.length>0),t.xp6(1),t.Q6J("ngIf",0==i.sites$.length),t.xp6(3),t.Q6J("disabled",!i.thinkmdToDhis2Form.valid),t.xp6(4),t.Q6J("ngIf",null!=i.tab1_messages_error),t.xp6(1),t.Q6J("ngIf",i.Tab1Dhis2Import.Created>0),t.xp6(2),t.Q6J("ngIf",i.Tab1Dhis2Import.Updated>0),t.xp6(2),t.Q6J("ngIf",i.Tab1Dhis2Import.Deleted>0),t.xp6(2),t.Q6J("ngIf",i.Tab1Dhis2Import.ErrorCount>0),t.xp6(2),t.Q6J("ngIf",""!=i.Tab1Dhis2Import.ErrorMsg),t.xp6(2),t.Q6J("ngForOf",t.lcZ(73,62,null==i.tab1_messages||null==i.tab1_messages.dataToSend?null:i.tab1_messages.dataToSend.ErrorMsg)),t.xp6(2),t.hij(" ",null==i.tab1_messages||null==i.tab1_messages.errorToSend?null:i.tab1_messages.errorToSend.ConsoleError,""),t.xp6(2),t.Q6J("ngForOf",null==i.tab1_messages||null==i.tab1_messages.errorToSend?null:i.tab1_messages.errorToSend.ErrorData),t.xp6(1),t.Q6J("ngIf",null==i.tab1_messages||null==i.tab1_messages.dataToSend?null:i.tab1_messages.dataToSend.Data),t.xp6(5),t.Q6J("ngIf",i.loading3),t.xp6(5),t.Q6J("formGroup",i.ihChtToDhis2Form),t.xp6(7),t.Gre("form-control ",i.startDateError(),""),t.xp6(5),t.Gre("form-control ",i.endDateError(),""),t.xp6(6),t.Q6J("ngIf",i.Districts$.length>0),t.xp6(1),t.Q6J("ngIf",0==i.Districts$.length),t.xp6(5),t.Q6J("ngIf",i.sites$.length>0),t.xp6(1),t.Q6J("ngIf",0==i.sites$.length),t.xp6(11),t.Q6J("disabled",!i.ihChtToDhis2Form.valid),t.xp6(4),t.Q6J("ngIf",i.Tab3Dhis2Import.Created>0),t.xp6(2),t.Q6J("ngIf",i.Tab3Dhis2Import.Updated>0),t.xp6(2),t.Q6J("ngIf",i.Tab3Dhis2Import.Deleted>0),t.xp6(2),t.Q6J("ngIf",i.Tab3Dhis2Import.ErrorCount>0),t.xp6(2),t.Q6J("ngIf",""!=i.Tab3Dhis2Import.ErrorMsg),t.xp6(2),t.Q6J("ngIf",""!=i.tab3_error_messages),t.xp6(1),t.Q6J("ngIf",1==i.tab3_no_data_found),t.xp6(3),t.Q6J("ngIf",""==i.tab3_error_messages&&i.tab3_messages.length>0),t.xp6(5),t.Q6J("ngIf",i.loading5),t.xp6(5),t.Q6J("formGroup",i.recapActivityToDhis2Form),t.xp6(7),t.Gre("form-control ",i.startDateError(),""),t.xp6(5),t.Gre("form-control ",i.endDateError(),""),t.xp6(6),t.Q6J("ngIf",i.Districts$.length>0),t.xp6(1),t.Q6J("ngIf",0==i.Districts$.length),t.xp6(5),t.Q6J("ngIf",i.sites$.length>0),t.xp6(1),t.Q6J("ngIf",0==i.sites$.length),t.xp6(11),t.Q6J("disabled",!i.recapActivityToDhis2Form.valid),t.xp6(4),t.Q6J("ngIf",i.Tab5Dhis2Import.Created>0),t.xp6(2),t.Q6J("ngIf",i.Tab5Dhis2Import.Updated>0),t.xp6(2),t.Q6J("ngIf",i.Tab5Dhis2Import.Deleted>0),t.xp6(2),t.Q6J("ngIf",i.Tab5Dhis2Import.ErrorCount>0),t.xp6(2),t.Q6J("ngIf",""!=i.Tab5Dhis2Import.ErrorMsg),t.xp6(2),t.Q6J("ngIf",""!=i.tab5_error_messages),t.xp6(1),t.Q6J("ngIf",1==i.tab5_no_data_found),t.xp6(3),t.Q6J("ngIf",""==i.tab5_error_messages&&i.tab5_messages.length>0))},dependencies:[g.sg,g.O5,o._Y,o.YN,o.Kr,o.Fj,o.Wl,o.K7,o.JJ,o.JL,o.sg,o.u,g.Nd],styles:["input[type=checkbox]:checked{filter:invert(90%) hue-rotate(45deg) brightness(1.7);height:18px;width:18px;transform:rotate(-45deg)}input[type=checkbox]{height:18px;width:18px}.form-check-label{margin-top:5px;margin-left:5px}.mat-calendar-body-cell.notSelected{background-color:#4682b4;border-radius:100%;width:50px;height:50px}.mat-calendar-body-cell.selected{background-color:red!important;border-radius:100%;width:50px;height:50px}.results{background-color:#ffebcd;min-height:100px;width:500px}.org-unit-success{padding-left:10px;color:green}.org-unit-error{padding-left:20px;color:red}.borderError{border:solid red 2px}.danger{color:red;font-weight:700}.warning{color:orange;font-weight:700}.infos{color:#8a2be2;font-weight:700}.good{font-weight:700}\n"],encapsulation:2}),n})();function It(n,s){if(1&n&&(t.TgZ(0,"div",55),t._UZ(1,"i",56),t.TgZ(2,"div",57),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.LoadingMsg)}}function kt(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",58),t._uU(4),t.qZA(),t.TgZ(5,"td",59),t._uU(6),t.qZA(),t.TgZ(7,"td",59),t._uU(8),t.qZA(),t.TgZ(9,"td",59),t._uU(10),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value.successCount),t.xp6(2),t.Oqu(e.value.errorCount),t.xp6(2),t.Oqu(e.value.errorIds),t.xp6(2),t.Oqu(e.value.errorElements)}}function St(n,s){if(1&n&&(t.TgZ(0,"div",10)(1,"table",53)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"El\xe9ment"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"SuccessCount"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"ErrorsCount"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"ErrorsIds"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"ErrorsMsg"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,kt,11,5,"tr",54),t.ALo(16,"keyvalue"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",t.lcZ(16,1,e.tab1_messages))}}function Nt(n,s){if(1&n&&(t.TgZ(0,"div",55),t._UZ(1,"i",56),t.TgZ(2,"div",57),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.LoadingMsg)}}function Ft(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",58),t._uU(4),t.qZA(),t.TgZ(5,"td",59),t._uU(6),t.qZA(),t.TgZ(7,"td",59),t._uU(8),t.qZA(),t.TgZ(9,"td",59),t._uU(10),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value.successCount),t.xp6(2),t.Oqu(e.value.errorCount),t.xp6(2),t.Oqu(e.value.errorIds),t.xp6(2),t.Oqu(e.value.errorElements)}}function Ot(n,s){if(1&n&&(t.TgZ(0,"div",10)(1,"table",53)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"El\xe9ment"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"SuccessCount"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"ErrorsCount"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"ErrorsIds"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"ErrorsMsg"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,Ft,11,5,"tr",54),t.ALo(16,"keyvalue"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",t.lcZ(16,1,e.tab2_messages))}}function Et(n,s){if(1&n&&(t.TgZ(0,"div",55),t._UZ(1,"i",56),t.TgZ(2,"div",57),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.LoadingMsg)}}function Jt(n,s){if(1&n&&(t.TgZ(0,"option",60),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function $t(n,s){if(1&n&&(t.TgZ(0,"option",60),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.external_id),t.xp6(1),t.hij(" ",e.name," ")}}function Yt(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",58),t._uU(4),t.qZA(),t.TgZ(5,"td",59),t._uU(6),t.qZA(),t.TgZ(7,"td",59),t._uU(8),t.qZA(),t.TgZ(9,"td",59),t._uU(10),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value.successCount),t.xp6(2),t.Oqu(e.value.errorCount),t.xp6(2),t.Oqu(e.value.errorIds),t.xp6(2),t.Oqu(e.value.errorElements)}}function Qt(n,s){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,Yt,11,5,"tr",54),t.ALo(2,"keyvalue"),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e))}}function Mt(n,s){if(1&n&&(t.TgZ(0,"div",10)(1,"table",53)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"El\xe9ment"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"SuccessCount"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"ErrorsCount"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"ErrorsIds"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"ErrorsMsg"),t.qZA()()(),t.YNc(14,Qt,3,3,"tbody",54),t.qZA()()),2&n){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.tab3_messages)}}function Lt(n,s){if(1&n&&(t.TgZ(0,"div",55),t._UZ(1,"i",56),t.TgZ(2,"div",57),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.LoadingMsg)}}function Wt(n,s){if(1&n&&(t.TgZ(0,"h3",59),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.tab4_messages)}}function Gt(n,s){if(1&n&&(t.TgZ(0,"tbody")(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA()()()),2&n){const e=s.$implicit;t.xp6(3),t.Oqu(e.id),t.xp6(2),t.Oqu(e.rev),t.xp6(2),t.Oqu(e.username),t.xp6(2),t.Oqu(e.fullname),t.xp6(2),t.Oqu(e.code),t.xp6(2),t.Oqu(e.type),t.xp6(2),t.Oqu(e.contact),t.xp6(2),t.Oqu(e.role),t.xp6(2),t.Oqu(e.place)}}let jt=(()=>{class n{constructor(e,i){this.sync=e,this.auth=i,this.tab1_messages=null,this.tab2_messages=null,this.tab3_messages=[],this.LoadingMsg="Loading...",this.Districts$=[],this.Sites$=[],this.sites$=[]}ngOnInit(){var e=this;this.initDate=(0,m.vW)(),this.sync.getDistrictsList().subscribe(function(){var i=(0,p.Z)(function*(a){200==a.status&&(e.Districts$=a.data,e.sync.getSitesList().subscribe(function(){var r=(0,p.Z)(function*(c){200==c.status&&(e.Sites$=c.data),e.getChtUsersFromDb()});return function(c){return r.apply(this,arguments)}}(),r=>console.log(r)))});return function(a){return i.apply(this,arguments)}}(),i=>console.log(i)),this.loading1=!1,this.loading2=!1,this.loading3=!1,this.loading4=!1,this.chwsDataForm=this.createChwsDataFormGroup(),this.dhis2ChwsDataForm=this.createDhis2ChwsDataFormGroup(),this.orgUnitAndPersonForm=this.createOrgUnitAndPersonFormGroup()}createOrgUnitAndPersonFormGroup(){return new o.cw({start_date:new o.NI(this.initDate.start_date,[o.kI.required,o.kI.minLength(7)]),end_date:new o.NI(this.initDate.end_date,[o.kI.required,o.kI.minLength(7)]),site:new o.NI(!0,[o.kI.required]),zone:new o.NI(!0,[o.kI.required]),family:new o.NI(!0,[o.kI.required]),patient:new o.NI(!0,[o.kI.required]),chw:new o.NI(!0,[o.kI.required])})}createChwsDataFormGroup(){return new o.cw({start_date:new o.NI(this.initDate.start_date,[o.kI.required,o.kI.minLength(7)]),end_date:new o.NI(this.initDate.end_date,[o.kI.required,o.kI.minLength(7)])})}createDhis2ChwsDataFormGroup(){return new o.cw({start_date:new o.NI(this.initDate.start_date,[o.kI.required,o.kI.minLength(7)]),end_date:new o.NI(this.initDate.end_date,[o.kI.required,o.kI.minLength(7)]),districts:new o.NI("",[o.kI.required]),sites:new o.NI("",[o.kI.required])})}genarateSites(){this.sites$=[];const e=(0,u.pb)(this.dhis2ChwsDataForm.value.districts);if(this.dhis2ChwsDataForm.value.sites="",(0,u.Nf)(e))for(let i=0;i<this.Sites$.length;i++){const a=this.Sites$[i];(0,u.Nf)(a)&&e.includes(a.district.id)&&this.sites$.push(a)}else this.sites$=[]}getSiteById(e){for(let i=0;i<this.sites$.length;i++){const a=this.sites$[i];if(a.external_id==e)return a.name}return e}syncOrgUnitsFromCouchDb(){this.loading1=!0,this.tab1_messages=null,this.sync.syncOrgUnits(this.orgUnitAndPersonForm.value).subscribe(e=>{this.loading1=!1,this.tab1_messages=e},e=>{this.loading1=!1,this.tab1_messages=e.error})}syncChtUsersFromCouchDb(){this.loading4=!0,this.tab4_messages=null,this.sync.syncCouchDbUsers().subscribe(e=>{200==e.status?this.users$=e.data:this.tab4_messages=e.data,this.loading4=!1},e=>{this.tab4_messages=e.error,this.loading4=!1})}getChtUsersFromDb(){this.sync.getChtUsers().subscribe(e=>{200==e.status&&(this.users$=e.data)},e=>{})}syncChtOrgUnitFromCouchDb(){this.loading2=!0,this.tab2_messages=null,this.sync.syncCouchDbOrgUnit(this.chwsDataForm.value).subscribe(e=>{this.loading2=!1,this.tab2_messages=e},e=>{this.loading2=!1,this.tab2_messages=e.error})}syncChwsDataFromDhis2(){var e=this;return(0,p.Z)(function*(){const i=(0,u.pb)(e.dhis2ChwsDataForm.value.sites);e.tab3_messages=[],e.loading3=!0;var a=[];for(let r=0;r<i.length;r++)yield e.sync.syncDhis2ChwsData({orgUnit:i[r],filter:[`RlquY86kI66:GE:${e.dhis2ChwsDataForm.value.start_date}:LE:${e.dhis2ChwsDataForm.value.end_date}`],fields:["event","orgUnit","orgUnitName","dataValues[dataElement,value]"]}).subscribe(c=>{e.tab3_messages.push(c),a.push("Ok"),a.length==i.length&&(e.loading3=!1)},c=>{e.loading3=!1,e.tab3_messages.push(c.error)})})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T._),t.Y36(b.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["sync-orgunit-data"]],decls:190,vars:17,consts:[[1,"page-content-wrap"],[1,"col-12","col-sm-12"],[1,"card","card-primary","card-tabs"],[1,"card-header","p-0","pt-1"],["id","custom-tabs-one-tab","role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["id","custom-tabs-one-sync-orgunits-tab","data-toggle","pill","href","#custom-tabs-one-sync-orgunits","role","tab","aria-controls","custom-tabs-one-sync-orgunits","aria-selected","true",1,"nav-link","active"],["id","custom-tabs-one-sync-chws-tab","data-toggle","pill","href","#custom-tabs-one-sync-chws","role","tab","aria-controls","custom-tabs-one-sync-chws","aria-selected","false",1,"nav-link"],["id","custom-tabs-one-sync-dhis2-chws-tab","data-toggle","pill","href","#custom-tabs-one-sync-dhis2-chws","role","tab","aria-controls","custom-tabs-one-sync-dhis2-chws","aria-selected","false",1,"nav-link"],["id","custom-tabs-one-sync-cht-users-tab","data-toggle","pill","href","#custom-tabs-one-sync-cht-users","role","tab","aria-controls","custom-tabs-one-sync-cht-users","aria-selected","false",1,"nav-link"],[1,"card-body"],["id","custom-tabs-one-tabContent",1,"tab-content"],["id","custom-tabs-one-sync-orgunits","role","tabpanel","aria-labelledby","custom-tabs-one-sync-orgunits-tab",1,"tab-pane","fade","show","active"],[1,"row"],[1,"col-sm-12"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"card","card-default"],[1,"card-header"],[1,"card-title"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-sm-2","col-6"],[1,"form-group"],["type","date","formControlName","start_date",1,"form-control"],["type","date","formControlName","end_date",1,"form-control"],[1,"col-sm-2"],[1,"form-check"],["id","useTokenSite","type","checkbox","formControlName","site",1,"form-check-input"],["for","useTokenSite",1,"form-check-label"],["id","useTokenZone","type","checkbox","formControlName","zone",1,"form-check-input"],["for","useTokenZone",1,"form-check-label"],["id","useTokenFamily","type","checkbox","formControlName","family",1,"form-check-input"],["for","useTokenFamily",1,"form-check-label"],["id","useTokenPatient","type","checkbox","formControlName","patient",1,"form-check-input"],["for","useTokenPatient",1,"form-check-label"],["id","useTokenChw","type","checkbox","formControlName","chw",1,"form-check-input"],["for","useTokenChw",1,"form-check-label"],[1,"card-footer"],["type","submit",1,"btn","btn-danger","float-right",3,"disabled"],[1,"fa","fa-floppy-o","fa-right"],["class","card-body",4,"ngIf"],["id","custom-tabs-one-sync-chws","role","tabpanel","aria-labelledby","custom-tabs-one-sync-chws-tab",1,"tab-pane","fade"],[1,"card","card-warning"],[1,"col-sm-6"],["type","submit",1,"btn","btn-warning","float-right",3,"disabled"],["id","custom-tabs-one-sync-dhis2-chws","role","tabpanel","aria-labelledby","custom-tabs-one-sync-dhis2-chws-tab",1,"tab-pane","fade"],[1,"card","card-success"],["formControlName","districts","multiple","multiple",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["formControlName","sites","multiple","multiple",1,"form-control"],["id","custom-tabs-one-sync-cht-users","role","tabpanel","aria-labelledby","custom-tabs-one-sync-cht-users-tab",1,"tab-pane","fade"],["class","org-unit-error",4,"ngIf"],["type","submit",1,"btn","btn-primary","float-right",3,"click"],["id","sync_chws_datatable",1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],[1,"org-unit-success"],[1,"org-unit-error"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),t._uU(7,"Sync OrgUnit "),t.qZA()(),t.TgZ(8,"li",5)(9,"a",7),t._uU(10,"Sync Chws Data "),t.qZA()(),t.TgZ(11,"li",5)(12,"a",8),t._uU(13,"Sync DHIS2 Chws Data "),t.qZA()(),t.TgZ(14,"li",5)(15,"a",9),t._uU(16,"Sync CHT Users "),t.qZA()()()(),t.TgZ(17,"div",10)(18,"div",11)(19,"div",12)(20,"div",13)(21,"div",14)(22,"div",15),t.YNc(23,It,4,1,"div",16),t.TgZ(24,"div",17)(25,"div",18)(26,"h3",19),t._uU(27,"Synchroniser OrgUnit, Patients and Chws"),t.qZA()(),t.TgZ(28,"form",20),t.NdJ("ngSubmit",function(){return i.syncOrgUnitsFromCouchDb()}),t.TgZ(29,"div",10)(30,"div",13)(31,"div",21)(32,"div",22)(33,"label"),t._uU(34,"Date de d\xe9but"),t.qZA(),t._UZ(35,"input",23),t.qZA()(),t.TgZ(36,"div",21)(37,"div",22)(38,"label"),t._uU(39,"Date de fin"),t.qZA(),t._UZ(40,"input",24),t.qZA()()(),t.TgZ(41,"div",13)(42,"div",25)(43,"div",22)(44,"div",26),t._UZ(45,"input",27),t.TgZ(46,"label",28),t._uU(47," District & Site"),t.qZA()()()(),t.TgZ(48,"div",25)(49,"div",22)(50,"div",26),t._UZ(51,"input",29),t.TgZ(52,"label",30),t._uU(53," Zone"),t.qZA()()()(),t.TgZ(54,"div",25)(55,"div",22)(56,"div",26),t._UZ(57,"input",31),t.TgZ(58,"label",32),t._uU(59," Family"),t.qZA()()()(),t.TgZ(60,"div",25)(61,"div",22)(62,"div",26),t._UZ(63,"input",33),t.TgZ(64,"label",34),t._uU(65," Patient"),t.qZA()()()(),t.TgZ(66,"div",25)(67,"div",22)(68,"div",26),t._UZ(69,"input",35),t.TgZ(70,"label",36),t._uU(71," Chw"),t.qZA()()()()()(),t.TgZ(72,"div",37)(73,"button",38),t._uU(74," D\xe9marrer la synchronisation "),t._UZ(75,"span",39),t.qZA()()()()()()(),t.TgZ(76,"div",13)(77,"div",14),t.YNc(78,St,17,3,"div",40),t.qZA()()(),t.TgZ(79,"div",41)(80,"div",13)(81,"div",14)(82,"div",15),t.YNc(83,Nt,4,1,"div",16),t.TgZ(84,"div",42)(85,"div",18)(86,"h3",19),t._uU(87,"Syncroniser les donn\xe9es Tonoudayo des ASC"),t.qZA()(),t.TgZ(88,"form",20),t.NdJ("ngSubmit",function(){return i.syncChtOrgUnitFromCouchDb()}),t.TgZ(89,"div",10)(90,"div",13)(91,"div",43)(92,"div",22)(93,"label"),t._uU(94,"Date de d\xe9but"),t.qZA(),t._UZ(95,"input",23),t.qZA()(),t.TgZ(96,"div",43)(97,"div",22)(98,"label"),t._uU(99,"Date de fin"),t.qZA(),t._UZ(100,"input",24),t.qZA()()()(),t.TgZ(101,"div",37)(102,"button",44),t._uU(103," Synchroniser des donn\xe9es"),t._UZ(104,"span",39),t.qZA()()()()()()(),t.TgZ(105,"div",13)(106,"div",14),t.YNc(107,Ot,17,3,"div",40),t.qZA()()(),t.TgZ(108,"div",45)(109,"div",13)(110,"div",14)(111,"div",15),t.YNc(112,Et,4,1,"div",16),t.TgZ(113,"div",46)(114,"div",18)(115,"h3",19),t._uU(116,"Synchroniser les donn\xe9es Dhis2 des ASC"),t.qZA()(),t.TgZ(117,"form",20),t.NdJ("ngSubmit",function(){return i.syncChwsDataFromDhis2()}),t.TgZ(118,"div",10)(119,"div",13)(120,"div",43)(121,"div",22)(122,"label"),t._uU(123,"Date de d\xe9but"),t.qZA(),t._UZ(124,"input",23),t.qZA()(),t.TgZ(125,"div",43)(126,"div",22)(127,"label"),t._uU(128,"Date de fin"),t.qZA(),t._UZ(129,"input",24),t.qZA()()(),t.TgZ(130,"div",13)(131,"div",43)(132,"div",22)(133,"label"),t._uU(134,"District"),t.qZA(),t.TgZ(135,"select",47),t.NdJ("change",function(){return i.genarateSites()}),t.YNc(136,Jt,2,2,"option",48),t.qZA()()(),t.TgZ(137,"div",43)(138,"div",22)(139,"label"),t._uU(140,"Site"),t.qZA(),t.TgZ(141,"select",49),t.YNc(142,$t,2,2,"option",48),t.qZA()()()()(),t.TgZ(143,"div",37)(144,"button",44),t._uU(145," Charger les donn\xe9es "),t._UZ(146,"span",39),t.qZA()()()()()()(),t.TgZ(147,"div",13)(148,"div",14),t.YNc(149,Mt,15,1,"div",40),t.qZA()()(),t.TgZ(150,"div",50)(151,"div",13)(152,"div",14)(153,"div",15),t.YNc(154,Lt,4,1,"div",16),t.TgZ(155,"div",46)(156,"div",18)(157,"h3",19),t._uU(158,"Synchroniser les Utilisateurs de Tonoudayo"),t.qZA()(),t.TgZ(159,"div",10),t.YNc(160,Wt,2,1,"h3",51),t.qZA(),t.TgZ(161,"div",37)(162,"button",52),t.NdJ("click",function(){return i.syncChtUsersFromCouchDb()}),t._uU(163," Synchroniser "),t._UZ(164,"span",39),t.qZA()()()()()(),t.TgZ(165,"div",13)(166,"div",14)(167,"div",10)(168,"table",53)(169,"thead")(170,"tr")(171,"th"),t._uU(172,"Id"),t.qZA(),t.TgZ(173,"th"),t._uU(174,"Rev"),t.qZA(),t.TgZ(175,"th"),t._uU(176,"Username"),t.qZA(),t.TgZ(177,"th"),t._uU(178,"Fullname"),t.qZA(),t.TgZ(179,"th"),t._uU(180,"Code"),t.qZA(),t.TgZ(181,"th"),t._uU(182,"Type"),t.qZA(),t.TgZ(183,"th"),t._uU(184,"Contact"),t.qZA(),t.TgZ(185,"th"),t._uU(186,"Role"),t.qZA(),t.TgZ(187,"th"),t._uU(188,"Place"),t.qZA()()(),t.YNc(189,Gt,20,9,"tbody",54),t.qZA()()()()()()()()()()),2&e&&(t.xp6(23),t.Q6J("ngIf",i.loading1),t.xp6(5),t.Q6J("formGroup",i.orgUnitAndPersonForm),t.xp6(45),t.Q6J("disabled",!i.orgUnitAndPersonForm.valid),t.xp6(5),t.Q6J("ngIf",null!=i.tab1_messages),t.xp6(5),t.Q6J("ngIf",i.loading2),t.xp6(5),t.Q6J("formGroup",i.chwsDataForm),t.xp6(14),t.Q6J("disabled",!i.chwsDataForm.valid),t.xp6(5),t.Q6J("ngIf",null!=i.tab2_messages),t.xp6(5),t.Q6J("ngIf",i.loading3),t.xp6(5),t.Q6J("formGroup",i.dhis2ChwsDataForm),t.xp6(19),t.Q6J("ngForOf",i.Districts$),t.xp6(6),t.Q6J("ngForOf",i.sites$),t.xp6(2),t.Q6J("disabled",!i.dhis2ChwsDataForm.valid),t.xp6(5),t.Q6J("ngIf",i.tab3_messages.length>0),t.xp6(5),t.Q6J("ngIf",i.loading4),t.xp6(6),t.Q6J("ngIf",i.tab4_messages),t.xp6(29),t.Q6J("ngForOf",i.users$))},dependencies:[g.sg,g.O5,o._Y,o.YN,o.Kr,o.Fj,o.Wl,o.K7,o.JJ,o.JL,o.sg,o.u,g.Nd],styles:["input[type=checkbox]:checked{filter:invert(90%) hue-rotate(45deg) brightness(1.7);height:18px;width:18px;transform:rotate(-45deg)}input[type=checkbox]{height:18px;width:18px}.form-check-label{margin-top:5px;margin-left:5px}.mat-calendar-body-cell.notSelected{background-color:#4682b4;border-radius:100%;width:50px;height:50px}.mat-calendar-body-cell.selected{background-color:red!important;border-radius:100%;width:50px;height:50px}.results{background-color:#ffebcd;min-height:100px;width:500px}.org-unit-success{padding-left:10px;color:green}.org-unit-error{padding-left:20px;color:red}.borderError{border:solid red 2px}.danger{color:red;font-weight:700}.warning{color:orange;font-weight:700}.infos{color:#8a2be2;font-weight:700}.good{font-weight:700}\n"],encapsulation:2}),n})();var Pt=h(5732);function Kt(n,s){if(1&n&&(t.TgZ(0,"div",26),t._UZ(1,"i",27),t.TgZ(2,"div",28),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.LoadingMsg)}}function Ht(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t._uU(6),t.qZA(),t.TgZ(7,"td",34),t._uU(8),t.qZA(),t.TgZ(9,"td",34),t._uU(10),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value.successCount),t.xp6(2),t.Oqu(e.value.errorCount),t.xp6(2),t.Oqu(e.value.errorIds),t.xp6(2),t.Oqu(e.value.errorElements)}}function zt(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t._uU(6),t.qZA(),t.TgZ(7,"td",34),t._uU(8),t.qZA(),t.TgZ(9,"td",34),t._uU(10),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value.successCount),t.xp6(2),t.Oqu(e.value.errorCount),t.xp6(2),t.Oqu(e.value.errorIds),t.xp6(2),t.Oqu(e.value.errorElements)}}function Vt(n,s){1&n&&(t.TgZ(0,"tr")(1,"th",30),t._uU(2,"Dhis2"),t.qZA()())}function Bt(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t._uU(6),t.qZA(),t.TgZ(7,"td",34),t._uU(8),t.qZA(),t.TgZ(9,"td",34),t._uU(10),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value.successCount),t.xp6(2),t.Oqu(e.value.errorCount),t.xp6(2),t.Oqu(e.value.errorIds),t.xp6(2),t.Oqu(e.value.errorElements)}}function Xt(n,s){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,Vt,3,0,"tr",32),t.YNc(2,Bt,11,5,"tr",31),t.ALo(3,"keyvalue"),t.qZA()),2&n){const e=s.$implicit,i=s.index;t.xp6(1),t.Q6J("ngIf",1==i),t.xp6(1),t.Q6J("ngForOf",t.lcZ(3,2,e))}}function Rt(n,s){if(1&n&&(t.TgZ(0,"tbody")(1,"tr")(2,"th",35),t._uU(3,"Error"),t.qZA()(),t.TgZ(4,"tr")(5,"td"),t._uU(6),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(6),t.Oqu(e.tab1_messages.successDetails)}}function te(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value)}}function ee(n,s){if(1&n&&(t.TgZ(0,"tbody")(1,"tr")(2,"th",36),t._uU(3,"Success D\xe9tail"),t.qZA()(),t.YNc(4,te,5,2,"tr",31),t.ALo(5,"keyvalue"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",t.lcZ(5,1,e.tab1_messages.successDetails))}}function ne(n,s){if(1&n&&(t.TgZ(0,"div",7)(1,"table",29)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"El\xe9ment"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"SuccessCount"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"ErrorsCount"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"ErrorsIds"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"ErrorsMsg"),t.qZA()()(),t.TgZ(14,"tbody")(15,"tr")(16,"th",30),t._uU(17,"Org Units"),t.qZA()(),t.YNc(18,Ht,11,5,"tr",31),t.ALo(19,"keyvalue"),t.qZA(),t.TgZ(20,"tbody")(21,"tr")(22,"th",30),t._uU(23,"Tonoudayo"),t.qZA()(),t.YNc(24,zt,11,5,"tr",31),t.ALo(25,"keyvalue"),t.qZA(),t.YNc(26,Xt,4,4,"tbody",31),t.YNc(27,Rt,7,1,"tbody",32),t.YNc(28,ee,6,3,"tbody",32),t.qZA()()),2&n){const e=t.oxw();t.xp6(18),t.Q6J("ngForOf",t.lcZ(19,5,e.tab1_messages.orgunit)),t.xp6(6),t.Q6J("ngForOf",t.lcZ(25,7,e.tab1_messages.tonoudayo)),t.xp6(2),t.Q6J("ngForOf",e.tab1_messages.dhis2),t.xp6(1),t.Q6J("ngIf",null!=e.tab1_messages.globalError),t.xp6(1),t.Q6J("ngIf",null!=e.tab1_messages.successDetails)}}let ie=(()=>{class n{constructor(e,i,a,r){this.route=e,this.sync=i,this.http=a,this.auth=r,this.tab1_messages=null,this.LoadingMsg="Loading...",this.Districts$=[],this.Sites$=[],this.sites$=[]}ngOnInit(){this.initDate=(0,m.vW)(),this.syncAllForm=this.createSyncAllFormGroup()}createSyncAllFormGroup(){return new o.cw({start_date:new o.NI(this.initDate.start_date,[o.kI.required,o.kI.minLength(7)]),end_date:new o.NI(this.initDate.end_date,[o.kI.required,o.kI.minLength(7)])})}syncAllFromCouchToDb(){this.loading1=!0,this.tab1_messages=null,this.sync.syncAll(this.syncAllForm.value).subscribe(e=>{this.tab1_messages=e.data,this.loading1=!1},e=>{this.loading1=!1,this.tab1_messages=e.error})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.gz),t.Y36(T._),t.Y36(Pt.eN),t.Y36(b.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["full-orgunit-data-sync"]],decls:39,vars:4,consts:[[1,"page-content-wrap"],[1,"col-12","col-sm-12"],[1,"card","card-primary","card-tabs"],[1,"card-header","p-0","pt-1"],["id","custom-tabs-one-tab","role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["id","custom-tabs-one-sync-all-tab","data-toggle","pill","href","#custom-tabs-one-sync-all","role","tab","aria-controls","custom-tabs-one-sync-all","aria-selected","true",1,"nav-link","active"],[1,"card-body"],["id","custom-tabs-one-tabContent",1,"tab-content"],["id","custom-tabs-one-sync-all","role","tabpanel","aria-labelledby","custom-tabs-one-sync-all-tab",1,"tab-pane","fade","show","active"],[1,"row"],[1,"col-sm-12"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"card","card-default"],[1,"card-header"],[1,"card-title"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-sm-4","col-6"],[1,"form-group"],["type","date","formControlName","start_date",1,"form-control"],["type","date","formControlName","end_date",1,"form-control"],[1,"card-footer"],["type","submit",1,"btn","btn-danger","float-right",3,"disabled"],[1,"fa","fa-floppy-o","fa-right"],["class","card-body",4,"ngIf"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],["id","sync_chws_datatable",1,"table","table-bordered"],["colspan","5",2,"background-color","blue","text-align","center","color","white","font-size","18px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"org-unit-success"],[1,"org-unit-error"],["colspan","5",2,"background-color","red","text-align","center","color","white","font-size","18px"],["colspan","5",2,"background-color","green","text-align","center","color","white","font-size","18px"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),t._uU(7,"Sync All (OrgUnits, Tonoudayo, Dhis2) "),t.qZA()()()(),t.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12),t.YNc(14,Kt,4,1,"div",13),t.TgZ(15,"div",14)(16,"div",15)(17,"h3",16),t._uU(18,"Synchroniser All(OrgUnits, Tonoudayo, Dhis2) from cloud-DB to local-DB"),t.qZA()(),t.TgZ(19,"form",17),t.NdJ("ngSubmit",function(){return i.syncAllFromCouchToDb()}),t.TgZ(20,"div",7)(21,"div",10)(22,"div",18)(23,"div",19)(24,"label"),t._uU(25,"Date de d\xe9but"),t.qZA(),t._UZ(26,"input",20),t.qZA()(),t.TgZ(27,"div",18)(28,"div",19)(29,"label"),t._uU(30,"Date de fin"),t.qZA(),t._UZ(31,"input",21),t.qZA()()()(),t.TgZ(32,"div",22)(33,"button",23),t._uU(34," D\xe9marrer la synchronisation "),t._UZ(35,"span",24),t.qZA()()()()()()(),t.TgZ(36,"div",10)(37,"div",11),t.YNc(38,ne,29,9,"div",25),t.qZA()()()()()()()()),2&e&&(t.xp6(14),t.Q6J("ngIf",i.loading1),t.xp6(5),t.Q6J("formGroup",i.syncAllForm),t.xp6(14),t.Q6J("disabled",!i.syncAllForm.valid),t.xp6(5),t.Q6J("ngIf",null!=i.tab1_messages))},dependencies:[g.sg,g.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,g.Nd],styles:["input[type=checkbox]:checked{filter:invert(90%) hue-rotate(45deg) brightness(1.7);height:18px;width:18px;transform:rotate(-45deg)}input[type=checkbox]{height:18px;width:18px}.form-check-label{margin-top:5px;margin-left:5px}.mat-calendar-body-cell.notSelected{background-color:#4682b4;border-radius:100%;width:50px;height:50px}.mat-calendar-body-cell.selected{background-color:red!important;border-radius:100%;width:50px;height:50px}.results{background-color:#ffebcd;min-height:100px;width:500px}.org-unit-success{padding-left:10px;color:green}.org-unit-error{padding-left:20px;color:red}.borderError{border:solid red 2px}.danger{color:red;font-weight:700}.warning{color:orange;font-weight:700}.infos{color:#8a2be2;font-weight:700}.good{font-weight:700}\n"],encapsulation:2}),n})();function se(n,s){if(1&n&&(t.TgZ(0,"div",37),t._UZ(1,"i",38),t.TgZ(2,"div",39),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.LoadingMsg)}}function oe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",42),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.removeWeekDate(r))}),t.TgZ(1,"b",43),t._uU(2),t.qZA(),t._UZ(3,"span",44),t.qZA()}if(2&n){const e=s.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(i.dateTransform(e))}}function ae(n,s){if(1&n&&(t.TgZ(0,"div",24)(1,"span",40),t._uU(2,"Dates S\xe9lection\xe9es:"),t.qZA(),t.TgZ(3,"div",10),t.YNc(4,oe,4,1,"div",41),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.weekly_Choosen_Dates)}}function re(n,s){if(1&n&&(t.TgZ(0,"div",45)(1,"strong"),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.weekly_date_error_Msg)}}function le(n,s){if(1&n&&(t.TgZ(0,"option",48),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function ce(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"select",46),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.genarateSites())}),t.YNc(1,le,2,2,"option",47),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.Districts$)}}function de(n,s){1&n&&t._UZ(0,"select",49)}function ue(n,s){if(1&n&&(t.TgZ(0,"option",48),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function _e(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"select",50),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.genarateWeekyDataChws())}),t.YNc(1,ue,2,2,"option",47),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.sites$)}}function he(n,s){1&n&&t._UZ(0,"select",49)}function ge(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.tab4_messages_error," ")}}function pe(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.AsE(" ",e.key,":",e.value," ")}}function me(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.hij(" Error Found: ",e,"")}}function fe(n,s){1&n&&(t.TgZ(0,"div"),t._uU(1," Pas d'erreur rencontr\xe9 lors de la r\xe9cup\xe9ration des donn\xe9es sur le serveur! "),t.qZA())}function be(n,s){if(1&n&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&n){const e=s.$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.capitaliseData(e,"_")," ")}}function Te(n,s){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&n){const e=s.$implicit,i=t.oxw(2);t.Tol(i.genarateColor(e)),t.xp6(1),t.hij(" ",e," ")}}function Ze(n,s){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,Te,2,4,"td",51),t.qZA()),2&n){const e=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.getItemAsArray(e))}}let ve=(()=>{class n{constructor(e,i,a){this.auth=e,this.route=i,this.sync=a,this.tab4_messages=null,this.tab4_messages_error=null,this.weekly_Choosen_Dates=[],this.is_weekly_date_error=!1,this.weekly_date_error_Msg="",this.loading4=!1,this.LoadingMsg="Loading...",this.Districts$=[],this.Sites$=[],this.Chws$=[],this.Dhis2Chws$=[],this.chws$=[],this.sites$=[],this.dhis2Chws$=[]}ngOnInit(){this.initAllData(),this.ThinkMdWeeklyForm=this.createThinkmdWeeklyFormGroup()}createThinkmdWeeklyFormGroup(){return new o.cw({start_date:new o.NI("",[o.kI.required,o.kI.minLength(7)]),useToken:new o.NI(!0),InsertIntoDhis2:new o.NI(!1,[]),districts:new o.NI("",[o.kI.required]),sites:new o.NI("",[o.kI.required])})}initAllData(){var e=this;return(0,p.Z)(function*(){e.loading4=!0,e.LoadingMsg="Chargement des Districts ...",e.sync.getDistrictsList().subscribe(function(){var i=(0,p.Z)(function*(a){200==a.status&&(e.Districts$=a.data),e.loading4=!1});return function(a){return i.apply(this,arguments)}}())})()}genarateSites(){this.sites$=[],this.chws$=[];const e=(0,u.pb)(this.ThinkMdWeeklyForm.value.districts);if(this.ThinkMdWeeklyForm.value.sites="",this.ThinkMdWeeklyForm.value.chws=[],(0,u.Nf)(e))for(let i=0;i<this.Sites$.length;i++){const a=this.Sites$[i];(0,u.Nf)(a)&&e.includes(a.district.id)&&this.sites$.push(a)}else this.sites$=[]}genarateWeekyDataChws(){const e=(0,u.pb)(this.ThinkMdWeeklyForm.value.sites);if(this.dhis2Chws$=[],(0,u.Nf)(e))for(let i=0;i<this.Dhis2Chws$.length;i++){const a=this.Dhis2Chws$[i];(0,u.Nf)(a)&&e.includes(a.siteId)&&this.dhis2Chws$.push(a)}else this.dhis2Chws$=this.Dhis2Chws$}cleanWeeklyDateError(){this.is_weekly_date_error=!1,this.weekly_date_error_Msg=""}WeeklyDateIsValid(){var e=0;for(let i=0;i<this.weekly_Choosen_Dates.length;i++){const a=this.weekly_Choosen_Dates[i];(0,m.Ol)(a).includes(a)||e++}return 0==e}removeWeekDate(e){const i=this.weekly_Choosen_Dates.indexOf(e);this.weekly_Choosen_Dates.splice(i,1)}runThinkMdWeekly(){this.dhis2Chws$.length>0?(this.addToDateList(),this.weekly_Choosen_Dates.length>1&&this.WeeklyDateIsValid()?(this.is_weekly_date_error=!1,this.weekly_date_error_Msg="",this.loading4=!0,this.tab4_messages=null,this.tab4_messages_error=null,this.ThinkMdWeeklyForm.value.chws=this.dhis2Chws$,this.sync.syncThinkMdWeeklyChwsData(this.ThinkMdWeeklyForm.value).subscribe(e=>{this.loading4=!1;try{this.tab4_messages=JSON.parse(e)}catch{this.tab4_messages_error=e.toString()}},e=>{this.loading4=!1,this.tab4_messages_error=e.toString(),console.log(e.error)})):(this.is_weekly_date_error=!0,this.weekly_Choosen_Dates.length<=1?this.weekly_date_error_Msg="Vous devez choisir au moins 2 dates":this.WeeklyDateIsValid()||(this.weekly_date_error_Msg="Toutes les dates doivent \xeatre un Lundi de la semaine"))):this.tab4_messages_error="Impossible de r\xe9cup\xe9rer les donn\xe9es du dhis2! Veuillez rafraichir la page et r\xe9\xe9ssayer!"}dateTransform(e){return(0,m.xF)(e,0,"fr")}getValue(e,i){return e[i.pop()]}addToDateList(){const e=this.ThinkMdWeeklyForm.value.start_date;!this.weekly_Choosen_Dates.includes(e)&&null!=e&&""!=e&&this.weekly_Choosen_Dates.push(e),this.ThinkMdWeeklyForm.value.start_date="",this.ThinkMdWeeklyForm.value.end_date="",this.ThinkMdWeeklyForm.value.weekly_Choosen_Dates=this.weekly_Choosen_Dates,this.cleanWeeklyDateError()}genarateColor(e){if((0,u.hj)(e)){const i=parseInt(e);return i<=5?"danger":i>5&&i<=30?"warning":i>30&&i<40?"infos":"good"}return""}capitaliseData(e,i=" ",a=" "){return(0,u.Fs)(e,i,a)}getItemAsArray(e){return e.value}initTable(e){initDataTable(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.e),t.Y36(f.gz),t.Y36(T._))},n.\u0275cmp=t.Xpm({type:n,selectors:[["sync-weekly-data"]],decls:70,vars:20,consts:[[1,"page-content-wrap"],[1,"col-12","col-sm-12"],[1,"card","card-warning","card-tabs"],[1,"card-header","p-0","pt-1"],["id","custom-tabs-one-tab","role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["id","custom-tabs-chws-week-data-tab","data-toggle","pill","href","#custom-tabs-chws-week-data","role","tab","aria-controls","custom-tabs-chws-week-data","aria-selected","true",1,"nav-link","active"],[1,"card-body"],["id","custom-tabs-one-tabContent",1,"tab-content"],["id","custom-tabs-chws-week-data","role","tabpanel","aria-labelledby","custom-tabs-chws-week-data-tab",1,"tab-pane","fade","show","active"],[1,"row"],[1,"col-sm-8"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"card","card-primary"],[1,"card-header"],[1,"card-title"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-sm-5"],[1,"form-group"],["type","date","formControlName","start_date",1,"form-control",3,"change"],[1,"col-sm-1"],["class","col-sm-6",4,"ngIf"],["style","color:red;",4,"ngIf"],[1,"col-sm-6"],["class","form-control","multiple","multiple","formControlName","districts",3,"change",4,"ngIf"],["class","form-control",4,"ngIf"],["class","form-control","multiple","multiple","formControlName","sites",3,"change",4,"ngIf"],[1,"card-footer"],["type","submit",1,"btn","btn-primary","float-right",3,"disabled"],[1,"fa","fa-floppy-o","fa-right"],[1,"col-sm-4"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-sm-12"],["type","button",3,"click"],["id","weekly_thinkMd_datatable",1,"table","table-bordered","table-striped"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],[2,"color","blueviolet"],["class","col-sm-5","style","margin: 10px 0px 10px 10px;",3,"click",4,"ngFor","ngForOf"],[1,"col-sm-5",2,"margin","10px 0px 10px 10px",3,"click"],[2,"color","blue","margin-right","10px","font-size","14px"],[1,"fas","fa-trash",2,"color","red"],[2,"color","red"],["multiple","multiple","formControlName","districts",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-control"],["multiple","multiple","formControlName","sites",1,"form-control",3,"change"],[3,"class",4,"ngFor","ngForOf"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),t._uU(7,"Chws Week Data "),t.qZA()()()(),t.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12),t.YNc(14,se,4,1,"div",13),t.TgZ(15,"div",14)(16,"div",15)(17,"h3",16),t._uU(18,"ThinkMd Donn\xe9es ASC par semaine"),t.qZA()(),t.TgZ(19,"form",17),t.NdJ("ngSubmit",function(){return i.runThinkMdWeekly()}),t.TgZ(20,"div",7)(21,"div",10)(22,"div",18)(23,"div",19)(24,"label"),t._uU(25,"Selectionner les dates souhait\xe9es. "),t._UZ(26,"br"),t.TgZ(27,"small")(28,"b"),t._uU(29,"Toujours choisir les dates des Lundis de semaine"),t.qZA()()(),t.TgZ(30,"input",20),t.NdJ("change",function(){return i.addToDateList()}),t.qZA()()(),t._UZ(31,"div",21),t.YNc(32,ae,5,1,"div",22),t.YNc(33,re,3,1,"div",23),t.qZA(),t._UZ(34,"br"),t.TgZ(35,"div",10)(36,"div",24)(37,"div",19)(38,"label"),t._uU(39,"District"),t.qZA(),t.YNc(40,ce,2,1,"select",25),t.YNc(41,de,1,0,"select",26),t.qZA()(),t.TgZ(42,"div",24)(43,"div",19)(44,"label"),t._uU(45,"Site"),t.qZA(),t.YNc(46,_e,2,1,"select",27),t.YNc(47,he,1,0,"select",26),t.qZA()()()(),t.TgZ(48,"div",28)(49,"button",29),t._uU(50," Charger les donn\xe9es "),t._UZ(51,"span",30),t.qZA()()()()()(),t.TgZ(52,"div",31),t.YNc(53,ge,3,1,"div",32),t.YNc(54,pe,3,2,"div",33),t.ALo(55,"keyvalue"),t._uU(56),t._UZ(57,"br"),t.YNc(58,me,3,1,"div",33),t.YNc(59,fe,2,0,"div",32),t.qZA(),t.TgZ(60,"div",34)(61,"button",35),t.NdJ("click",function(){return i.initTable("weekly_thinkMd_datatable")}),t._uU(62,"G\xe9n\xe9rer Table"),t.qZA(),t.TgZ(63,"table",36)(64,"thead")(65,"tr"),t.YNc(66,be,2,1,"th",33),t.qZA()(),t.TgZ(67,"tbody"),t.YNc(68,Ze,2,1,"tr",33),t.ALo(69,"keyvalue"),t.qZA()()()()()()()()()()),2&e&&(t.xp6(14),t.Q6J("ngIf",i.loading4),t.xp6(5),t.Q6J("formGroup",i.ThinkMdWeeklyForm),t.xp6(13),t.Q6J("ngIf",i.weekly_Choosen_Dates.length>0),t.xp6(1),t.Q6J("ngIf",i.is_weekly_date_error),t.xp6(7),t.Q6J("ngIf",i.Districts$.length>0),t.xp6(1),t.Q6J("ngIf",0==i.Districts$.length),t.xp6(5),t.Q6J("ngIf",i.sites$.length>0),t.xp6(1),t.Q6J("ngIf",0==i.sites$.length),t.xp6(2),t.Q6J("disabled",!i.ThinkMdWeeklyForm.valid),t.xp6(4),t.Q6J("ngIf",null!=i.tab4_messages_error),t.xp6(1),t.Q6J("ngForOf",t.lcZ(55,16,null==i.tab4_messages||null==i.tab4_messages.dataToSend?null:i.tab4_messages.dataToSend.ErrorMsg)),t.xp6(2),t.hij(" ",null==i.tab4_messages||null==i.tab4_messages.errorToSend?null:i.tab4_messages.errorToSend.ConsoleError,""),t.xp6(2),t.Q6J("ngForOf",null==i.tab4_messages||null==i.tab4_messages.errorToSend?null:i.tab4_messages.errorToSend.ErrorData),t.xp6(1),t.Q6J("ngIf","true"==(null==i.tab4_messages||null==i.tab4_messages.dataToSend?null:i.tab4_messages.dataToSend.success)),t.xp6(7),t.Q6J("ngForOf",null==i.tab4_messages||null==i.tab4_messages.dataToSend||null==i.tab4_messages.dataToSend.Data?null:i.tab4_messages.dataToSend.Data.head),t.xp6(2),t.Q6J("ngForOf",t.lcZ(69,18,null==i.tab4_messages||null==i.tab4_messages.dataToSend||null==i.tab4_messages.dataToSend.Data?null:i.tab4_messages.dataToSend.Data.body)))},dependencies:[g.sg,g.O5,o._Y,o.YN,o.Kr,o.Fj,o.K7,o.JJ,o.JL,o.sg,o.u,g.Nd],styles:["input[type=checkbox]:checked{filter:invert(90%) hue-rotate(45deg) brightness(1.7);height:18px;width:18px;transform:rotate(-45deg)}input[type=checkbox]{height:18px;width:18px}.form-check-label{margin-top:5px;margin-left:5px}.mat-calendar-body-cell.notSelected{background-color:#4682b4;border-radius:100%;width:50px;height:50px}.mat-calendar-body-cell.selected{background-color:red!important;border-radius:100%;width:50px;height:50px}.results{background-color:#ffebcd;min-height:100px;width:500px}.org-unit-success{padding-left:10px;color:green}.org-unit-error{padding-left:20px;color:red}.borderError{border:solid red 2px}.danger{color:red;font-weight:700}.warning{color:orange;font-weight:700}.infos{color:#8a2be2;font-weight:700}.good{font-weight:700}\n"],encapsulation:2}),n})();var Z=h(3514);const ye=[{path:"",redirectTo:"sync-weekly-data",pathMatch:"full"},{path:"sync-weekly-data",component:ve,canActivate:[Z.o],data:{title:"Sync Data"}},{path:"sync-to-dhis2",component:wt,canActivate:[Z.o],data:{title:"Sync OrgUnit & Data"}},{path:"sync-steply",component:jt,canActivate:[Z.o],data:{title:"Sync OrgUnit & Data"}},{path:"auto-full-sync",component:ie,canActivate:[Z.o],data:{title:"Sync OrgUnit & Data"}}];let De=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(ye),f.Bz]}),n})(),xe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,o.UX,De]}),n})()}}]);