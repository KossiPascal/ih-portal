"use strict";(self.webpackChunkih_portal=self.webpackChunkih_portal||[]).push([[583],{9583:(bt,y,m)=>{m.r(y),m.d(y,{DashboardsModule:()=>Dt});var w=m(8692),r=m(92),q=m(3580),v=m(8968),g=m(8239);let b=(()=>{class a{}return a.home_actions_forms=["pcime_c_asc","pcime_c_referral","pcime_c_followup","malnutrition_followup","pregnancy_family_planning","prenatal_followup","postnatal_followup","newborn_followup","home_visit","women_emergency_followup","fp_follow_up_renewal"],a.vaccination_forms=["vaccination"],a.consultations_followup_forms=["pcime_c_asc","pregnancy_family_planning","pcime_c_followup","pcime_c_referral","malnutrition_followup","prenatal_followup","postnatal_followup","newborn_followup","women_emergency_followup","fp_follow_up_renewal"],a.consultations_forms=["pcime_c_asc","pregnancy_family_planning"],a.num_fp_forms=["pregnancy_family_planning","prenatal_followup","postnatal_followup","women_emergency_followup","fp_follow_up_renewal"],a.followup_forms=["pcime_c_followup","pcime_c_referral","malnutrition_followup","prenatal_followup","postnatal_followup","newborn_followup","women_emergency_followup","fp_follow_up_renewal"],a.child_forms=["pcime_c_asc","pcime_c_referral","pcime_c_followup","malnutrition_followup","newborn_followup"],a.child_followup_forms=["pcime_c_followup","newborn_followup","malnutrition_followup"],a.allForms=["pcime_c_asc","vaccination_followup","pregnancy_family_planning","delivery","home_visit","newborn_followup","pcime_c_followup","malnutrition_followup","postnatal_followup","prenatal_followup","pcime_c_referral","fp_follow_up_renewal"],a})();var o=m(8629),F=m(574),t=m(4537),A=m(1383),T=m(7556),x=m(1815);function U(a,l){if(1&a&&(t.TgZ(0,"div",23),t._UZ(1,"i",24),t.TgZ(2,"div",25),t._uU(3),t.qZA()()),2&a){const e=t.oxw();t.xp6(3),t.hij(" ",e.initMsg,"")}}function $(a,l){if(1&a&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&a){const e=l.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function I(a,l){if(1&a&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&a){const e=l.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function S(a,l){1&a&&(t.TgZ(0,"th",34),t._uU(1,"Diff"),t.qZA())}function J(a,l){1&a&&(t.TgZ(0,"th",34),t._uU(1,"Ratio"),t.qZA())}function P(a,l){if(1&a&&(t.TgZ(0,"td",46)(1,"strong"),t._uU(2),t.qZA()()),2&a){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.TotalDiff)}}function O(a,l){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.Gre("bg-",e.Ratio.color,""),t.xp6(1),t.hij("",e.Ratio.value," %")}}function L(a,l){if(1&a&&(t.TgZ(0,"tr")(1,"td",40),t._uU(2),t.qZA(),t.TgZ(3,"td",40),t._uU(4),t.qZA(),t.TgZ(5,"td",41),t._uU(6),t.qZA(),t.TgZ(7,"td",41),t._uU(8),t.qZA(),t.TgZ(9,"td",42),t._uU(10),t.qZA(),t.TgZ(11,"td",42),t._uU(12),t.qZA(),t.TgZ(13,"td",41),t._uU(14),t.qZA(),t.TgZ(15,"td",41),t._uU(16),t.qZA(),t.TgZ(17,"td",42),t._uU(18),t.qZA(),t.TgZ(19,"td",42),t._uU(20),t.qZA(),t.TgZ(21,"td",43),t._uU(22),t.qZA(),t.TgZ(23,"td",43),t._uU(24),t.qZA(),t.YNc(25,P,3,1,"td",44),t.YNc(26,O,2,4,"td",45),t.qZA()),2&a){const e=l.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e.Code),t.xp6(2),t.Oqu(e.Name),t.xp6(2),t.Oqu(e.Pcime),t.xp6(2),t.Oqu(e.PcimeDhis2),t.xp6(2),t.Oqu(e.MaternellePf),t.xp6(2),t.Oqu(e.MaternellePfDhis2),t.xp6(2),t.Oqu(e.Consultation),t.xp6(2),t.Oqu(e.ConsultationDhis),t.xp6(2),t.Oqu(e.Recherche),t.xp6(2),t.Oqu(e.RechercheDhis),t.xp6(2),t.Oqu(e.Total),t.xp6(2),t.Oqu(e.TotalDhis),t.xp6(1),t.Q6J("ngIf",1==i.aggradateDataForm.value.withRatio),t.xp6(1),t.Q6J("ngIf",1==i.aggradateDataForm.value.withRatio)}}function M(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"section",27)(1,"div",28)(2,"div",5)(3,"h3",29)(4,"button",30),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.initTable())}),t._uU(5,"Generate Table"),t.qZA()()(),t.TgZ(6,"div",31)(7,"table",32)(8,"thead")(9,"tr",33)(10,"th",34),t._uU(11,"Code ASC"),t.qZA(),t.TgZ(12,"th",35),t._uU(13,"Nom ASC"),t.qZA(),t.TgZ(14,"th",36),t._uU(15,"Pcime"),t.qZA(),t.TgZ(16,"th",36),t._uU(17,"Maternel & PF"),t.qZA(),t.TgZ(18,"th",36),t._uU(19,"Consultation"),t.qZA(),t.TgZ(20,"th",36),t._uU(21,"Recherche"),t.qZA(),t.TgZ(22,"th",36),t._uU(23,"Total"),t.qZA(),t.YNc(24,S,2,0,"th",37),t.YNc(25,J,2,0,"th",37),t.qZA(),t.TgZ(26,"tr",33)(27,"th",38),t._uU(28,"APPLI"),t.qZA(),t.TgZ(29,"th",38),t._uU(30,"DHIS2"),t.qZA(),t.TgZ(31,"th",38),t._uU(32,"APPLI"),t.qZA(),t.TgZ(33,"th",38),t._uU(34,"DHIS2"),t.qZA(),t.TgZ(35,"th",38),t._uU(36,"APPLI"),t.qZA(),t.TgZ(37,"th",38),t._uU(38,"DHIS2"),t.qZA(),t.TgZ(39,"th",38),t._uU(40,"APPLI"),t.qZA(),t.TgZ(41,"th",38),t._uU(42,"DHIS2"),t.qZA(),t.TgZ(43,"th",38),t._uU(44,"APPLI"),t.qZA(),t.TgZ(45,"th",38),t._uU(46,"DHIS2"),t.qZA()()(),t.TgZ(47,"tbody"),t.YNc(48,L,27,14,"tr",39),t.qZA()()()()()}if(2&a){const e=t.oxw();t.xp6(24),t.Q6J("ngIf",1==e.aggradateDataForm.value.withRatio),t.xp6(1),t.Q6J("ngIf",1==e.aggradateDataForm.value.withRatio),t.xp6(23),t.Q6J("ngForOf",e.bodyData)("ngForTrackBy",e.identifyBodyData)}}let Y=(()=>{class a{constructor(e,i,s){this.store=e,this.auth=i,this.sync=s,this.roles=new F.G(this.store),this.bodyData=[],this.ChwsDataFromDb$=[],this.Districts$=[],this.Chws$=[],this.Sites$=[],this.chws$=[],this.sites$=[],this.responseMessage="",!this.roles.isSupervisorMentor()&&!this.roles.isChws()&&(location.href=this.auth.userValue()?.defaultRedirectUrl)}createDataFilterFormGroup(){return new r.cw({start_date:new r.NI(this.initDate.start_date,[r.kI.required,r.kI.minLength(7)]),end_date:new r.NI(this.initDate.end_date,[r.kI.required,r.kI.minLength(7)]),districts:new r.NI(""),sites:new r.NI(""),withRatio:new r.NI(!1,[r.kI.required])})}identifyBodyData(e,i){return i.Code}ngOnInit(){this.isLoading=!1,this.initDate=o.E.startEnd21and20Date(),this.aggradateDataForm=this.createDataFilterFormGroup(),this.initAllData()}initAllData(){var e=this;return(0,g.Z)(function*(){e.isLoading=!0,e.initMsg="Chargement des Districts ...",e.sync.getDistrictsList().subscribe(function(){var i=(0,g.Z)(function*(s){200==s.status&&(e.Districts$=s.data),e.initMsg="Chargement des Sites ...",e.sync.getSitesList().subscribe(function(){var c=(0,g.Z)(function*(n){200==n.status&&(e.Sites$=n.data),e.genarateSites(),e.initMsg="Chargement des ASC ...",e.sync.getChwsList().subscribe(function(){var d=(0,g.Z)(function*(u){200==u.status&&(e.Chws$=u.data),e.genarateChws(),e.isLoading=!1});return function(u){return d.apply(this,arguments)}}(),d=>{e.isLoading=!1,console.log(d.error)})});return function(n){return c.apply(this,arguments)}}(),c=>{e.isLoading=!1,console.log(c.error)})});return function(s){return i.apply(this,arguments)}}(),i=>{e.isLoading=!1,console.log(i.error)})})()}genarateSites(){this.sites$=[],this.chws$=[];const e=this.aggradateDataForm.value.districts;if(this.aggradateDataForm.value.sites="",this.aggradateDataForm.value.chws=[],o.F.notNull(e))for(let i=0;i<this.Sites$.length;i++){const s=this.Sites$[i];o.F.notNull(s)&&e.includes(s.district.id)&&this.sites$.push(s)}else this.sites$=[]}genarateChws(){const e=o.F.returnDataAsArray(this.aggradateDataForm.value.sites);if(this.chws$=[],this.aggradateDataForm.value.chws=[],o.F.notNull(e))for(let i=0;i<this.Chws$.length;i++){const s=this.Chws$[i];o.F.notNull(s)&&e.includes(s.site.id)&&this.chws$.push(s)}else this.chws$=this.Chws$}ParamsToFilter(){return{start_date:this.aggradateDataForm.value.start_date,end_date:this.aggradateDataForm.value.end_date,districts:o.F.returnDataAsArray(this.aggradateDataForm.value.districts),sites:o.F.returnDataAsArray(this.aggradateDataForm.value.sites)}}initDataFilted(e){this.initMsg="Loading Data ...",this.isLoading=!0,this.genarateChws(),this.sync.getAllChwsDataWithParams(e??this.ParamsToFilter()).subscribe(i=>{200==i.status?(this.ChwsDataFromDb$=i.data,this.getAllAboutData(e??this.ParamsToFilter())):(this.isLoading=!1,this.responseMessage=i.data)},i=>{this.isLoading=!1,console.log(i)})}getAllAboutData(e){const{start_date:i,end_date:s,sites:c}=e;var n={};for(let d=0;d<this.chws$.length;d++){const u=this.chws$[d].id;o.F.notNull(u)&&(n.hasOwnProperty(u)||(n[u]={chwId:u,app_total_child_followup:0,dhis_total_child_followup:0,app_total_num_fp_followup:0,dhis_total_num_fp_followup:0,app_total_active_research:0,dhis_total_active_research:0,app_total_consultation_followup:0,dhis_total_consultation_followup:0,app_total_home_visit:0,dhis_total_home_visit:0}))}for(let d=0;d<this.ChwsDataFromDb$.length;d++){const u=this.ChwsDataFromDb$[d];if(null!=u){const h=u.form,p=null!=u.chw&&o.F.notNull(u.chw.id)?u.chw.id:"",C=null!=u.site&&o.F.notNull(u.site.id)?u.site.id:"",Z=o.F.notNull(C)&&o.F.notNull(c)&&c?.includes(C)||!o.F.notNull(c),D=!(!o.F.notNull(i)||!o.F.notNull(s))&&o.E.isBetween(`${i}`,u.reported_date,`${s}`);Z&&D&&n.hasOwnProperty(p)&&("dhis2"==u.source?("PCIME"===h&&(n[p].dhis_total_child_followup+=1),("Maternelle"===h||"PF"===h)&&(n[p].dhis_total_num_fp_followup+=1),"Recherche"===h&&(n[p].dhis_total_active_research+=1),"Recherche"!==h&&(n[p].dhis_total_consultation_followup+=1),n[p].dhis_total_home_visit+=1):"Tonoudayo"==u.source&&(b.child_forms.includes(h)&&(n[p].app_total_child_followup+=1),b.num_fp_forms.includes(h)&&(n[p].app_total_num_fp_followup+=1),"home_visit"===h&&(n[p].app_total_active_research+=1),b.consultations_followup_forms.includes(h)&&(n[p].app_total_consultation_followup+=1),b.home_actions_forms.includes(h)&&(n[p].app_total_home_visit+=1)))}}this.bodyData=[],Object.entries(n).map(([d,u])=>{const h=u;this.bodyData.push({Code:this.getChwInfos(h.chwId).external_id,Name:this.getChwInfos(h.chwId).name,Pcime:h.app_total_child_followup,PcimeDhis2:h.dhis_total_child_followup,MaternellePf:h.app_total_num_fp_followup,MaternellePfDhis2:h.dhis_total_num_fp_followup,Recherche:h.app_total_active_research,RechercheDhis:h.dhis_total_active_research,Consultation:h.app_total_consultation_followup,ConsultationDhis:h.dhis_total_consultation_followup,Total:h.app_total_home_visit,TotalDhis:h.dhis_total_home_visit,TotalDiff:this.getRatio(h.app_total_home_visit,h.dhis_total_home_visit,!1).value,Ratio:this.getRatio(h.app_total_home_visit,h.dhis_total_home_visit)})}),this.isLoading=!1}getDataValuesElements(e){for(let i=0;i<e.dataValues.length;i++){const s=e.dataValues[i];if(s.dataElement==e.dataElement&&s.value==e.value)return!0}return!1}getRatio(e,i,s=!0){var c=0,n="success",d=e-i;if(s){const u=100*(e>0?d/e:i/100);(c=+(u<0?-1*u:u).toFixed(2))>0&&c<=5&&(n="warning"),c>5&&(n="danger")}else c=+(d<0?-1*d:d).toFixed(2);return{value:c,color:n}}initTable(){initDataTable("compare_data",!1)}getChwInfos(e,i=!1){for(let c=0;c<this.chws$.length;c++){const n=this.chws$[c];if(o.F.notNull(n))if(1==i){if(o.F.notNull(n.external_id)&&n.external_id==e)return n}else if(o.F.notNull(n.id)&&n.id==e)return n}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(A.u),t.Y36(T.e),t.Y36(x._))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard-1"]],decls:50,vars:6,consts:[[1,"content-header"],[1,"container-fluid"],[1,"card","card-info"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"card-header"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-2","col-6"],[1,"form-group"],["type","date","formControlName","start_date",1,"form-control"],["type","date","formControlName","end_date",1,"form-control"],["formControlName","districts",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","sites",1,"form-control",3,"change"],["type","submit",1,"btn","btn-warning","form-control",3,"disabled"],[1,"fa","fa-floppy-o","fa-right"],[1,"col-sm-4"],[1,"form-check"],["id","withRatio","type","checkbox","formControlName","withRatio",1,"form-check-input",2,"font-size","20px"],["for","withRatio",1,"form-check-label"],["class","content",4,"ngIf"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],[3,"value"],[1,"content"],[1,"card"],[1,"card-title"],["type","button",3,"click"],[1,"card-body"],["id","compare_data",1,"table","table-bordered","table-hover"],[1,"bg-primary"],["rowspan","2",2,"width","50px"],["rowspan","2",2,"width","150px"],["colspan","2",2,"width","50px"],["rowspan","2","style","width: 50px",4,"ngIf"],[2,"width","50px"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"info"],[1,"warning"],[1,"primary"],[1,"final"],["class","line","class","",4,"ngIf"],[3,"class",4,"ngIf"],[1,""]],template:function(e,i){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),t.YNc(4,U,4,1,"div",4),t.TgZ(5,"div",5)(6,"form",6),t.NdJ("ngSubmit",function(){return i.initDataFilted()}),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"label"),t._uU(11,"Date D\xe9but"),t.qZA(),t._UZ(12,"input",10),t.qZA()(),t.TgZ(13,"div",8)(14,"div",9)(15,"label"),t._uU(16,"Date Fin"),t.qZA(),t._UZ(17,"input",11),t.qZA()(),t.TgZ(18,"div",8)(19,"div",9)(20,"label"),t._uU(21,"District"),t.qZA(),t.TgZ(22,"select",12),t.NdJ("change",function(){return i.genarateSites()}),t._UZ(23,"option",13),t.YNc(24,$,2,2,"option",14),t.qZA()()(),t.TgZ(25,"div",8)(26,"div",9)(27,"label"),t._uU(28,"Site"),t.qZA(),t.TgZ(29,"select",15),t.NdJ("change",function(){return i.genarateChws()}),t._UZ(30,"option",13),t.YNc(31,I,2,2,"option",14),t.qZA()()(),t.TgZ(32,"div",8)(33,"div",9)(34,"label"),t._uU(35,"."),t.qZA(),t.TgZ(36,"button",16),t._uU(37," OK "),t._UZ(38,"span",17),t.qZA()()()(),t.TgZ(39,"div",7)(40,"div",18)(41,"div",9)(42,"label"),t._uU(43,"."),t.qZA(),t.TgZ(44,"div",19),t._UZ(45,"input",20),t.TgZ(46,"label",21)(47,"b"),t._uU(48,"Avec Ratio"),t.qZA()()()()()()()()()()()(),t.YNc(49,M,49,4,"section",22)),2&e&&(t.xp6(4),t.Q6J("ngIf",i.isLoading),t.xp6(2),t.Q6J("formGroup",i.aggradateDataForm),t.xp6(18),t.Q6J("ngForOf",i.Districts$),t.xp6(7),t.Q6J("ngForOf",i.sites$),t.xp6(5),t.Q6J("disabled",!i.aggradateDataForm.valid),t.xp6(13),t.Q6J("ngIf",i.bodyData.length>0))},dependencies:[w.sg,w.O5,r._Y,r.YN,r.Kr,r.Fj,r.Wl,r.EJ,r.JJ,r.JL,r.sg,r.u],styles:[".info[_ngcontent-%COMP%]{color:#00f;font-weight:bolder}.warning[_ngcontent-%COMP%]{color:orange;font-size:large;font-weight:bolder}.primary[_ngcontent-%COMP%]{color:purple;font-size:large;font-weight:bolder}.final[_ngcontent-%COMP%]{color:green;font-size:large;font-weight:bolder}.line[_ngcontent-%COMP%]{color:#000;font-size:large;font-weight:bolder}"]}),a})();function Q(a,l){if(1&a&&(t.TgZ(0,"div",23),t._UZ(1,"i",24),t.TgZ(2,"div",25),t._uU(3),t.qZA()()),2&a){const e=t.oxw();t.xp6(3),t.hij(" ",e.initMsg,"")}}function E(a,l){if(1&a&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&a){const e=l.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function G(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"select",26),t.NdJ("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.genarateSites())}),t.YNc(1,E,2,2,"option",27),t.qZA()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.Districts$)}}function k(a,l){1&a&&t._UZ(0,"select",29)}function R(a,l){if(1&a&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&a){const e=l.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function z(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"select",30),t.NdJ("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.genarateChws())}),t.YNc(1,R,2,2,"option",27),t.qZA()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.sites$)}}function j(a,l){1&a&&t._UZ(0,"select",29)}function K(a,l){if(1&a&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&a){const e=l.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function H(a,l){if(1&a&&(t.TgZ(0,"select",31),t.YNc(1,K,2,2,"option",27),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.chws$)}}function B(a,l){1&a&&t._UZ(0,"select",29)}function V(a,l){if(1&a&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&a){const e=l.$implicit;t.s9C("value",e),t.xp6(1),t.hij(" ",e," ")}}function X(a,l){if(1&a&&(t.TgZ(0,"div",8)(1,"div",9)(2,"label"),t._uU(3,"Source"),t.qZA(),t.TgZ(4,"select",32),t.YNc(5,V,2,2,"option",27),t.qZA()()()),2&a){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.Sources$)}}function W(a,l){if(1&a&&(t.TgZ(0,"h2")(1,"div",2)(2,"div",33),t._uU(3),t.qZA()()()),2&a){const e=t.oxw();t.xp6(3),t.hij(" ",e.data_error_messages," ")}}function tt(a,l){1&a&&(t.TgZ(0,"h2")(1,"div",2)(2,"div",33),t._uU(3," Pas de donn\xe9es trouv\xe9e avec les paramettres renseign\xe9s ! "),t.qZA()()())}function et(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"tr",39),t.NdJ("click",function(){const c=t.CHM(e).$implicit,n=t.oxw(2);return t.KtG(n.seeSelectedChwData(c))}),t.TgZ(1,"td")(2,"span",40)(3,"b"),t._uU(4),t.qZA()(),t._UZ(5,"br"),t.TgZ(6,"span",41),t._uU(7),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"span",42)(10,"small"),t._uU(11,"Total Action: "),t.qZA(),t.TgZ(12,"b"),t._uU(13),t.qZA()()(),t.TgZ(14,"td")(15,"span",43),t._uU(16,"~ "),t.qZA(),t.TgZ(17,"span",44),t._uU(18),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"span",45)(21,"strong"),t._uU(22,"Actions/Jr"),t.qZA()()()()}if(2&a){const e=l.$implicit;t.xp6(4),t.Oqu(e.chw.name),t.xp6(3),t.Oqu(e.chw.external_id),t.xp6(6),t.Oqu(e.data.total_vad),t.xp6(5),t.hij(" ",(e.data.total_vad/18).toFixed(e.data.total_vad/18<1?1:0)," ")}}function it(a,l){if(1&a&&(t.TgZ(0,"div",2)(1,"div",34)(2,"div",5)(3,"h3",35),t._uU(4,"Donn\xe9es par ASC"),t.qZA()(),t.TgZ(5,"div",36)(6,"table",37)(7,"thead")(8,"tr")(9,"th"),t._uU(10,"ASC"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Nbre Action/Jour"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,et,23,4,"tr",38),t.qZA()()()()()),2&a){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.ChwsDataFromDb$)}}function at(a,l){if(1&a&&(t.TgZ(0,"div",57)(1,"div",58)(2,"div",59)(3,"h3",60),t._uU(4),t.qZA(),t.TgZ(5,"p")(6,"strong"),t._uU(7),t.qZA()()(),t.TgZ(8,"div",61),t._UZ(9,"i",62),t.qZA()()()),2&a){const e=l.$implicit,i=t.oxw(2);t.xp6(4),t.Oqu(e.value),t.xp6(3),t.Oqu(i.capitaliseDataGiven(e.key,"_"," "))}}function st(a,l){if(1&a&&(t.TgZ(0,"div",46)(1,"div",47)(2,"div",48)(3,"div",49)(4,"h2"),t._uU(5),t._UZ(6,"br"),t.TgZ(7,"small"),t._uU(8),t.qZA()(),t.TgZ(9,"button",50)(10,"span",51),t._uU(11,"\xd7"),t.qZA()()(),t.TgZ(12,"div",52)(13,"div",53),t.YNc(14,at,10,2,"div",54),t.ALo(15,"keyvalue"),t.qZA()(),t.TgZ(16,"div",55)(17,"button",56),t._uU(18,"Fermer"),t.qZA()()()()()),2&a){const e=t.oxw();t.xp6(5),t.hij(" ",e.selectedChwData.chw.name," "),t.xp6(3),t.Oqu(e.selectedChwData.chw.external_id),t.xp6(6),t.Q6J("ngForOf",t.lcZ(15,3,e.selectedChwData.data))}}let ot=(()=>{class a{constructor(e,i,s){this.store=e,this.auth=i,this.sync=s,this.roles=new F.G(this.store),this.allAggragateData=[],this.options={Chart:{type:"area",height:700},title:{text:"Donn\xe9es par ASC"},credits:{enabled:!1},xAxis:{categories:["ASC1","ASC2","ASC3","ASC4","ASC5","ASC6","ASC7"],tickmarkPlacement:"on",title:{enabled:!0}},yAxis:{categories:[],max:5268,min:0,tickmarkPlacement:"on",title:{enabled:!1}},series:[{name:"Recherche Active",data:[502,635,809,947,1402,3634,5268]},{name:"Pcime",data:[163,203,276,408,547,729,628]},{name:"Maternel",data:[18,31,54,156,339,818,1201]}]},this.data_error_messages="",this.data_no_data_found=!1,this.ChwsDataFromDb$=[],this.selectedChwData=null,this.ChwsDataFromDbError="",this.Sources$=[],this.Districts$=[],this.Sites$=[],this.Chws$=[],this.Zones$=[],this.Patients$=[],this.Families$=[],this.chws$=[],this.sites$=[],!this.roles.isSupervisorMentor()&&!this.roles.isChws()&&(location.href=this.auth.userValue()?.defaultRedirectUrl)}createDataFilterFormGroup(){return new r.cw({start_date:new r.NI(this.initDate.start_date,[r.kI.required,r.kI.minLength(7)]),end_date:new r.NI(this.initDate.end_date,[r.kI.required,r.kI.minLength(7)]),sources:new r.NI(""),districts:new r.NI("",[r.kI.required]),sites:new r.NI(""),chws:new r.NI("")})}identifyAggragateData(e,i){return i.total_vad}ngOnInit(){this.isLoading=!1,this.initDate=o.E.startEnd21and20Date(),this.aggradateDataForm=this.createDataFilterFormGroup(),this.initAllData()}initAllData(){var e=this;return(0,g.Z)(function*(){e.isLoading=!0;const i=e.ParamsToFilter();e.initMsg="Chargement des Districts ...",e.sync.getDistrictsList(i).subscribe(function(){var s=(0,g.Z)(function*(c){200==c.status&&(e.Districts$=c.data),e.initMsg="Chargement des Sites ...",e.sync.getSitesList(i).subscribe(function(){var n=(0,g.Z)(function*(d){200==d.status&&(e.Sites$=d.data),e.genarateSites(),e.initMsg="Chargement des ASC ...",e.sync.getChwsList(i).subscribe(function(){var u=(0,g.Z)(function*(h){200==h.status&&(e.Chws$=h.data),e.genarateChws(),e.isLoading=!1});return function(h){return u.apply(this,arguments)}}(),u=>{e.isLoading=!1,console.log(u.error)})});return function(d){return n.apply(this,arguments)}}(),n=>{e.isLoading=!1,console.log(n.error)})});return function(c){return s.apply(this,arguments)}}(),s=>{e.isLoading=!1,console.log(s.error)})})()}capitaliseDataGiven(e,i,s){return o.F.capitaliseDataGiven(e,i,s)}seeSelectedChwData(e){this.selectedChwData=e}genarateSites(){this.sites$=[],this.chws$=[];const e=o.F.returnEmptyArrayIfNul(this.aggradateDataForm.value.districts);if(this.aggradateDataForm.value.sites=[],this.aggradateDataForm.value.chws=[],o.F.notNull(e))for(let i=0;i<this.Sites$.length;i++){const s=this.Sites$[i];o.F.notNull(s)&&e.includes(s.district.id)&&this.sites$.push(s)}else this.sites$=[]}genarateChws(){const e=o.F.returnEmptyArrayIfNul(this.aggradateDataForm.value.sites);if(this.chws$=[],this.aggradateDataForm.value.chws=[],o.F.notNull(e))for(let i=0;i<this.Chws$.length;i++){const s=this.Chws$[i];o.F.notNull(s)&&e.includes(s.site.id)&&this.chws$.push(s)}else this.chws$=[]}ParamsToFilter(){return{start_date:this.aggradateDataForm.value.start_date,end_date:this.aggradateDataForm.value.end_date,sources:o.F.returnEmptyArrayIfNul(this.aggradateDataForm.value.sources),districts:o.F.returnEmptyArrayIfNul(this.aggradateDataForm.value.districts),sites:o.F.returnEmptyArrayIfNul(this.aggradateDataForm.value.sites),chws:o.F.returnEmptyArrayIfNul(this.aggradateDataForm.value.chws),params:"onlydata"}}returnEmptyArrayIfNul(e){return o.F.notNull(e)?e:[]}initDataFilted(e){this.isLoading=!0,this.selectedChwData=null;const i=e??this.ParamsToFilter();(this.defaultParams?.start_date!=i.start_date||this.defaultParams?.end_date!=i.end_date||this.defaultParams?.districts!=i.districts||this.defaultParams?.sites!=i.sites||this.defaultParams?.chws!=i.chws)&&(this.ChwsDataFromDb$=[],this.data_error_messages="",this.data_no_data_found=!1,this.ChwsDataFromDbError="",this.sync.ihChtDataPerChw(i).subscribe(s=>{if(200==s.status){this.ChwsDataFromDb$=s.data;for(let c=0;c<s.data.length;c++){const n=s.data[c];this.Sources$.includes(n.source)||this.Sources$.push(n.source)}this.defaultParams=i,this.data_no_data_found=this.ChwsDataFromDb$.length<=0}else this.data_error_messages=s.data.toString(),this.data_no_data_found=!0;this.isLoading=!1},s=>{this.isLoading=!1,this.ChwsDataFromDbError=s.toString()}))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(A.u),t.Y36(T.e),t.Y36(x._))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard-2"]],decls:53,vars:14,consts:[[1,"content"],[1,"container-fluid"],[1,"card","card-info"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"card-header"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-2","col-6"],[1,"form-group"],["type","date","formControlName","start_date",1,"form-control"],["type","date","formControlName","end_date",1,"form-control"],["class","form-control","multiple","multiple","formControlName","districts",3,"change",4,"ngIf"],["class","form-control",4,"ngIf"],["class","form-control","multiple","multiple","formControlName","sites",3,"change",4,"ngIf"],["class","form-control","multiple","multiple","formControlName","chws",4,"ngIf"],["class","col-sm-2 col-6",4,"ngIf"],["type","submit",1,"btn","btn-warning","form-control",3,"disabled"],[1,"fa","fa-floppy-o","fa-right"],[1,"col-sm-5"],[4,"ngIf"],["class","card card-info",4,"ngIf"],["class","modal fade","id","modal-default",4,"ngIf"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],["multiple","multiple","formControlName","districts",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-control"],["multiple","multiple","formControlName","sites",1,"form-control",3,"change"],["multiple","multiple","formControlName","chws",1,"form-control"],["formControlName","sources",1,"form-control"],[1,"card-body"],[1,"card"],[1,"card-title"],[1,"card-body","p-0"],[1,"table","table-sm","table-striped",2,"margin","auto"],["data-toggle","modal","data-target","#modal-default",3,"click",4,"ngFor","ngForOf"],["data-toggle","modal","data-target","#modal-default",3,"click"],[1,"custom-badge",2,"font-size","18px"],[1,"custom-badge"],[1,"info",2,"font-size","14px"],[2,"font-size","20px"],[1,"custom-action","badge","bg-warning",2,"font-size","35px","padding","1px"],[1,"info"],["id","modal-default",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"row","card-body"],["class","col-sm-6 col-6",4,"ngFor","ngForOf"],[1,"modal-footer","justify-content-between"],["id","close-modal","type","button","data-dismiss","modal",1,"btn","btn-default"],[1,"col-sm-6","col-6"],[1,"small-box","bg-info",2,"border","1px solid black"],[1,"inner"],[2,"font-size","40px"],[1,"icon"],[1,"ion","ion-stats-bars"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),t.YNc(4,Q,4,1,"div",4),t.TgZ(5,"div",5)(6,"form",6),t.NdJ("ngSubmit",function(){return i.initDataFilted()}),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"label"),t._uU(11,"Date D\xe9but"),t.qZA(),t._UZ(12,"input",10),t.qZA()(),t.TgZ(13,"div",8)(14,"div",9)(15,"label"),t._uU(16,"Date Fin"),t.qZA(),t._UZ(17,"input",11),t.qZA()(),t.TgZ(18,"div",8)(19,"div",9)(20,"label"),t._uU(21,"District"),t.qZA(),t.YNc(22,G,2,1,"select",12),t.YNc(23,k,1,0,"select",13),t.qZA()(),t.TgZ(24,"div",8)(25,"div",9)(26,"label"),t._uU(27,"Site"),t.qZA(),t.YNc(28,z,2,1,"select",14),t.YNc(29,j,1,0,"select",13),t.qZA()(),t.TgZ(30,"div",8)(31,"div",9)(32,"label"),t._uU(33,"ASC"),t.qZA(),t.YNc(34,H,2,1,"select",15),t.YNc(35,B,1,0,"select",13),t.qZA()(),t.YNc(36,X,6,1,"div",16),t.TgZ(37,"div",8)(38,"div",9)(39,"label"),t._uU(40,"."),t.qZA(),t.TgZ(41,"button",17),t._uU(42," OK "),t._UZ(43,"span",18),t.qZA()()()()()()()(),t.TgZ(44,"section",0)(45,"div",1)(46,"div",19),t.YNc(47,W,4,1,"h2",20),t.YNc(48,tt,4,0,"h2",20),t.qZA(),t.YNc(49,it,15,1,"div",21),t.qZA()(),t.YNc(50,st,19,5,"div",22),t._UZ(51,"br")(52,"br"),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("ngIf",i.isLoading),t.xp6(2),t.Q6J("formGroup",i.aggradateDataForm),t.xp6(16),t.Q6J("ngIf",i.Districts$.length>0),t.xp6(1),t.Q6J("ngIf",0==i.Districts$.length),t.xp6(5),t.Q6J("ngIf",i.sites$.length>0),t.xp6(1),t.Q6J("ngIf",0==i.sites$.length),t.xp6(5),t.Q6J("ngIf",i.chws$.length>0),t.xp6(1),t.Q6J("ngIf",0==i.chws$.length),t.xp6(1),t.Q6J("ngIf",i.Sources$.length>0),t.xp6(5),t.Q6J("disabled",!i.aggradateDataForm.valid),t.xp6(6),t.Q6J("ngIf",""!=i.data_error_messages),t.xp6(1),t.Q6J("ngIf",1==i.data_no_data_found),t.xp6(1),t.Q6J("ngIf",""==i.data_error_messages&&i.ChwsDataFromDb$.length>0),t.xp6(1),t.Q6J("ngIf",null!=i.selectedChwData))},dependencies:[w.sg,w.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.K7,r.JJ,r.JL,r.sg,r.u,w.Nd],styles:[".custom-badge[_ngcontent-%COMP%]{font-size:18px;color:#000}.custom-action[_ngcontent-%COMP%]{font-size:25px;color:#000;text-align:center!important}.info[_ngcontent-%COMP%]{text-align:center!important}.box[_ngcontent-%COMP%]{width:600px;height:300px;border:1px solid black;padding:2px 4px;overflow-y:scroll;overflow-x:auto}.log[_ngcontent-%COMP%]{margin-top:8px;font-family:monospace}"]}),a})();var nt=m(8171);function lt(a,l){if(1&a&&(t.TgZ(0,"div",20),t._UZ(1,"i",21),t.TgZ(2,"div",22),t._uU(3),t.qZA()()),2&a){const e=t.oxw();t.xp6(3),t.hij(" ",e.initMsg,"")}}function rt(a,l){if(1&a&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&a){const e=l.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function ct(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"select",23),t.NdJ("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.genarateSites())}),t._UZ(1,"option",24),t.YNc(2,rt,2,2,"option",25),t.qZA()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.Districts$)}}function dt(a,l){1&a&&t._UZ(0,"select",27)}function ut(a,l){if(1&a&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&a){const e=l.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function ht(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"select",28),t.NdJ("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.genarateChws())})("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.genarateChws())}),t._UZ(1,"option",24),t.YNc(2,ut,2,2,"option",25),t.qZA()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.sites$)}}function _t(a,l){1&a&&t._UZ(0,"select",27)}function ft(a,l){if(1&a&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&a){const e=l.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function pt(a,l){if(1&a&&(t.TgZ(0,"select",29),t._UZ(1,"option",24),t.YNc(2,ft,2,2,"option",25),t.qZA()),2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.chws$)}}function gt(a,l){1&a&&t._UZ(0,"select",27)}function mt(a,l){if(1&a&&(t.TgZ(0,"div",13)(1,"div")(2,"div",30)(3,"h3",31),t._uU(4),t.qZA(),t.TgZ(5,"p")(6,"strong"),t._uU(7),t.qZA()()(),t.TgZ(8,"div",32),t._UZ(9,"i"),t.qZA()()()),2&a){const e=l.$implicit;t.xp6(1),t.Gre("small-box ",e.color,""),t.xp6(3),t.Oqu(e.count),t.xp6(3),t.Oqu(e.label),t.xp6(2),t.Gre("ion ",e.icon,"")}}const Ct=[{path:"",redirectTo:"dash1",pathMatch:"full"},{path:"dash1",component:Y,canActivate:[v.a],data:{href:"dashboard1",icon:"fa fa-user",label:"Dashboard-1",title:"Dashboard-1"}},{path:"dash2",component:ot,canActivate:[v.a],data:{href:"dashboard2",icon:"fa fa-user",label:"Dashboard-2",title:"Dashboard-2"}},{path:"dash3",component:(()=>{class a{constructor(e,i,s,c){this.store=e,this.auth=i,this.db=s,this.sync=c,this.roles=new F.G(this.store),this.allAggragateData=[],this.Districts$=[],this.Sites$=[],this.Chws$=[],this.Zones$=[],this.Patients$=[],this.Families$=[],this.chws$=[],this.sites$=[],this.districtsChwsCount=0,this.sitesChwsCount=0,this.zonesChwsCount=0,this.patientsChwsCount=0,this.familiesChwsCount=0,this.chwsCount=0,this.roles.isDataManager()||(location.href=this.auth.userValue()?.defaultRedirectUrl)}createDataFilterFormGroup(){return new r.cw({districts:new r.NI("",[r.kI.required]),sites:new r.NI("",[r.kI.required]),chws:new r.NI("")})}identifyAggragateData(e,i){return i.label}ngOnInit(){this.isLoading=!1,this.aggradateDataForm=this.createDataFilterFormGroup(),this.initAllData(!0)}initAllData(e=!1){var i=this;return(0,g.Z)(function*(){i.isLoading=!0;const s=i.ParamsToFilter();i.initMsg="Chargement des Districts ...",i.sync.getDistrictsList(s).subscribe(function(){var c=(0,g.Z)(function*(n){200==n.status&&(i.Districts$=n.data),i.initMsg="Chargement des Sites ...",i.sync.getSitesList(s).subscribe(function(){var d=(0,g.Z)(function*(u){200==u.status&&(i.Sites$=u.data),i.genarateSites(),i.initMsg="Chargement des ASC ...",i.sync.getChwsList(s).subscribe(function(){var h=(0,g.Z)(function*(p){200==p.status&&(i.Chws$=p.data),i.genarateChws(),0==e?(i.initMsg="Chargement des Zones ...",i.sync.getZonesList(s).subscribe(function(){var C=(0,g.Z)(function*(Z){200==Z.status&&(i.Zones$=Z.data),i.initMsg="Chargement des Familles ...",i.sync.getFamilyList(s).subscribe(function(){var D=(0,g.Z)(function*(f){200==f.status&&(i.Families$=f.data),i.initMsg="Chargement des Patients ...",i.sync.getPatientsList(s).subscribe(function(){var _=(0,g.Z)(function*(N){200==N.status&&(i.Patients$=N.data),i.initDataFilted(s)});return function(N){return _.apply(this,arguments)}}(),_=>{i.isLoading=!1,console.log(_)})});return function(f){return D.apply(this,arguments)}}(),D=>{i.isLoading=!1,console.log(D.error)})});return function(Z){return C.apply(this,arguments)}}(),C=>{i.isLoading=!1,console.log(C.error)})):i.isLoading=!1});return function(p){return h.apply(this,arguments)}}(),h=>{i.isLoading=!1,console.log(h.error)})});return function(u){return d.apply(this,arguments)}}(),d=>{i.isLoading=!1,console.log(d.error)})});return function(n){return c.apply(this,arguments)}}(),c=>{i.isLoading=!1,console.log(c.error)})})()}formatHostName(e){return e.replace(".org","").replace("-",".").trim()}genarateSites(){this.sites$=[],this.chws$=[];const e=o.F.returnEmptyArrayIfNul(this.aggradateDataForm.value.districts);if(this.aggradateDataForm.value.sites="",this.aggradateDataForm.value.chws=[],o.F.notNull(e))for(let i=0;i<this.Sites$.length;i++){const s=this.Sites$[i];o.F.notNull(s)&&e.includes(s.district.id)&&this.sites$.push(s)}else this.sites$=[]}genarateChws(){const e=o.F.returnEmptyArrayIfNul(this.aggradateDataForm.value.sites);if(this.chws$=[],this.aggradateDataForm.value.chws=[],o.F.notNull(e))for(let i=0;i<this.Chws$.length;i++){const s=this.Chws$[i];o.F.notNull(s)&&e.includes(s.site.id)&&this.chws$.push(s)}else this.chws$=[]}ParamsToFilter(){return{districts:o.F.returnEmptyArrayIfNul(this.aggradateDataForm.value.districts),sites:o.F.returnEmptyArrayIfNul(this.aggradateDataForm.value.sites),chws:o.F.returnEmptyArrayIfNul(this.aggradateDataForm.value.chws)}}initDataFilted(e){this.isLoading=!0;const{chws:c,sites:n,districts:d}=e??this.ParamsToFilter();this.districtsChwsCount=0,this.sitesChwsCount=0,this.familiesChwsCount=0,this.patientsChwsCount=0,this.zonesChwsCount=0,this.chwsCount=0,this.allAggragateData=[];for(let f=0;f<this.Districts$.length;f++){const _=this.Districts$[f];o.F.notNull(d)?d?.includes(_.id)&&this.districtsChwsCount++:this.districtsChwsCount++}for(let f=0;f<this.Sites$.length;f++){const _=this.Sites$[f];o.F.notNull(d)?d?.includes(_.district.id)&&this.sitesChwsCount++:this.sitesChwsCount++}for(let f=0;f<this.Families$.length;f++){const _=this.Families$[f];o.F.notNull(d)&&o.F.notNull(n)&&o.F.notNull(c)?d?.includes(_.site.district.id)&&n?.includes(_.site.id)&&c?.includes(_.zone.chw_id)&&this.familiesChwsCount++:o.F.notNull(d)&&o.F.notNull(n)&&!o.F.notNull(c)?d?.includes(_.site.district.id)&&n?.includes(_.site.id)&&this.familiesChwsCount++:(!o.F.notNull(d)||o.F.notNull(n)||o.F.notNull(c)||d?.includes(_.site.district.id))&&this.familiesChwsCount++}for(let f=0;f<this.Patients$.length;f++){const _=this.Patients$[f];o.F.notNull(d)&&o.F.notNull(n)&&o.F.notNull(c)?d?.includes(_.site.district.id)&&n?.includes(_.site.id)&&c?.includes(_.zone.chw_id)&&this.patientsChwsCount++:o.F.notNull(d)&&o.F.notNull(n)&&!o.F.notNull(c)?d?.includes(_.site.district.id)&&n?.includes(_.site.id)&&this.patientsChwsCount++:(!o.F.notNull(d)||o.F.notNull(n)||o.F.notNull(c)||d?.includes(_.site.district.id))&&this.patientsChwsCount++}for(let f=0;f<this.Zones$.length;f++){const _=this.Zones$[f];o.F.notNull(d)&&o.F.notNull(n)&&o.F.notNull(c)?d?.includes(_.site.district.id)&&n?.includes(_.site.id)&&c?.includes(_.chw_id)&&this.zonesChwsCount++:o.F.notNull(d)&&o.F.notNull(n)&&!o.F.notNull(c)?d?.includes(_.site.district.id)&&n?.includes(_.site.id)&&this.zonesChwsCount++:(!o.F.notNull(d)||o.F.notNull(n)||o.F.notNull(c)||d?.includes(_.site.district.id))&&this.zonesChwsCount++}for(let f=0;f<this.Chws$.length;f++){const _=this.Chws$[f];o.F.notNull(d)&&o.F.notNull(n)&&o.F.notNull(c)?d?.includes(_.site.district.id)&&n?.includes(_.site.id)&&c?.includes(_.zone.chw_id)&&this.chwsCount++:o.F.notNull(d)&&o.F.notNull(n)&&!o.F.notNull(c)?d?.includes(_.site.district.id)&&n?.includes(_.site.id)&&this.chwsCount++:(!o.F.notNull(d)||o.F.notNull(n)||o.F.notNull(c)||d?.includes(_.site.district.id))&&this.chwsCount++}let u={label:o.F.capitaliseDataGiven("total_site_enregistre","_"," "),count:this.districtsChwsCount,icon:"ion-stats-bars",color:"bg-info",detailUrl:"/dashboards/dash1"},h={label:o.F.capitaliseDataGiven("total_site_enregistre","_"," "),count:this.sitesChwsCount,icon:"ion-stats-bars",color:"bg-success",detailUrl:"/dashboards/dash1"},p={label:o.F.capitaliseDataGiven("total_ASC_enregistre","_"," "),count:this.chwsCount,icon:"ion-person-add",color:"bg-warning",detailUrl:"/dashboards/dash1"},C={label:o.F.capitaliseDataGiven("total_famille_enregistre","_"," "),count:this.familiesChwsCount,icon:"ion-pie-graph",color:"bg-danger",detailUrl:"/dashboards/dash1"},Z={label:o.F.capitaliseDataGiven("total_patient_enregistre","_"," "),count:this.patientsChwsCount,icon:"ion-bag",color:"bg-primary",detailUrl:"/dashboards/dash1"},D={label:o.F.capitaliseDataGiven("total_zone_enregistre","_"," "),count:this.zonesChwsCount,icon:"ion-bag",color:"bg-success",detailUrl:"/dashboards/dash1"};this.allAggragateData.push(u),this.allAggragateData.push(h),this.allAggragateData.push(p),this.allAggragateData.push(C),this.allAggragateData.push(Z),this.allAggragateData.push(D),this.initMsg="",this.isLoading=!1}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(A.u),t.Y36(T.e),t.Y36(nt.p),t.Y36(x._))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard-3"]],decls:36,vars:11,consts:[[1,"content"],[1,"container-fluid"],[1,"card","card-warning"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"card-header"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-2","col-6"],[1,"form-group"],["class","form-control","multiple","multiple","formControlName","districts",3,"change",4,"ngIf"],["class","form-control",4,"ngIf"],["class","form-control","multiple","multiple","formControlName","sites",3,"change","click",4,"ngIf"],[1,"col-sm-3","col-6"],["class","form-control","multiple","multiple","formControlName","chws",4,"ngIf"],[1,"col-sm-1","col-6"],["type","submit",1,"btn","btn-warning","form-control",3,"disabled"],[1,"nav-icon","fas","fa-search"],[1,"row","card-body"],["class","col-sm-3 col-6",4,"ngFor","ngForOf","ngForTrackBy"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],["multiple","multiple","formControlName","districts",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-control"],["multiple","multiple","formControlName","sites",1,"form-control",3,"change","click"],["multiple","multiple","formControlName","chws",1,"form-control"],[1,"inner"],[2,"font-size","40px"],[1,"icon"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),t.YNc(4,lt,4,1,"div",4),t.TgZ(5,"div",5)(6,"form",6),t.NdJ("ngSubmit",function(){return i.initAllData()}),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"label"),t._uU(11,"District"),t.qZA(),t.YNc(12,ct,3,1,"select",10),t.qZA(),t.YNc(13,dt,1,0,"select",11),t.qZA(),t.TgZ(14,"div",8)(15,"div",9)(16,"label"),t._uU(17,"Site"),t.qZA(),t.YNc(18,ht,3,1,"select",12),t.qZA(),t.YNc(19,_t,1,0,"select",11),t.qZA(),t.TgZ(20,"div",13)(21,"div",9)(22,"label"),t._uU(23,"ASC"),t.qZA(),t.YNc(24,pt,3,1,"select",14),t.YNc(25,gt,1,0,"select",11),t.qZA()(),t.TgZ(26,"div",15)(27,"div",9)(28,"label"),t._uU(29,"."),t.qZA(),t.TgZ(30,"button",16),t._UZ(31,"i",17),t.qZA()()()()()()()(),t.TgZ(32,"div",18),t.YNc(33,mt,10,8,"div",19),t.qZA(),t._UZ(34,"br")(35,"br"),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("ngIf",i.isLoading),t.xp6(2),t.Q6J("formGroup",i.aggradateDataForm),t.xp6(6),t.Q6J("ngIf",i.Districts$.length>0),t.xp6(1),t.Q6J("ngIf",0==i.Districts$.length),t.xp6(5),t.Q6J("ngIf",i.sites$.length>0),t.xp6(1),t.Q6J("ngIf",0==i.sites$.length),t.xp6(5),t.Q6J("ngIf",i.chws$.length>0),t.xp6(1),t.Q6J("ngIf",0==i.chws$.length),t.xp6(5),t.Q6J("disabled",!i.aggradateDataForm.valid),t.xp6(3),t.Q6J("ngForOf",i.allAggragateData)("ngForTrackBy",i.identifyAggragateData))},dependencies:[w.sg,w.O5,r._Y,r.YN,r.Kr,r.K7,r.JJ,r.JL,r.sg,r.u],encapsulation:2}),a})(),canActivate:[v.a],data:{href:"dashboard3",icon:"fa fa-user",label:"Dashboard-3",title:"Dashboard-3"}}];let Zt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[q.Bz.forChild(Ct),q.Bz]}),a})(),Dt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[w.ez,r.UX,Zt]}),a})()}}]);