"use strict";(self.webpackChunkih_portal=self.webpackChunkih_portal||[]).push([[988],{7988:(j,c,r)=>{r.r(c),r.d(c,{AuthsModule:()=>V});var u=r(8692),g=r(7509),i=r(92),m=r(8629),e=r(4537),p=r(7556),d=r(5732),f=r(7092);function b(t,s){if(1&t&&(e.TgZ(0,"div",30),e._UZ(1,"i",31),e.TgZ(2,"div",32),e._uU(3),e.qZA()()),2&t){const o=e.oxw();e.xp6(3),e.Oqu(o.LoadingMsg)}}function v(t,s){1&t&&(e.TgZ(0,"div",10),e._UZ(1,"input",33),e.TgZ(2,"div",12)(3,"div",13),e._UZ(4,"span",14),e.qZA()()())}function Z(t,s){1&t&&(e.TgZ(0,"div",10),e._UZ(1,"input",34),e.TgZ(2,"div",12)(3,"div",13),e._UZ(4,"span",35),e.qZA()()())}function _(t,s){1&t&&(e.TgZ(0,"div",10),e._UZ(1,"input",36),e.TgZ(2,"div",12)(3,"div",13),e._UZ(4,"span",17),e.qZA()()())}function T(t,s){1&t&&(e.TgZ(0,"div",37),e._uU(1," Password does not match "),e.qZA())}function I(t,s){1&t&&(e.TgZ(0,"label",38),e._uU(1,"Remember me"),e.qZA())}function L(t,s){1&t&&(e.TgZ(0,"label",38),e._uU(1,"I agree to the "),e.TgZ(2,"a",39),e._uU(3,"terms"),e.qZA()())}function w(t,s){if(1&t&&(e.TgZ(0,"button",40),e._uU(1,"logIn"),e.qZA()),2&t){const o=e.oxw();e.Q6J("disabled",!o.authForm.valid)}}function C(t,s){if(1&t&&(e.TgZ(0,"button",41),e._uU(1,"register"),e.qZA()),2&t){const o=e.oxw();e.Q6J("disabled",!o.authForm.valid)}}function y(t,s){1&t&&(e.TgZ(0,"a",42),e._uU(1,"I already have a membership"),e.qZA())}function x(t,s){1&t&&(e.TgZ(0,"a",43),e._uU(1,"Register a new membership"),e.qZA())}function U(t,s){1&t&&(e.TgZ(0,"p",44)(1,"a",45),e._uU(2,"I forgot my password"),e.qZA()())}let A=(()=>{class t{constructor(o,n,a,l){this.auth=o,this.router=n,this.http=a,this.conf=l,this.isLoginForm=!0,this.message="Vous \xeates d\xe9connect\xe9 !",this.isLoading=!1,this.LoadingMsg="Loading...",this.showRegisterPage=!1}ngOnInit(){this.auth.alreadyAuthenticate(),this.authForm=this.createFormGroup()}getConfigs(){return this.conf.getConfigs().subscribe(o=>{this.showRegisterPage=o.showRegisterPage??!1},o=>{this.showRegisterPage=!1})}setMessage(o){this.message=o||"Une Erreur est survenue"}createFormGroup(){return new i.cw({username:new i.NI("",[i.kI.required,i.kI.minLength(3)]),password:new i.NI("",[i.kI.required,i.kI.minLength(7)]),agreeTermsOrRemenberMe:new i.NI(!1,[])})}login(){if(!this.auth.isLoggedIn())return this.isLoading=!0,this.auth.login(this.authForm.value.username,this.authForm.value.password).subscribe(o=>{if(200===o.status){this.message="Login successfully !",console.log(this.message),this.auth.clientSession(o.data);const n=m.F.getSavedUrl();location.href=n||this.auth.defaultRedirectUrl}else this.message=o.data,this.isLoading=!1;console.log(o)},o=>{this.isLoading=!1,this.message=o.error,console.log(this.message)});this.auth.alreadyAuthenticate()}authenticate(){this.login()}passwordMatchError(){return!1}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(p.e),e.Y36(g.F0),e.Y36(d.eN),e.Y36(f.E))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:38,vars:14,consts:[[1,"login-page","register-page"],[1,"login-box","register-box"],[1,"card","card-outline","card-primary"],[1,"card-header","text-center"],["src","assets/logo/logo.png","alt","","srcset",""],[1,"card-body"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"login-box-msg"],["novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"input-group","mb-3"],["id","username","type","text","placeholder","Username","formControlName","username",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-user"],["class","input-group mb-3",4,"ngIf"],["id","password","type","password","placeholder","Password","formControlName","password",1,"form-control"],[1,"fas","fa-lock"],["class","btn btn-danger",4,"ngIf"],[1,"row"],[1,"col-8"],[1,"icheck-primary"],["type","checkbox","id","agreeTerms","name","terms","formControlName","agreeTermsOrRemenberMe"],["for","agreeTerms",4,"ngIf"],[1,"col-md-4"],["color","accent","type","submit","class","btn btn-primary btn-block",3,"disabled",4,"ngIf"],["color","accent","type","submit","class","btn btn-success btn-block",3,"disabled",4,"ngIf"],["routerLink","/auths/login","class","text-center",4,"ngIf"],["routerLink","/auths/register","class","text-center",4,"ngIf"],["class","mb-1",4,"ngIf"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],["id","fullname","type","text","placeholder","Full Name","formControlName","fullname",1,"form-control"],["id","email","type","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"fas","fa-envelope"],["id","passwordConfirm","type","password","placeholder","Retype password","formControlName","passwordConfirm",1,"form-control"],[1,"btn","btn-danger"],["for","agreeTerms"],["href","#"],["color","accent","type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],["color","accent","type","submit",1,"btn","btn-success","btn-block",3,"disabled"],["routerLink","/auths/login",1,"text-center"],["routerLink","/auths/register",1,"text-center"],[1,"mb-1"],["href","forgot-password.html"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6),e.YNc(7,b,4,1,"div",7),e.TgZ(8,"p",8)(9,"strong"),e._uU(10),e.qZA()(),e.TgZ(11,"form",9),e.NdJ("ngSubmit",function(){return n.authenticate()}),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.TgZ(14,"div",12)(15,"div",13),e._UZ(16,"span",14),e.qZA()()(),e.YNc(17,v,5,0,"div",15),e.YNc(18,Z,5,0,"div",15),e.TgZ(19,"div",10),e._UZ(20,"input",16),e.TgZ(21,"div",12)(22,"div",13),e._UZ(23,"span",17),e.qZA()()(),e.YNc(24,_,5,0,"div",15),e.YNc(25,T,2,0,"div",18),e.TgZ(26,"div",19)(27,"div",20)(28,"div",21),e._UZ(29,"input",22),e.YNc(30,I,2,0,"label",23),e.YNc(31,L,4,0,"label",23),e.qZA()(),e.TgZ(32,"div",24),e.YNc(33,w,2,1,"button",25),e.YNc(34,C,2,1,"button",26),e.qZA()()(),e.YNc(35,y,2,0,"a",27),e.YNc(36,x,2,0,"a",28),e.YNc(37,U,3,0,"p",29),e.qZA()()()()()),2&o&&(e.xp6(7),e.Q6J("ngIf",n.isLoading),e.xp6(3),e.Oqu(n.message),e.xp6(1),e.Q6J("formGroup",n.authForm),e.xp6(6),e.Q6J("ngIf",!n.isLoginForm),e.xp6(1),e.Q6J("ngIf",!n.isLoginForm),e.xp6(6),e.Q6J("ngIf",!n.isLoginForm),e.xp6(1),e.Q6J("ngIf",n.passwordMatchError()),e.xp6(5),e.Q6J("ngIf",n.isLoginForm),e.xp6(1),e.Q6J("ngIf",!n.isLoginForm),e.xp6(2),e.Q6J("ngIf",n.isLoginForm),e.xp6(1),e.Q6J("ngIf",!n.isLoginForm),e.xp6(1),e.Q6J("ngIf",!n.isLoginForm),e.xp6(1),e.Q6J("ngIf",n.isLoginForm&&n.showRegisterPage),e.xp6(1),e.Q6J("ngIf",n.isLoginForm))},dependencies:[u.O5,i._Y,i.Fj,i.Wl,i.JJ,i.JL,i.sg,i.u,g.yS],styles:["label[_ngcontent-%COMP%] {\n        display: block;\n    }"]}),t})();var F=r(574);function N(t,s){if(1&t&&(e.TgZ(0,"div",30),e._UZ(1,"i",31),e.TgZ(2,"div",32),e._uU(3),e.qZA()()),2&t){const o=e.oxw();e.xp6(3),e.Oqu(o.LoadingMsg)}}function R(t,s){1&t&&(e.TgZ(0,"div",10),e._UZ(1,"input",33),e.TgZ(2,"div",12)(3,"div",13),e._UZ(4,"span",14),e.qZA()()())}function q(t,s){1&t&&(e.TgZ(0,"div",10),e._UZ(1,"input",34),e.TgZ(2,"div",12)(3,"div",13),e._UZ(4,"span",35),e.qZA()()())}function J(t,s){1&t&&(e.TgZ(0,"div",10),e._UZ(1,"input",36),e.TgZ(2,"div",12)(3,"div",13),e._UZ(4,"span",17),e.qZA()()())}function Y(t,s){1&t&&(e.TgZ(0,"div",37),e._uU(1," Password does not match "),e.qZA())}function k(t,s){1&t&&(e.TgZ(0,"label",38),e._uU(1,"Remember me"),e.qZA())}function Q(t,s){1&t&&(e.TgZ(0,"label",38),e._uU(1,"I agree to the "),e.TgZ(2,"a",39),e._uU(3,"terms"),e.qZA()())}function M(t,s){if(1&t&&(e.TgZ(0,"button",40),e._uU(1,"logIn"),e.qZA()),2&t){const o=e.oxw();e.Q6J("disabled",!o.authForm.valid)}}function P(t,s){if(1&t&&(e.TgZ(0,"button",41),e._uU(1,"register"),e.qZA()),2&t){const o=e.oxw();e.Q6J("disabled",!o.authForm.valid)}}function O(t,s){1&t&&(e.TgZ(0,"a",42),e._uU(1,"I already have a membership"),e.qZA())}function S(t,s){1&t&&(e.TgZ(0,"a",43),e._uU(1,"Register a new membership"),e.qZA())}function E(t,s){1&t&&(e.TgZ(0,"p",44)(1,"a",45),e._uU(2,"I forgot my password"),e.qZA()())}const G=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:A,data:{title:"Login"}},{path:"register",component:(()=>{class t{constructor(o,n,a,l){this.auth=o,this.router=n,this.http=a,this.conf=l,this.isLoginForm=!1,this.message="Vous voulez vous enr\xe9gistrer",this.isLoading=!1,this.LoadingMsg="Loading...",this.showRegisterPage=!1}ngOnInit(){this.showRegisterPage=F.N.canManageUser()??!1,this.getConfigs(),this.showRegisterPage||this.auth.alreadyAuthenticate(),this.authForm=this.createFormGroup()}getConfigs(){if(!this.showRegisterPage)return this.conf.getConfigs().subscribe(o=>{if(!0!==o.showRegisterPage){const n=m.F.getSavedUrl();""!=n?location.href=n:this.router.navigate(["auths/login"]),console.log("you don't have permission !")}},o=>{const n=m.F.getSavedUrl();""!=n?location.href=n:this.router.navigate(["auths/login"]),console.log("you don't have permission !")})}createFormGroup(){return new i.cw({username:new i.NI("",[i.kI.required,i.kI.minLength(4)]),fullname:new i.NI("",[i.kI.required,i.kI.minLength(4)]),email:new i.NI("",[i.kI.required,i.kI.email]),password:new i.NI("",[i.kI.required,i.kI.minLength(8)]),passwordConfirm:new i.NI("",[i.kI.required,i.kI.minLength(8)]),agreeTermsOrRemenberMe:new i.NI(!1,[i.kI.required]),isActive:new i.NI(this.showRegisterPage)},[this.MatchValidator("password","passwordConfirm"),this.AcceptThermeValidator("agreeTermsOrRemenberMe")])}MatchValidator(o,n){return a=>{const l=a.get(o),h=a.get(n);return l&&h&&l.value!==h.value?{mismatch:!0}:null}}AcceptThermeValidator(o){return n=>{const a=n.get(o);return a&&!0!==a.value?{mismatch:!0}:null}}passwordMatchError(){return this.authForm.getError("password")&&this.authForm.get("passwordConfirm")?.touched}register(){if(!this.auth.isLoggedIn()||this.showRegisterPage)return this.isLoading=!0,this.auth.register(this.authForm.value).subscribe(o=>{if(200===o.status){this.message="Registed successfully !";const n=m.F.getSavedUrl();""!=n?location.href=n:this.router.navigate(["auths/login"])}else this.message=o.data;console.log(this.message),this.isLoading=!1},o=>{this.message=o.error,this.isLoading=!1,console.log(this.message)});this.auth.alreadyAuthenticate()}authenticate(){this.register()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(p.e),e.Y36(g.F0),e.Y36(d.eN),e.Y36(f.E))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:38,vars:14,consts:[[1,"login-page","register-page"],[1,"login-box","register-box"],[1,"card","card-outline","card-primary"],[1,"card-header","text-center"],["src","assets/logo/logo.png","alt","","srcset",""],[1,"card-body"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"login-box-msg"],["novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"input-group","mb-3"],["id","username","type","text","placeholder","Username","formControlName","username",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-user"],["class","input-group mb-3",4,"ngIf"],["id","password","type","password","placeholder","Password","formControlName","password",1,"form-control"],[1,"fas","fa-lock"],["class","btn btn-danger",4,"ngIf"],[1,"row"],[1,"col-8"],[1,"icheck-primary"],["type","checkbox","id","agreeTerms","name","terms","formControlName","agreeTermsOrRemenberMe"],["for","agreeTerms",4,"ngIf"],[1,"col-md-4"],["color","accent","type","submit","class","btn btn-primary btn-block",3,"disabled",4,"ngIf"],["color","accent","type","submit","class","btn btn-success btn-block",3,"disabled",4,"ngIf"],["routerLink","/auths/login","class","text-center",4,"ngIf"],["routerLink","/auths/register","class","text-center",4,"ngIf"],["class","mb-1",4,"ngIf"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],["id","fullname","type","text","placeholder","Full Name","formControlName","fullname",1,"form-control"],["id","email","type","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"fas","fa-envelope"],["id","passwordConfirm","type","password","placeholder","Retype password","formControlName","passwordConfirm",1,"form-control"],[1,"btn","btn-danger"],["for","agreeTerms"],["href","#"],["color","accent","type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],["color","accent","type","submit",1,"btn","btn-success","btn-block",3,"disabled"],["routerLink","/auths/login",1,"text-center"],["routerLink","/auths/register",1,"text-center"],[1,"mb-1"],["href","forgot-password.html"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6),e.YNc(7,N,4,1,"div",7),e.TgZ(8,"p",8)(9,"strong"),e._uU(10),e.qZA()(),e.TgZ(11,"form",9),e.NdJ("ngSubmit",function(){return n.authenticate()}),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.TgZ(14,"div",12)(15,"div",13),e._UZ(16,"span",14),e.qZA()()(),e.YNc(17,R,5,0,"div",15),e.YNc(18,q,5,0,"div",15),e.TgZ(19,"div",10),e._UZ(20,"input",16),e.TgZ(21,"div",12)(22,"div",13),e._UZ(23,"span",17),e.qZA()()(),e.YNc(24,J,5,0,"div",15),e.YNc(25,Y,2,0,"div",18),e.TgZ(26,"div",19)(27,"div",20)(28,"div",21),e._UZ(29,"input",22),e.YNc(30,k,2,0,"label",23),e.YNc(31,Q,4,0,"label",23),e.qZA()(),e.TgZ(32,"div",24),e.YNc(33,M,2,1,"button",25),e.YNc(34,P,2,1,"button",26),e.qZA()()(),e.YNc(35,O,2,0,"a",27),e.YNc(36,S,2,0,"a",28),e.YNc(37,E,3,0,"p",29),e.qZA()()()()()),2&o&&(e.xp6(7),e.Q6J("ngIf",n.isLoading),e.xp6(3),e.Oqu(n.message),e.xp6(1),e.Q6J("formGroup",n.authForm),e.xp6(6),e.Q6J("ngIf",!n.isLoginForm),e.xp6(1),e.Q6J("ngIf",!n.isLoginForm),e.xp6(6),e.Q6J("ngIf",!n.isLoginForm),e.xp6(1),e.Q6J("ngIf",n.passwordMatchError()),e.xp6(5),e.Q6J("ngIf",n.isLoginForm),e.xp6(1),e.Q6J("ngIf",!n.isLoginForm),e.xp6(2),e.Q6J("ngIf",n.isLoginForm),e.xp6(1),e.Q6J("ngIf",!n.isLoginForm),e.xp6(1),e.Q6J("ngIf",!n.isLoginForm),e.xp6(1),e.Q6J("ngIf",n.isLoginForm&&n.showRegisterPage),e.xp6(1),e.Q6J("ngIf",n.isLoginForm))},dependencies:[u.O5,i._Y,i.Fj,i.Wl,i.JJ,i.JL,i.sg,i.u,g.yS],styles:["label[_ngcontent-%COMP%] {\n        display: block;\n    }"]}),t})(),data:{title:"Register"}}];let z=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.Bz.forChild(G),g.Bz]}),t})(),V=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,i.UX,z]}),t})()}}]);