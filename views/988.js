"use strict";(self.webpackChunkih_portal=self.webpackChunkih_portal||[]).push([[988],{7988:(z,u,a)=>{a.r(u),a.d(u,{AuthsModule:()=>G});var m=a(8692),g=a(7509),i=a(92),l=a(8629),e=a(4537),c=a(7556),p=a(5732);function h(t,r){if(1&t&&(e.TgZ(0,"div",30),e._UZ(1,"i",31),e.TgZ(2,"div",32),e._uU(3),e.qZA()()),2&t){const n=e.oxw();e.xp6(3),e.Oqu(n.LoadingMsg)}}function v(t,r){1&t&&(e.TgZ(0,"div",10),e._UZ(1,"input",33),e.TgZ(2,"div",12)(3,"div",13),e._UZ(4,"span",14),e.qZA()()())}function b(t,r){1&t&&(e.TgZ(0,"div",10),e._UZ(1,"input",34),e.TgZ(2,"div",12)(3,"div",13),e._UZ(4,"span",35),e.qZA()()())}function Z(t,r){1&t&&(e.TgZ(0,"div",10),e._UZ(1,"input",36),e.TgZ(2,"div",12)(3,"div",13),e._UZ(4,"span",17),e.qZA()()())}function _(t,r){1&t&&(e.TgZ(0,"div",37),e._uU(1," Password does not match "),e.qZA())}function T(t,r){1&t&&(e.TgZ(0,"label",38),e._uU(1,"Remember me"),e.qZA())}function I(t,r){1&t&&(e.TgZ(0,"label",38),e._uU(1,"I agree to the "),e.TgZ(2,"a",39),e._uU(3,"terms"),e.qZA()())}function L(t,r){if(1&t&&(e.TgZ(0,"button",40),e._uU(1,"logIn"),e.qZA()),2&t){const n=e.oxw();e.Q6J("disabled",!n.authForm.valid&&n.isLoading)}}function w(t,r){if(1&t&&(e.TgZ(0,"button",41),e._uU(1,"register"),e.qZA()),2&t){const n=e.oxw();e.Q6J("disabled",!n.authForm.valid)}}function y(t,r){1&t&&(e.TgZ(0,"a",42),e._uU(1,"I already have a membership"),e.qZA())}function C(t,r){1&t&&(e.TgZ(0,"a",43),e._uU(1,"Register a new membership"),e.qZA())}function x(t,r){1&t&&(e.TgZ(0,"p",44)(1,"a",45),e._uU(2,"I forgot my password"),e.qZA()())}function A(t,r){if(1&t&&(e.TgZ(0,"div",30),e._UZ(1,"i",31),e.TgZ(2,"div",32),e._uU(3),e.qZA()()),2&t){const n=e.oxw();e.xp6(3),e.Oqu(n.LoadingMsg)}}function F(t,r){1&t&&(e.TgZ(0,"div",10),e._UZ(1,"input",33),e.TgZ(2,"div",12)(3,"div",13),e._UZ(4,"span",14),e.qZA()()())}function N(t,r){1&t&&(e.TgZ(0,"div",10),e._UZ(1,"input",34),e.TgZ(2,"div",12)(3,"div",13),e._UZ(4,"span",35),e.qZA()()())}function R(t,r){1&t&&(e.TgZ(0,"div",10),e._UZ(1,"input",36),e.TgZ(2,"div",12)(3,"div",13),e._UZ(4,"span",17),e.qZA()()())}function q(t,r){1&t&&(e.TgZ(0,"div",37),e._uU(1," Password does not match "),e.qZA())}function J(t,r){1&t&&(e.TgZ(0,"label",38),e._uU(1,"Remember me"),e.qZA())}function k(t,r){1&t&&(e.TgZ(0,"label",38),e._uU(1,"I agree to the "),e.TgZ(2,"a",39),e._uU(3,"terms"),e.qZA()())}function Y(t,r){if(1&t&&(e.TgZ(0,"button",40),e._uU(1,"logIn"),e.qZA()),2&t){const n=e.oxw();e.Q6J("disabled",!n.authForm.valid&&n.isLoading)}}function Q(t,r){if(1&t&&(e.TgZ(0,"button",41),e._uU(1,"register"),e.qZA()),2&t){const n=e.oxw();e.Q6J("disabled",!n.authForm.valid)}}function M(t,r){1&t&&(e.TgZ(0,"a",42),e._uU(1,"I already have a membership"),e.qZA())}function S(t,r){1&t&&(e.TgZ(0,"a",43),e._uU(1,"Register a new membership"),e.qZA())}function P(t,r){1&t&&(e.TgZ(0,"p",44)(1,"a",45),e._uU(2,"I forgot my password"),e.qZA()())}const O=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class t{constructor(n,o,s){this.authService=n,this.router=o,this.http=s,this.isLoginForm=!0,this.message="Vous \xeates d\xe9connect\xe9 !",this.isLoading=!1,this.LoadingMsg="Loading...",this.showRegisterPage=!1}ngOnInit(){this.authService.alreadyAuthenticate(),this.authForm=this.createFormGroup()}getConfigs(){return this.authService.getConfigs().subscribe(n=>{this.showRegisterPage=n.showRegisterPage??!1},n=>{this.showRegisterPage=!1})}setMessage(n){this.message=n||"Une Erreur est survenue"}createFormGroup(){return new i.cw({username:new i.NI("",[i.kI.required,i.kI.minLength(3)]),password:new i.NI("",[i.kI.required,i.kI.minLength(7)]),agreeTermsOrRemenberMe:new i.NI(!1,[])})}login(){if(!this.authService.isLoggedIn())return this.isLoading=!0,this.authService.login(this.authForm.value.username,this.authForm.value.password).subscribe(n=>{this.authService.clientSession(n),this.message="Login successfully !",console.log("Login successfully !");const o=l.F.getSavedUrl();location.href=o||this.authService.defaultRedirectUrl,this.isLoading=!1},n=>{this.isLoading=!1,this.message=n.error,console.log(this.message)});this.authService.alreadyAuthenticate()}authenticate(){this.login()}passwordMatchError(){return!1}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(c.e),e.Y36(g.F0),e.Y36(p.eN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:38,vars:14,consts:[[1,"login-page","register-page"],[1,"login-box","register-box"],[1,"card","card-outline","card-primary"],[1,"card-header","text-center"],["src","assets/logo/logo.png","alt","","srcset",""],[1,"card-body"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"login-box-msg"],["novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"input-group","mb-3"],["id","username","type","text","placeholder","Username","formControlName","username",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-user"],["class","input-group mb-3",4,"ngIf"],["id","password","type","password","placeholder","Password","formControlName","password",1,"form-control"],[1,"fas","fa-lock"],["class","btn btn-danger",4,"ngIf"],[1,"row"],[1,"col-8"],[1,"icheck-primary"],["type","checkbox","id","agreeTerms","name","terms","formControlName","agreeTermsOrRemenberMe"],["for","agreeTerms",4,"ngIf"],[1,"col-md-4"],["color","accent","type","submit","class","btn btn-primary btn-block",3,"disabled",4,"ngIf"],["color","accent","type","submit","class","btn btn-success btn-block",3,"disabled",4,"ngIf"],["routerLink","/auths/login","class","text-center",4,"ngIf"],["routerLink","/auths/register","class","text-center",4,"ngIf"],["class","mb-1",4,"ngIf"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],["id","fullname","type","text","placeholder","Full Name","formControlName","fullname",1,"form-control"],["id","email","type","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"fas","fa-envelope"],["id","passwordConfirm","type","password","placeholder","Retype password","formControlName","passwordConfirm",1,"form-control"],[1,"btn","btn-danger"],["for","agreeTerms"],["href","#"],["color","accent","type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],["color","accent","type","submit",1,"btn","btn-success","btn-block",3,"disabled"],["routerLink","/auths/login",1,"text-center"],["routerLink","/auths/register",1,"text-center"],[1,"mb-1"],["href","forgot-password.html"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6),e.YNc(7,h,4,1,"div",7),e.TgZ(8,"p",8)(9,"strong"),e._uU(10),e.qZA()(),e.TgZ(11,"form",9),e.NdJ("ngSubmit",function(){return o.authenticate()}),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.TgZ(14,"div",12)(15,"div",13),e._UZ(16,"span",14),e.qZA()()(),e.YNc(17,v,5,0,"div",15),e.YNc(18,b,5,0,"div",15),e.TgZ(19,"div",10),e._UZ(20,"input",16),e.TgZ(21,"div",12)(22,"div",13),e._UZ(23,"span",17),e.qZA()()(),e.YNc(24,Z,5,0,"div",15),e.YNc(25,_,2,0,"div",18),e.TgZ(26,"div",19)(27,"div",20)(28,"div",21),e._UZ(29,"input",22),e.YNc(30,T,2,0,"label",23),e.YNc(31,I,4,0,"label",23),e.qZA()(),e.TgZ(32,"div",24),e.YNc(33,L,2,1,"button",25),e.YNc(34,w,2,1,"button",26),e.qZA()()(),e.YNc(35,y,2,0,"a",27),e.YNc(36,C,2,0,"a",28),e.YNc(37,x,3,0,"p",29),e.qZA()()()()()),2&n&&(e.xp6(7),e.Q6J("ngIf",o.isLoading),e.xp6(3),e.Oqu(o.message),e.xp6(1),e.Q6J("formGroup",o.authForm),e.xp6(6),e.Q6J("ngIf",!o.isLoginForm),e.xp6(1),e.Q6J("ngIf",!o.isLoginForm),e.xp6(6),e.Q6J("ngIf",!o.isLoginForm),e.xp6(1),e.Q6J("ngIf",o.passwordMatchError()),e.xp6(5),e.Q6J("ngIf",o.isLoginForm),e.xp6(1),e.Q6J("ngIf",!o.isLoginForm),e.xp6(2),e.Q6J("ngIf",o.isLoginForm),e.xp6(1),e.Q6J("ngIf",!o.isLoginForm),e.xp6(1),e.Q6J("ngIf",!o.isLoginForm),e.xp6(1),e.Q6J("ngIf",o.isLoginForm&&o.showRegisterPage),e.xp6(1),e.Q6J("ngIf",o.isLoginForm))},dependencies:[m.O5,i._Y,i.Fj,i.Wl,i.JJ,i.JL,i.sg,i.u,g.yS],styles:["label[_ngcontent-%COMP%] {\n        display: block;\n    }"]}),t})(),data:{title:"Login"}},{path:"register",component:(()=>{class t{constructor(n,o,s){this.auth=n,this.router=o,this.http=s,this.isLoginForm=!1,this.message="Vous voulez vous enr\xe9gistrer",this.isLoading=!1,this.LoadingMsg="Loading...",this.showRegisterPage=!1}ngOnInit(){this.showRegisterPage=this.auth.canManageUser()??!1,this.getConfigs(),this.showRegisterPage||this.auth.alreadyAuthenticate(),this.authForm=this.createFormGroup()}getConfigs(){if(!this.showRegisterPage)return this.auth.getConfigs().subscribe(n=>{if(!0!==n.showRegisterPage){const o=l.F.getSavedUrl();""!=o?location.href=o:this.router.navigate(["auths/login"]),console.log("you don't have permission !")}},n=>{const o=l.F.getSavedUrl();""!=o?location.href=o:this.router.navigate(["auths/login"]),console.log("you don't have permission !")})}createFormGroup(){return new i.cw({username:new i.NI("",[i.kI.required,i.kI.minLength(2)]),fullname:new i.NI("",[i.kI.required,i.kI.minLength(2)]),email:new i.NI("",[i.kI.required,i.kI.email]),password:new i.NI("",[i.kI.required,i.kI.minLength(7)]),passwordConfirm:new i.NI("",[i.kI.required,i.kI.minLength(7)]),agreeTermsOrRemenberMe:new i.NI(!1,[i.kI.required]),isActive:new i.NI(this.showRegisterPage)},[this.MatchValidator("password","passwordConfirm"),this.AcceptThermeValidator("agreeTermsOrRemenberMe")])}MatchValidator(n,o){return s=>{const d=s.get(n),f=s.get(o);return d&&f&&d.value!==f.value?{mismatch:!0}:null}}AcceptThermeValidator(n){return o=>{const s=o.get(n);return s&&!0!==s.value?{mismatch:!0}:null}}passwordMatchError(){return this.authForm.getError("password")&&this.authForm.get("passwordConfirm")?.touched}register(){if(!this.auth.isLoggedIn()||this.showRegisterPage)return this.isLoading=!0,this.auth.register(this.authForm.value).subscribe(n=>{this.message="Registed successfully !",console.log("Registed successfully !");const o=l.F.getSavedUrl();""!=o?location.href=o:this.router.navigate(["auths/login"]),this.isLoading=!1},n=>{this.message=n.error,this.isLoading=!1,console.log(this.message)});this.auth.alreadyAuthenticate()}authenticate(){this.register()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(c.e),e.Y36(g.F0),e.Y36(p.eN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:38,vars:14,consts:[[1,"login-page","register-page"],[1,"login-box","register-box"],[1,"card","card-outline","card-primary"],[1,"card-header","text-center"],["src","assets/logo/logo.png","alt","","srcset",""],[1,"card-body"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"login-box-msg"],["novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"input-group","mb-3"],["id","username","type","text","placeholder","Username","formControlName","username",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-user"],["class","input-group mb-3",4,"ngIf"],["id","password","type","password","placeholder","Password","formControlName","password",1,"form-control"],[1,"fas","fa-lock"],["class","btn btn-danger",4,"ngIf"],[1,"row"],[1,"col-8"],[1,"icheck-primary"],["type","checkbox","id","agreeTerms","name","terms","formControlName","agreeTermsOrRemenberMe"],["for","agreeTerms",4,"ngIf"],[1,"col-md-4"],["color","accent","type","submit","class","btn btn-primary btn-block",3,"disabled",4,"ngIf"],["color","accent","type","submit","class","btn btn-success btn-block",3,"disabled",4,"ngIf"],["routerLink","/auths/login","class","text-center",4,"ngIf"],["routerLink","/auths/register","class","text-center",4,"ngIf"],["class","mb-1",4,"ngIf"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],["id","fullname","type","text","placeholder","Full Name","formControlName","fullname",1,"form-control"],["id","email","type","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"fas","fa-envelope"],["id","passwordConfirm","type","password","placeholder","Retype password","formControlName","passwordConfirm",1,"form-control"],[1,"btn","btn-danger"],["for","agreeTerms"],["href","#"],["color","accent","type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],["color","accent","type","submit",1,"btn","btn-success","btn-block",3,"disabled"],["routerLink","/auths/login",1,"text-center"],["routerLink","/auths/register",1,"text-center"],[1,"mb-1"],["href","forgot-password.html"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6),e.YNc(7,A,4,1,"div",7),e.TgZ(8,"p",8)(9,"strong"),e._uU(10),e.qZA()(),e.TgZ(11,"form",9),e.NdJ("ngSubmit",function(){return o.authenticate()}),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.TgZ(14,"div",12)(15,"div",13),e._UZ(16,"span",14),e.qZA()()(),e.YNc(17,F,5,0,"div",15),e.YNc(18,N,5,0,"div",15),e.TgZ(19,"div",10),e._UZ(20,"input",16),e.TgZ(21,"div",12)(22,"div",13),e._UZ(23,"span",17),e.qZA()()(),e.YNc(24,R,5,0,"div",15),e.YNc(25,q,2,0,"div",18),e.TgZ(26,"div",19)(27,"div",20)(28,"div",21),e._UZ(29,"input",22),e.YNc(30,J,2,0,"label",23),e.YNc(31,k,4,0,"label",23),e.qZA()(),e.TgZ(32,"div",24),e.YNc(33,Y,2,1,"button",25),e.YNc(34,Q,2,1,"button",26),e.qZA()()(),e.YNc(35,M,2,0,"a",27),e.YNc(36,S,2,0,"a",28),e.YNc(37,P,3,0,"p",29),e.qZA()()()()()),2&n&&(e.xp6(7),e.Q6J("ngIf",o.isLoading),e.xp6(3),e.Oqu(o.message),e.xp6(1),e.Q6J("formGroup",o.authForm),e.xp6(6),e.Q6J("ngIf",!o.isLoginForm),e.xp6(1),e.Q6J("ngIf",!o.isLoginForm),e.xp6(6),e.Q6J("ngIf",!o.isLoginForm),e.xp6(1),e.Q6J("ngIf",o.passwordMatchError()),e.xp6(5),e.Q6J("ngIf",o.isLoginForm),e.xp6(1),e.Q6J("ngIf",!o.isLoginForm),e.xp6(2),e.Q6J("ngIf",o.isLoginForm),e.xp6(1),e.Q6J("ngIf",!o.isLoginForm),e.xp6(1),e.Q6J("ngIf",!o.isLoginForm),e.xp6(1),e.Q6J("ngIf",o.isLoginForm&&o.showRegisterPage),e.xp6(1),e.Q6J("ngIf",o.isLoginForm))},dependencies:[m.O5,i._Y,i.Fj,i.Wl,i.JJ,i.JL,i.sg,i.u,g.yS],styles:["label[_ngcontent-%COMP%] {\n        display: block;\n    }"]}),t})(),data:{title:"Register"}}];let E=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.Bz.forChild(O),g.Bz]}),t})(),G=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,i.UX,E]}),t})()}}]);