"use strict";(self.webpackChunkih_portal=self.webpackChunkih_portal||[]).push([["src_app_modules_auths_auths_module_ts"],{3514:(I,T,c)=>{c.d(T,{o:()=>w});var m=c(3580),d=c(8527),f=c(3528),e=c(4970),h=c(7969),v=c(8023),g=c(4537),r=c(5998),_=c(7556);let w=(()=>{class u{constructor(p,y,b,L){this.titleService=p,this.activatedRoute=y,this.router=b,this.auth=L,this.destroy$=new v.x,this.defaultTitle="Ih-portal"}canActivate(p,y){const b=new d.G(this.auth);if(!this.auth.isLoggedIn())return this.auth.logout(),!1;this.setRouteTitle(p.data?.title||this.defaultTitle);const P=y.url.substring(1);return!!b.pages().includes(P)||(this.auth.GoToDefaultPage(),!1)}setRouteTitle(p){this.titleService.setTitle(p)}subscribeToNavigationEnd(){this.router.events.pipe((0,f.R)(this.destroy$),(0,e.h)(p=>p instanceof m.m2),(0,h.U)(()=>{const p=this.activatedRoute.firstChild;return p&&p.snapshot.data.title?p.snapshot.data.title:this.defaultTitle})).subscribe(p=>{this.setRouteTitle(p)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return u.\u0275fac=function(p){return new(p||u)(g.LFG(r.Dx),g.LFG(m.gz),g.LFG(m.F0),g.LFG(_.e))},u.\u0275prov=g.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},3233:(I,T,c)=>{c.r(T),c.d(T,{AuthsModule:()=>Q});var m=c(8692),d=c(3580),f=c(5128),e=c(4537),h=c(7556),v=c(5732),g=c(946),r=c(92);let _=(()=>{class s{constructor(t,o,n,a){this.auth=t,this.router=o,this.http=n,this.conf=a,this.isLoginForm=!0,this.message="Vous \xeates d\xe9connect\xe9 !",this.isLoading=!1,this.LoadingMsg="Loading...",this.showRegisterPage=!1,this.APP_LOGO=f.z.APP_LOGO}ngOnInit(){}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.e),e.Y36(d.F0),e.Y36(v.eN),e.Y36(g.E))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-forgot-password"]],decls:21,vars:1,consts:[[1,"login-page"],[1,"login-box"],[1,"card","card-outline","card-primary"],[1,"card-header","text-center"],["alt","","srcset","",3,"src"],[1,"card-body"],[1,"login-box-msg"],["action","change-password.html","method","post"],[1,"input-group","mb-3"],["type","email","placeholder","Email",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-envelope"],[1,"row"],[1,"col-12"],["type","submit",1,"btn","btn-primary","btn-block"],[1,"mt-3","mb-1"],["routerLink","/auths/login"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"p",6),e._uU(7,"You forgot your password? Here you can easily retrieve a new password."),e.qZA(),e.TgZ(8,"form",7)(9,"div",8),e._UZ(10,"input",9),e.TgZ(11,"div",10)(12,"div",11),e._UZ(13,"span",12),e.qZA()()(),e.TgZ(14,"div",13)(15,"div",14)(16,"button",15),e._uU(17,"Request new password"),e.qZA()()()(),e.TgZ(18,"p",16)(19,"a",17),e._uU(20,"Login"),e.qZA()()()()()()),2&t&&(e.xp6(4),e.s9C("src",o.APP_LOGO,e.LSH))},dependencies:[r._Y,r.JL,d.yS],encapsulation:2}),s})(),w=(()=>{class s{constructor(t,o,n,a){this.auth=t,this.router=o,this.http=n,this.conf=a,this.isLoginForm=!0,this.message="Vous \xeates d\xe9connect\xe9 !",this.isLoading=!1,this.LoadingMsg="Loading...",this.showRegisterPage=!1,this.APP_LOGO=f.z.APP_LOGO}ngOnInit(){}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.e),e.Y36(d.F0),e.Y36(v.eN),e.Y36(g.E))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-lockscreen"]],decls:21,vars:1,consts:[[1,"hold-transition","lockscreen","lockscreen-wrapper"],[1,"lockscreen-logo","card-header"],["height","70","alt","","srcset","",3,"src"],[1,"lockscreen-name"],[1,"lockscreen-item"],[1,"lockscreen-image"],["src","../../assets/img/user1-128x128.jpg","alt","User Image"],[1,"lockscreen-credentials"],[1,"input-group"],["type","password","placeholder","password",1,"form-control"],[1,"input-group-append"],["type","button",1,"btn"],[1,"fas","fa-arrow-right","text-muted"],[1,"help-block","text-center"],[1,"text-center"],["routerLink","/auths/login"],[1,"lockscreen-footer","text-center"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3),e._uU(4,"John Doe"),e.qZA(),e.TgZ(5,"div",4)(6,"div",5),e._UZ(7,"img",6),e.qZA(),e.TgZ(8,"form",7)(9,"div",8),e._UZ(10,"input",9),e.TgZ(11,"div",10)(12,"button",11),e._UZ(13,"i",12),e.qZA()()()()(),e.TgZ(14,"div",13),e._uU(15," Enter your password to retrieve your session "),e.qZA(),e.TgZ(16,"div",14)(17,"a",15),e._uU(18,"Or sign in as a different user"),e.qZA()(),e.TgZ(19,"div",16),e._UZ(20,"br"),e.qZA()()),2&t&&(e.xp6(2),e.s9C("src",o.APP_LOGO,e.LSH))},dependencies:[r._Y,r.JL,d.yS],encapsulation:2}),s})();var u=c(8629),Z=c(8527);function p(s,i){if(1&s&&(e.TgZ(0,"div",28),e._UZ(1,"i",29),e.TgZ(2,"div",30),e._uU(3),e.qZA()()),2&s){const t=e.oxw();e.xp6(3),e.Oqu(t.LoadingMsg)}}function y(s,i){if(1&s&&(e.TgZ(0,"p",31)(1,"strong"),e._uU(2),e.qZA()()),2&s){const t=e.oxw();e.xp6(2),e.Oqu(t.message)}}let b=(()=>{class s{constructor(t,o,n){this.auth=t,this.router=o,this.cdr=n,this.message="",this.isLoading=!1,this.LoadingMsg="Loading...",this.passwordType="password",this.showRegisterPage=!0,this.APP_LOGO=f.z.APP_LOGO,this.roles=new Z.G(this.auth)}ngOnInit(){this.auth.AlreadyLogin(),this.authForm=this.createFormGroup()}showHidePassword(){this.passwordType="password"==this.passwordType?"text":"password"}createFormGroup(){return new r.cw({credential:new r.NI("",[r.kI.required,r.kI.minLength(3)]),password:new r.NI("",[r.kI.required,r.kI.minLength(7)]),remenber_me:new r.NI(!1,[])})}login(){return this.isLoading=!0,this.auth.login({credential:this.authForm.value.credential,password:this.authForm.value.password}).subscribe(t=>{if(200!==t.status)return this.message=`${t.data??"Error"}`,void(this.isLoading=!1);this.message="Login successfully !",this.cdr.detectChanges(),this.auth.setUser(t.data);var o=this.auth.getDefaultPage();if(!this.roles.isChws()){const n=(0,u.F2)();o=n&&"auths/login"!=n&&""!=n?n:o}this.router.navigate([o])},t=>{this.isLoading=!1,this.message=t,console.log(this.message)})}passwordMatchError(){return!1}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.e),e.Y36(d.F0),e.Y36(e.sBO))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-login"]],decls:33,vars:6,consts:[[1,"login-page","register-page"],[1,"login-box","register-box"],[1,"card","card-outline","card-primary"],[1,"card-header","text-center"],["alt","Integrate Health","srcset","","height","100px",3,"src"],[1,"card-body"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],["class","login-box-msg",4,"ngIf"],["novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"input-group","mb-3"],["id","username","type","text","placeholder","Username / Email","formControlName","credential",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-user"],[1,"input-group","mb-3",2,"margin-bottom","5px!important"],["id","password","placeholder","Password","formControlName","password",1,"form-control",3,"type"],[1,"input-group-text",3,"click"],[1,"fas","fa-lock"],[1,"mb-1",2,"width","100%","text-align","right"],["routerLink","/auths/forgot-password"],[1,"row"],[1,"col-6"],[1,"icheck-primary"],["type","checkbox","id","agreeTerms","name","terms","formControlName","remenber_me"],["for","agreeTerms"],[1,"col-md-6"],["color","accent","type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],[1,"login-box-msg"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6),e.YNc(7,p,4,1,"div",7),e.YNc(8,y,3,1,"p",8),e.TgZ(9,"form",9),e.NdJ("ngSubmit",function(){return o.login()}),e.TgZ(10,"div",10),e._UZ(11,"input",11),e.TgZ(12,"div",12)(13,"div",13),e._UZ(14,"span",14),e.qZA()()(),e.TgZ(15,"div",15),e._UZ(16,"input",16),e.TgZ(17,"div",12)(18,"div",17),e.NdJ("click",function(){return o.showHidePassword()}),e._UZ(19,"span",18),e.qZA()()(),e.TgZ(20,"p",19)(21,"a",20),e._uU(22,"Mot de passe oubli\xe9"),e.qZA()(),e._UZ(23,"br"),e.TgZ(24,"div",21)(25,"div",22)(26,"div",23),e._UZ(27,"input",24),e.TgZ(28,"label",25),e._uU(29,"Se Souvenir"),e.qZA()()(),e.TgZ(30,"div",26)(31,"button",27),e._uU(32,"Connexion"),e.qZA()()()()()()()()()),2&t&&(e.xp6(4),e.s9C("src",o.APP_LOGO,e.LSH),e.xp6(3),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",""!=o.message),e.xp6(1),e.Q6J("formGroup",o.authForm),e.xp6(7),e.s9C("type",o.passwordType),e.xp6(15),e.Q6J("disabled",!o.authForm.valid))},dependencies:[m.O5,r._Y,r.Fj,r.Wl,r.JJ,r.JL,r.sg,r.u,d.yS],styles:["label[_ngcontent-%COMP%] {\n        display: block;\n    }"]}),s})();var L=c(8345);function P(s,i){if(1&s&&(e.TgZ(0,"div",32),e._UZ(1,"i",33),e.TgZ(2,"div",34),e._uU(3),e.qZA()()),2&s){const t=e.oxw();e.xp6(3),e.Oqu(t.LoadingMsg)}}function F(s,i){1&s&&(e.TgZ(0,"div",35),e._uU(1," Password does not match "),e.qZA())}let E=(()=>{class s{constructor(t,o,n,a,l){this.store=t,this.auth=o,this.router=n,this.http=a,this.conf=l,this.message="Vous voulez vous enr\xe9gistrer",this.isLoading=!1,this.LoadingMsg="Loading...",this.showRegisterPage=!1,this.APP_LOGO=f.z.APP_LOGO,this.passwordType="password",this.roles=new Z.G(this.auth)}ngOnInit(){this.showRegisterPage=this.roles.isUserManager()??!1,this.getConfigs(),this.showRegisterPage?this.authForm=this.createFormGroup():this.auth.GoToDefaultPage()}showHidePassword(){this.passwordType="password"==this.passwordType?"text":"password"}getConfigs(){if(!this.showRegisterPage)return this.conf.getConfigs().subscribe(t=>{if(!0!==t.showRegisterPage){const o=(0,u.F2)();this.router.navigate(o?[o]:["auths/login"]),console.log("you don't have permission !")}},t=>{const o=(0,u.F2)();this.router.navigate(o?[o]:["auths/login"]),console.log("you don't have permission !")})}createFormGroup(){return new r.cw({username:new r.NI("",[r.kI.required,r.kI.minLength(4)]),fullname:new r.NI("",[r.kI.required,r.kI.minLength(4)]),email:new r.NI("",[r.kI.required,r.kI.email]),password:new r.NI("",[r.kI.required,r.kI.minLength(8)]),passwordConfirm:new r.NI("",[r.kI.required,r.kI.minLength(8)]),agree_terms:new r.NI(!1,[r.kI.required]),isActive:new r.NI(this.showRegisterPage)},[this.MatchValidator("password","passwordConfirm"),this.AcceptThermeValidator("agree_terms")])}MatchValidator(t,o){return n=>{const a=n.get(t),l=n.get(o);return a&&l&&a.value!==l.value?{mismatch:!0}:null}}AcceptThermeValidator(t){return o=>{const n=o.get(t);return n&&!0!==n.value?{mismatch:!0}:null}}passwordMatchError(){return this.authForm.getError("password")&&this.authForm.get("passwordConfirm")?.touched}register(){if(!this.auth.isLoggedIn()||this.showRegisterPage)return this.isLoading=!0,this.auth.register(this.authForm.value).subscribe(t=>{if(200===t.status){this.message="Registed successfully !";const o=(0,u.F2)();o?location.href=o:this.router.navigate(["auths/login"])}else this.message=t.data;console.log(this.message),this.isLoading=!1},t=>{this.message=t.error,this.isLoading=!1,console.log(this.message)})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(L.u),e.Y36(h.e),e.Y36(d.F0),e.Y36(v.eN),e.Y36(g.E))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-register"]],decls:51,vars:7,consts:[[1,"login-page","register-page"],[1,"login-box","register-box"],[1,"card","card-outline","card-primary"],[1,"card-header","text-center"],["alt","","srcset","",3,"src"],[1,"card-body"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"login-box-msg"],["novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"input-group","mb-3"],["id","username","type","text","placeholder","Username","formControlName","username",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-user"],["id","fullname","type","text","placeholder","Full Name","formControlName","fullname",1,"form-control"],["id","email","type","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"fas","fa-envelope"],["id","password","placeholder","Password","formControlName","password",1,"form-control",3,"type"],[1,"input-group-text",3,"click"],[1,"fas","fa-lock"],["id","passwordConfirm","type","password","placeholder","Retype password","formControlName","passwordConfirm",1,"form-control"],["class","btn btn-danger",4,"ngIf"],[1,"row"],[1,"col-7"],[1,"icheck-primary"],["type","checkbox","id","agreeTerms","name","terms","formControlName","agree_terms"],["for","agreeTerms"],["href","#"],[1,"col-md-5"],["color","accent","type","submit",1,"btn","btn-success","btn-block",3,"disabled"],["routerLink","/auths/login",1,"text-center"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],[1,"btn","btn-danger"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6),e.YNc(7,P,4,1,"div",7),e.TgZ(8,"p",8)(9,"strong"),e._uU(10),e.qZA()(),e.TgZ(11,"form",9),e.NdJ("ngSubmit",function(){return o.register()}),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.TgZ(14,"div",12)(15,"div",13),e._UZ(16,"span",14),e.qZA()()(),e.TgZ(17,"div",10),e._UZ(18,"input",15),e.TgZ(19,"div",12)(20,"div",13),e._UZ(21,"span",14),e.qZA()()(),e.TgZ(22,"div",10),e._UZ(23,"input",16),e.TgZ(24,"div",12)(25,"div",13),e._UZ(26,"span",17),e.qZA()()(),e.TgZ(27,"div",10),e._UZ(28,"input",18),e.TgZ(29,"div",12)(30,"div",19),e.NdJ("click",function(){return o.showHidePassword()}),e._UZ(31,"span",20),e.qZA()()(),e.TgZ(32,"div",10),e._UZ(33,"input",21),e.TgZ(34,"div",12)(35,"div",13),e._UZ(36,"span",20),e.qZA()()(),e.YNc(37,F,2,0,"div",22),e.TgZ(38,"div",23)(39,"div",24)(40,"div",25),e._UZ(41,"input",26),e.TgZ(42,"label",27),e._uU(43,"J'accepte les "),e.TgZ(44,"a",28),e._uU(45,"termes"),e.qZA()()()(),e.TgZ(46,"div",29)(47,"button",30),e._uU(48,"register"),e.qZA()()()(),e.TgZ(49,"a",31),e._uU(50,"Me connecter"),e.qZA()()()()()()),2&t&&(e.xp6(4),e.s9C("src",o.APP_LOGO,e.LSH),e.xp6(3),e.Q6J("ngIf",o.isLoading),e.xp6(3),e.Oqu(o.message),e.xp6(1),e.Q6J("formGroup",o.authForm),e.xp6(17),e.s9C("type",o.passwordType),e.xp6(9),e.Q6J("ngIf",o.passwordMatchError()),e.xp6(10),e.Q6J("disabled",!o.authForm.valid))},dependencies:[m.O5,r._Y,r.Fj,r.Wl,r.JJ,r.JL,r.sg,r.u,d.yS],styles:["label[_ngcontent-%COMP%] {\n        display: block;\n    }"]}),s})();var C=c(4553);let N=(()=>{class s{constructor(){this.cacheName="ngsw:1:data:dynamic:bin-api-performance:cache"}getCaches(){return(0,C.Z)(function*(){return yield caches.keys()})()}clearAllCache(t){return(0,C.Z)(function*(){(yield caches.keys()).map(n=>t?!!t.includes(n)&&caches.delete(n):caches.delete(n))})()}clearCacheByKey(t){caches.keys().then(o=>Promise.all(o.map(n=>{t==n&&caches.delete(n),console.log(`Cache with key (${n}) was deleted successfully!`)})))}clearCacheByNameOrAll(t){const o=this;caches.keys().then(n=>Promise.all(n.filter(a=>!0).map(function(){var a=(0,C.Z)(function*(l){const A=yield caches.delete(l);return o.logDelete(A,l)});return function(l){return a.apply(this,arguments)}}())))}clearCacheByUrl(t,o){caches.open(t).then(n=>{n.keys().then(a=>{a.filter(l=>l.url.includes(o)).map(l=>n.delete(l.url).then(A=>this.logDelete(A,l)))})})}clearCacheStorage(){return(0,C.Z)(function*(){const t=yield caches.keys();return yield Promise.all(t.map(o=>{if(/^(ngsw).*/.test(o))return caches.open(o).then(a=>a.keys().then(l=>l.map(A=>a.delete(A))))}))})()}logDelete(t,o){console.log(`eliminado de cache para ${o} =>`,t?"Satisfactorio":"Fallido")}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function R(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"input",9),e.NdJ("change",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.checkOrNot(a))}),e.qZA(),e.TgZ(3,"label",10),e._uU(4),e.qZA()()()}if(2&s){const t=i.$implicit,o=e.oxw();e.xp6(2),e.s9C("id",o.generateId(t)),e.xp6(1),e.s9C("for",o.generateId(t)),e.xp6(1),e.hij(" ",t,"")}}let G=(()=>{class s{constructor(t,o){this.cache=t,this.authService=o,this.caches$=[],this.selectedCache=[]}ngOnInit(){this.listCache()}listCache(){var t=this;return(0,C.Z)(function*(){const o=yield t.cache.getCaches();t.caches$=o})()}cleanCache(){var t=this;return(0,C.Z)(function*(){yield t.cache.clearAllCache(t.selectedCache),t.listCache()})()}checkAll(){const t=document.getElementById("check-all");if(t)for(let o=0;o<this.caches$.length;o++){const a=document.getElementById(this.generateId(this.caches$[o]));a&&(a.checked=t.checked,this.selectedCache=t.checked?this.caches$:[])}}checkOrNot(t,o=!1){const n=document.getElementById(this.generateId(t));n&&(o?this.selectedCache=n.checked?this.caches$:[]:(n.checked&&!this.selectedCache.includes(t)&&this.selectedCache.push(t),!n.checked&&this.selectedCache.includes(t)&&(this.selectedCache=this.selectedCache.filter(a=>a!==t))))}generateId(t){return`${t}`.replace("ngsw:/:","").replace(":","-")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(N),e.Y36(h.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],decls:16,vars:1,consts:[[1,"card-body"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","check-all",1,"custom-control-input","custom-control-input-danger","custom-control-input-outline",3,"change"],["for","check-all",1,"custom-control-label"],["type","button",1,"btn","btn-danger",3,"click"],["class","form-group",4,"ngFor","ngForOf"],["type","checkbox",1,"custom-control-input","custom-control-input-danger","custom-control-input-outline",3,"id","change"],[1,"custom-control-label",3,"for"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5),e.NdJ("change",function(){return o.checkAll()}),e.qZA(),e.TgZ(6,"label",6),e._uU(7," Check All"),e.qZA()()()(),e.TgZ(8,"div",2)(9,"button",7),e.NdJ("click",function(){return o.cleanCache()}),e._uU(10,"Clean Cache"),e.qZA()()(),e._UZ(11,"br")(12,"br"),e.TgZ(13,"div",1)(14,"div",2),e.YNc(15,R,5,3,"div",8),e.qZA()()()),2&t&&(e.xp6(15),e.Q6J("ngForOf",o.caches$))},dependencies:[m.sg],encapsulation:2}),s})();const k={403:{title:403,msg:"L'acces \xe0 cette page est interdite pour vous !",description:"FORBIDDEN"},404:{title:404,msg:"Unfortunately we are having trouble loading the page you are looking for. Please wait a moment and try again or use action below.",description:"PAGE NOT FOUND"},500:{title:500,msg:"The server encountered an internal error or misconfiguration and was unable to complete your request.",description:"INTERNAL SERVER ERROR"}};let O=(()=>{class s{constructor(t,o,n){this.route=t,this.router=o,this.auth=n}ngOnInit(){this.error=k[this.route.snapshot.params.code]||k[404],this.param=this.route.snapshot.params.param||""}returnBack(){this.auth.GoToDefaultPage(this.param&&""!=this.param)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(d.gz),e.Y36(d.F0),e.Y36(h.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],decls:18,vars:9,consts:[[1,"content"],[1,"error-page"],[1,"error-content"],[1,"btn","btn-info","btn-block","btn-lg",3,"click"]],template:function(t,o){1&t&&(e._UZ(0,"br")(1,"br"),e.TgZ(2,"section",0)(3,"div",1),e._UZ(4,"br")(5,"br")(6,"br")(7,"br")(8,"br")(9,"br"),e.TgZ(10,"h2"),e._uU(11),e.qZA(),e.TgZ(12,"div",2)(13,"h1"),e._UZ(14,"i"),e._uU(15),e.qZA(),e.TgZ(16,"button",3),e.NdJ("click",function(){return o.returnBack()}),e._uU(17),e.qZA()()()()),2&t&&(e.xp6(10),e.Gre("headline ","500"!=o.error.title?"text-warning":"text-danger",""),e.xp6(1),e.hij(" ",o.error.title," "),e.xp6(3),e.Gre("fas fa-exclamation-triangle ","500"!=o.error.title?"text-warning":"text-danger",""),e.xp6(1),e.hij(" ",o.param&&""!=o.param?o.param:"500"!=o.error.title?"Oops! Page non trouv\xe9.":"Oops! Action mal accomplie."," "),e.xp6(2),e.hij(" ",o.param&&""!=o.param?"Me d\xe9connecter":"Fermer cette page"," "))},encapsulation:2}),s})();var U=c(3514);function M(s,i){if(1&s&&(e.TgZ(0,"div",21),e._UZ(1,"i",22),e.TgZ(2,"div",23),e._uU(3),e.qZA()()),2&s){const t=e.oxw();e.xp6(3),e.Oqu(t.LoadingMsg)}}function q(s,i){if(1&s&&(e.TgZ(0,"span",24),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}function J(s,i){1&s&&(e.TgZ(0,"div",25),e._uU(1," Password does not match "),e.qZA())}let Y=(()=>{class s{constructor(t){this.auth=t,this.message="ffff",this.isLoading=!1,this.LoadingMsg="Loading...",this.APP_LOGO=f.z.APP_LOGO,this.passwordType={},this.roles=new Z.G(this.auth)}ngOnInit(){if(!this.roles.canUpdatePassword())return this.auth.GoToDefaultPage();this.authForm=this.createFormGroup()}showHidePassword(t){this.passwordType[t]=this.passwordType[t]&&"password"!=this.passwordType[t]?"password":"text"}createFormGroup(){return new r.cw({old_password:new r.NI("",[r.kI.required,r.kI.minLength(8)]),new_password:new r.NI("",[r.kI.required,r.kI.minLength(8)]),password_confirm:new r.NI("",[r.kI.required,r.kI.minLength(8)])},[this.MatchValidator("new_password","password_confirm")])}MatchValidator(t,o){return n=>{const a=n.get(t),l=n.get(o);return a&&l&&a.value!==l.value?{mismatch:!0}:null}}passwordMatchError(){return this.authForm.getError("new_password")&&this.authForm.get("password_confirm")?.touched}register(){if(this.auth.isLoggedIn())return this.isLoading=!0,this.auth.updateMyPassword({old_password:this.authForm.value.old_password,new_password:this.authForm.value.new_password}).subscribe(t=>{200===t.status?(this.message="Modifi\xe9 avec succ\xe8s !",this.isLoading=!1,confirm("Vous devez vous reconnecter apres cette modification,\nsouhaitez-vous vous d\xe9connecter?")&&this.auth.GoToDefaultPage(!0)):(this.message=t.data,this.isLoading=!1)},t=>{this.message=t.error,this.isLoading=!1,console.log(this.message)});this.auth.logout()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-change-password"]],decls:33,vars:8,consts:[[1,"login-page"],[1,"login-box"],[1,"card","card-outline","card-primary"],[1,"card-body"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"login-box-msg",2,"text-align","center","margin-bottom","20px","font-size","large","font-weight","bold"],["style","text-align: center!important;margin-bottom:20px;","class","login-box-msg",4,"ngIf"],["novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"input-group","mb-3"],["id","old_password","placeholder","Ancien Mot de passe","formControlName","old_password",1,"form-control",3,"type"],[1,"input-group-append"],[1,"input-group-text",3,"click"],[1,"fas","fa-lock"],["id","new_password","placeholder","Nouveau mot de passe","formControlName","new_password",1,"form-control",3,"type"],["id","password_confirm","placeholder","Confirmer nouveau mot de passe","formControlName","password_confirm",1,"form-control",3,"type"],["class","btn btn-danger",4,"ngIf"],[1,"row"],[1,"col-5"],[1,"col-md-7"],["color","accent","type","submit",1,"btn","btn-warning","btn-block",3,"disabled"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],[1,"login-box-msg",2,"text-align","center!important","margin-bottom","20px"],[1,"btn","btn-danger"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e.YNc(5,M,4,1,"div",5),e.TgZ(6,"span",6),e._uU(7,"Modification du mot de passe"),e.qZA(),e._UZ(8,"br"),e.YNc(9,q,2,1,"span",7),e._UZ(10,"br"),e.TgZ(11,"form",8),e.NdJ("ngSubmit",function(){return o.register()}),e.TgZ(12,"div",9),e._UZ(13,"input",10),e.TgZ(14,"div",11)(15,"div",12),e.NdJ("click",function(){return o.showHidePassword(1)}),e._UZ(16,"span",13),e.qZA()()(),e.TgZ(17,"div",9),e._UZ(18,"input",14),e.TgZ(19,"div",11)(20,"div",12),e.NdJ("click",function(){return o.showHidePassword(2)}),e._UZ(21,"span",13),e.qZA()()(),e.TgZ(22,"div",9),e._UZ(23,"input",15),e.TgZ(24,"div",11)(25,"div",12),e.NdJ("click",function(){return o.showHidePassword(3)}),e._UZ(26,"span",13),e.qZA()()(),e.YNc(27,J,2,0,"div",16),e.TgZ(28,"div",17),e._UZ(29,"div",18),e.TgZ(30,"div",19)(31,"button",20),e._uU(32,"Modifier"),e.qZA()()()()()()()()()),2&t){let n,a,l;e.xp6(5),e.Q6J("ngIf",o.isLoading),e.xp6(4),e.Q6J("ngIf",""!=o.message),e.xp6(2),e.Q6J("formGroup",o.authForm),e.xp6(2),e.s9C("type",null!==(n=o.passwordType[1])&&void 0!==n?n:"password"),e.xp6(5),e.s9C("type",null!==(a=o.passwordType[2])&&void 0!==a?a:"password"),e.xp6(5),e.s9C("type",null!==(l=o.passwordType[3])&&void 0!==l?l:"password"),e.xp6(4),e.Q6J("ngIf",o.passwordMatchError()),e.xp6(4),e.Q6J("disabled",!o.authForm.valid)}},dependencies:[m.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],encapsulation:2}),s})();var S=c(3528),D=c(4970),B=c(7969),z=c(8023),$=c(5998);let x=(()=>{class s{constructor(t,o,n,a){this.titleService=t,this.activatedRoute=o,this.router=n,this.auth=a,this.destroy$=new z.x,this.defaultTitle="Ih-portal",this.logoutAccessPages=["auths/lock-screen","auths/login","auths/register","auths/forgot-password"]}canActivate(t,o){if(this.auth.isLoggedIn())return this.auth.GoToDefaultPage(),!1;this.setRouteTitle(t.data?.title||this.defaultTitle);const a=o.url.substring(1);return!!this.logoutAccessPages.includes(a)||(this.auth.GoToDefaultPage(),!1)}setRouteTitle(t){this.titleService.setTitle(t)}subscribeToNavigationEnd(){this.router.events.pipe((0,S.R)(this.destroy$),(0,D.h)(t=>t instanceof d.m2),(0,B.U)(()=>{const t=this.activatedRoute.firstChild;return t&&t.snapshot.data.title?t.snapshot.data.title:this.defaultTitle})).subscribe(t=>{this.setRouteTitle(t)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return s.\u0275fac=function(t){return new(t||s)(e.LFG($.Dx),e.LFG(d.gz),e.LFG(d.F0),e.LFG(h.e))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const H=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:b,data:{title:"Login"},canActivate:[x]},{path:"register",component:E,data:{title:"Register"},canActivate:[x]},{path:"forgot-password",component:_,data:{title:"Forgot Password"},canActivate:[x]},{path:"lock-screen",component:w,data:{title:"Lock Screen"},canActivate:[U.o]},{path:"change-password",component:Y,data:{title:"Recover Password"},canActivate:[U.o]},{path:"cache-list",component:G,data:{title:"Error"},canActivate:[U.o]},{path:"error",redirectTo:"error/404",pathMatch:"full"},{path:"error/:code",component:O,data:{title:"Error"},canActivate:[]},{path:"error/:code/:param",component:O,data:{title:"Error"},canActivate:[]}];let j=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[d.Bz.forChild(H),d.Bz]}),s})(),Q=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[m.ez,r.UX,j]}),s})()},4553:(I,T,c)=>{function m(f,e,h,v,g,r,_){try{var w=f[r](_),u=w.value}catch(Z){return void h(Z)}w.done?e(u):Promise.resolve(u).then(v,g)}function d(f){return function(){var e=this,h=arguments;return new Promise(function(v,g){var r=f.apply(e,h);function _(u){m(r,v,g,_,w,"next",u)}function w(u){m(r,v,g,_,w,"throw",u)}_(void 0)})}}c.d(T,{Z:()=>d})}}]);