
    location /dhis/ {
      proxy_pass                http://localhost:8080/dhis/;
      proxy_redirect            off;
      proxy_set_header          Host               $host;
      proxy_set_header          X-Real-IP          $remote_addr;
      proxy_set_header          X-Forwarded-For    $proxy_add_x_forwarded_for;
      proxy_set_header          X-Forwarded-Proto  https;
      proxy_buffer_size         128k;
      proxy_buffers             8 128k;
      proxy_busy_buffers_size   256k;
      proxy_cookie_path         ~*^/(.*) "/$1; SameSite=Lax";
      proxy_cache               dhis;
    }

    location /kossi/ {
      proxy_pass                https://209.124.84.194:444;
      proxy_redirect            off;
      proxy_set_header          Host               $host;
      proxy_set_header          X-Real-IP          $remote_addr;
      proxy_set_header          X-Forwarded-For    $proxy_add_x_forwarded_for;
      proxy_set_header          X-Forwarded-Proto  https;
      proxy_buffer_size         128k;
      proxy_buffers             8 128k;
      proxy_busy_buffers_size   256k;
#      proxy_cookie_path         ~*^/(.*) "/$1; SameSite=Lax";
#      proxy_cache               dhis;
    }




JAVA_HOME='/usr/lib/jvm/java-11-openjdk-amd64/'
JAVA_OPTS=' -Xms4000m -Xmx7000m -XX:PermSize=256m -XX:MaxPermSize=768m'
DHIS2_HOME='/home/dhis/config'



sudo -u dhis /home/dhis/tomcat-dhis/bin/shutdown.sh
sudo -u dhis_dev /home/dhis_dev/tomcat-dhis/bin/shutdown.sh

sudo -u dhis /home/dhis/tomcat-dhis/bin/startup.sh
sudo -u dhis_dev /home/dhis_dev/tomcat-dhis/bin/startup.sh


    <Connector port="8081" protocol="HTTP/1.1"
              proxyPort="443" 
              scheme="https"
              secure="true"
              connectionTimeout="20000"
              redirectPort="8444" 
              relaxedQueryChars="\ { } | []" />

    <Connector address="localhost" protocol="HTTP/1.1" />

    <Connector scheme="https" proxyPort="443" />













#!/bin/bash
# description: Tomcat Start Stop Restart
# processname: tomcat
# chkconfig: 234 20 80
JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64
export JAVA_HOME
PATH=$JAVA_HOME/bin:$PATH
export PATH
CATALINA_HOME=/home/dhis_dev/tomcat-dhis
case $1 in
start)
sh $CATALINA_HOME/bin/startup.sh
;;
stop)
sh $CATALINA_HOME/bin/shutdown.sh
;;
restart)
sh $CATALINA_HOME/bin/shutdown.sh
sh $CATALINA_HOME/bin/startup.sh
;;
esac
exit 0














PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/lib/jvm/java-11-openjdk-amd64/bin"

export JAVA_HOME='/usr/lib/jvm/java-11-openjdk-amd64/'
export JAVA_OPTS='-Xms4000m -Xmx7000m -XX:PermSize=256m -XX:MaxPermSize=768m'
export 



[Unit]
Description=Tomcat servlet container Web Application Container
After=network.target

[Service]
Type=forking

User=tomcat
Group=tomcat
UMask=0007
RestartSec=10
Restart=always

Environment="/usr/lib/jvm/java-11-openjdk-amd64"
Environment="JAVA_OPTS=-Xms4000m -Xmx7000m -XX:PermSize=256m -XX:MaxPermSize=768m"

Environment="DHIS2_HOME=/home/dhis/config"
Environment="CATALINA_BASE=/home/dhis/tomcat-dhis"
Environment="CATALINA_HOME=/usr/share/tomcat9"
Environment="CATALINA_PID=/usr/share/tomcat9/temp/tomcat9.pid"
Environment="CATALINA_OPTS=-Xms512M -Xmx1024M -server -XX:+UseParallelGC"

ExecStart=/usr/share/tomcat9/bin/startup.sh
ExecStop=/usr/share/tomcat9/bin/shutdown.sh

[Install]
WantedBy=multi-user.target